@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutindexWH.cshtml";
    var user = ViewBag.UserId;
    var usertype = ViewBag.UserType;
    var noclaim = ViewBag.Claimno;
    //var subnoclaim = ViewBag.Claimsubno;
}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Process Claim Document Warehouse</title>
    <link href="~/Content/css/sb-admin-A.css" rel="stylesheet" />
    <link href="~/Scripts/JSautocomplete/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/JSautocomplete/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/JSautocomplete/jquery-ui.js"></script>
    <script src="~/Content/fixed-table-master/fixed-table.js"></script>
    <link href="~/Content/fixed-table-master/fixed-table.css" rel="stylesheet" />
    <link href="~/Content/css/Zoomimg.css" rel="stylesheet" />
    <style>
        #myImg {
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

            #myImg:hover {
                opacity: 0.7;
            }

        /* The Modal (background) */
        .modalx {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        /* Modal Content (Image) */
        .modal-contentx {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 1200px;
        }

        /* Caption of Modal Image (Image Text) - Same Width as the Image */
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        /* Add Animation - Zoom in the Modal */
        .modal-content, #caption {
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        /* The Close Button */
        .close {
            position: absolute;
            top: 56px;
            right: 20px;
            color: #f1f1f1;
            font-size: 57px;
            font-weight: bold;
            /* transition: 0.3s; */
            left: 1656px;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }




        .preserveLineBreaks {
            white-space: pre-line; /*or pre-wrap*/
        }

        input[type="file"] {
            display: block;
        }

        input[type="text"] {
            /*background: border-box border-box;*/
            color: blue;
        }

        input[type="date"] {
            /*background: border-box border-box;*/
            color: blue;
        }

        input[type="checkbox"] {
            width: 35px;
            zoom: 2;
            padding: 2px;
        }

        .imageThumb {
            max-height: 75px;
            border: 2px solid;
            padding: 1px;
            cursor: pointer;
        }

        .pip1 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .removetec {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .removetec:hover {
                background: white;
                color: black;
            }

        .removevideo {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .removevideo:hover {
                background: white;
                color: black;
            }

        .remove1 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove1:hover {
                background: white;
                color: black;
            }

        .pip {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .pip2 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove2 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove2:hover {
                background: white;
                color: black;
            }

        .pip3 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove3 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove3:hover {
                background: white;
                color: black;
            }

        .pip4 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .pip {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove4 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove4:hover {
                background: white;
                color: black;
            }

        .gi-4x {
            font-size: 2em;
        }
    </style>
</head>

<body>
    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg" style=" max-width: 1200px;">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Invoice History</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" @*style="overflow-x:scroll"*@>
                    <table id="_tbinvoicehiscx">
                        <thead>
                            <tr>
                                <th style=" min-width: 115px; height: 60px; border: 1px solid #222;">Invoice No</th>
                                @*<th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                <th style=" min-width: 85px; height: 60px; border: 1px solid #222;">Invoice Date</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Item No.</th>
                                <th style=" min-width: 200px; height: 60px; border: 1px solid #222;">Description</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">UOM</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Qty</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Unit Price</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />Discount %</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />discount Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sale Man</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Customer</th>

                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModalimage" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Image</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="overflow-x:scroll">
                    <table id="_tbimage">
                        <thead>
                            <tr>
                                <th style="min-width: 645px;height: 60px;border: 1px solid #222;text-align: center;">Image</th>
                                @*<th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                <th style="min-width: 134px;height: 60px;border: 1px solid #222;text-align: center;">Delete</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Trigger the modal with a button -->
    <!-- ModalWarning -->
    <div id="myModalWarning" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog" role="document">

            <div class="alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong>
                <div class="modal-body">
                    <div id="textAlertWarning">Some text in the modal.</div>
                </div>

            </div>
        </div>
    </div>
    <!-- Modalsuccess -->
    <div class="modal fade" id="myModalSucces" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Succes</strong>
                <div class="modal-body">
                    <div id="textAlertSucces">Save success</div>
                </div>

            </div>
        </div>
    </div>

    <!-- Print Modal-->
    <div class="modal fade" id="PrintModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">แบบฟอร์มสำหรับช่างตรวจสอบ</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">คุณต้องการ พิมพ์แบบฟอร์มสำหรับช่างตรวจสอบหรือไม่ </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal" id="btnnotprint">No</button>
                    <button class="btn btn-secondary" type="button" id="btnprint">Print</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Print Modal-->
    <div class="modal fade" id="PrintlabalModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Form Labal</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">คุณต้องการ พิมพ์ Labal หรือไม่ </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal" id="btnnotprintlabal">No</button>
                    <button class="btn btn-secondary" type="button" id="btnprintlabal">Print</button>
                </div>
            </div>
        </div>
    </div>
    <div class="card mb-12">
        <div class="card-header">
            <i class="fa fa-table"></i> ตรวจสอบ & พิจารณา <li id="clickmeheader" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>

        </div>
        <div class="card-body" id="myDIVheader">

            <div class="col-md-12">

                <div class="row">
                    <div class="col-sm-4">
                        <div class="input-group">
                            <input class="form-control" type="text" id="searchclaimno" placeholder="Search Claim No...." value="@noclaim">
                            <span class="input-group-btn">
                                <button class="btn btn-primary" type="button" id="_btnsearchclaimno" style="display:block">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="group" style=" margin-bottom: 22px;">
                            <select class="bar" id="_company">
                                <option value="0" disabled>Choose option</option>
                                <option value="TAC" selected>TAC</option>
                                <option value="AAC">AAC</option>
                                <option value="OMP">OMP</option>
                                <option value="ALL">ALL</option>
                            </select>
                            <label style="top: -20px;font-size: 14px;color: #5264AE;">Company</label>
                        </div>
                    </div>
                </div>
                <div class="row">
                  
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Request by:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="requestby"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Department:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="requestdep"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Request Date:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="requestdate"></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                        
                        </div>
                    </div>

                    <div class="col-md-5">
                        <div class="form-group">
                          
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                           
                        </div>
                    </div>
                </div>


            </div>
            <div id="fixed-table-container-2" class="fixed-table-container">
                <table id="_tbclmline">
                    <thead>
                        <tr>

                            <th style="width: 134px">line no</th>
                            <th>Item No.</th>
                            <th>UOM</th>
                            <th>Request<br /> Qty.</th>
                            
                            <th>Request Date</th>
                            <th style="text-align:center">สาเหตุ</th>
                            <th>ดำเนินการ</th>
                            @*<th>Edit</th>*@
                            <th style="text-align:center">หมายเหตุ<br /></th>
                            @*<th>ตรวจสอบ<br />สินค้า</th>*@
                            <th>Tech<br />1</th>
                            <th>Tech<br />2</th>
                            <th>PM</th>
                            <th>Log</th>
                            <th>รับสินค้า<br />Claim</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>


        <div class="card mb-12">
            <div class="card-header">
                <i class="fa fa-table"></i>รายละเอียดสินค้า <li id="clickme" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="col-md-12" id="myDIV">
                <div><span id="Nospankey" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                <div><span id="subNospan" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Item No.:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_itemno"></span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Description:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_description"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>

                </div>
                <!-- <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Unit Price.:</span>
                        <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoicelineamt"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i> Line Discount %:</span>
                        <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoicelinedis"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i> Line discount Amount:</span>
                        <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoicelinedisamt"></span>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="form-group">

                    </div>
                </div>
            </div>-->
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Uom:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_uom"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Stock Group:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_stkgup"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Stock Group Name:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="stkgrpnam"></span>
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="form-group">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>แผนก Dep :</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimsec"></span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Product Name</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="prdnam"></span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> Claim Qty.:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimqty"></span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-clock-o"></i>Location</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_location"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>
                </div>
                <div class="row">

                    <div class="col-sm-12">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> สาเหตุการ Claim:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="causeclaim"></span>
                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-sm-6">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> ดำเนินการ:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_proceedto"></span>

                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> สถานะรับของเคลม:</span>
                            <span style="color: blue;text-decoration: underline;font-weight: bold" id="_statusclaim"></span>

                        </div>
                    </div>
                </div>
                <div class="col-xs-6">
                    <div class="form-group">

                    </div>
                </div>
                <div class="col-xs-6">
                    <span class="fa fa-image">Video:</span>
                    <div class="py-4" id="appvideosales">


                    </div>

                </div>
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span class="fa fa-image">Product Image:</span>

                            </div>
                        </div>
                    </div>
                    <div class="row" id="boximage">

                    </div>
                </div>
            </div>



            <div class="card-header">
                <i class="fa fa-table"></i>Technic 1 : วิเคราะห์สินค้า <li id="clickme2" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV2">
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> ช่างที่รับผิดชอบ:</span>
                            <span>
                                @*<input type="text" id="_tecwork" />*@
                                <select class="bar" id="_tecwork" style="border-bottom: 5px solid #b33c0f;"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> จำนวนที่ตรวจสอบจริง:</span>
                            <span>
                                <input type="number" id="_tecrevqty" style="border-bottom: 5px solid #b33c0f;" />

                            </span>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Tech Shelf:</span>
                            <span>


                                <select class="bar" id="_shelfloctec"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> รหัสการผลิต Batch Code:</span>
                            <span>
                                <input type="text" id="_batcod" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> บันทึกโดย:</span>
                            <span>

                                <input type="text" id="_nametec1" disabled="disabled" style="color: blue;" />
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่วิเคราะห์ปัญหา:</span>
                            <span>
                                <input type="date" data-date-format="dd/mm/yy" id="_anlysdatetec1" />
                            </span>
                        </div>
                    </div>
                    
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> ดำเนินการ:</span>
                            <span>
                                <select class="bar" id="_perfromtec1"></select>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <span><textarea rows="6" cols="100" id="remaketec1" placeholder="ผลการตรวจสอบ" style="border-bottom: 5px solid #b33c0f;"></textarea></span>
                        </div>
                    </div>
                   
                </div>
                <div class="row" style="display:none">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่คืนสินค้า:</span>
                            <span>
                                <input type="date" data-date-format="dd/mm/yy" id="_datereturn" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> ผู้รับสินค้า:</span>
                            <span>

                                <input type="text" id="_namereturn" />
                            </span>
                        </div>
                    </div>
                    @*<div class="col-md-4">
                        <div class="form-group">

                            <button class="btn-info" id="_btnsavereturn" style="display: block;">บันทึก</button>
                        </div>
                    </div>*@
                </div>
                <div class="col-xs-6">
                    <div class="py-4" id="appvideo">

                        <div class="card">
                            <div class="card-header bg-danger text-white">
                                <h6 class="text-uppercase"> Upload video </h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="modal-body">

                                        <div class="form-group">

                                            <div class="input-group">
                                                <div class="custom-file">
                                                    <input type="file" id="fileupload" name="fileupload" @*class="custom-file-input"*@ accept="video/*" />
                                                    <label class="custom-file-label"></label>
                                                </div>
                                                <div class="input-group-append">
                                                    <input type="submit" id="btnUpload" class="btn btn-secondary" value="Upload" style="display:none" />
                                                </div>
                                            </div>
                                        </div>

                                    </div>


                                </div>
                                <div class="row">
                                    @*@foreach (var item in Model)
                                    {
                                        <div class="col-sm-4 col-md-4 col-xs-12">
                                            <div class="title">@item.Name</div>
                                            <div class="video-frame">
                                                <video style="width:100%; height:auto;" controls>
                                                    <source src="@Url.Content(@item.FilePath)" type="video/mp4" />
                                                </video>
                                            </div>
                                        </div>
                                    }*@
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-xs-6">
                    <h3>Upload images</h3>
                    <form id="uploader">
                        <div class="row">
                            <div class="col-sm-6">

                                <br />            <br />
                                <input id="fileInput" type="file" multiple>
                                <br />            <br />

                                <table class="table" id="FilesList" style="visibility:hidden">
                                    <tr>
                                        <th>
                                            Attachment(s)
                                        </th>
                                        <th>
                                            Action
                                        </th>
                                    </tr>
                                </table>
                                <input type="button" id="btnuploadsales" value="Upload" style="float:right" />

                            </div>
                        </div>
                    </form>
                    @*<input type='file' id="FileUpload1" accept="image/*" /><span id="ststus1" style="color: brown; font-size: larger;"></span>

                    <input type='file' id="FileUpload2" accept="image/*" /><span id="ststus2" style="color: brown; font-size: larger;"></span>
                    <input type="button" id="btnUpload1" value="Upload Files" style="display:none" />
                    <input type="button" id="btnUpload2" value="Upload Files" style="display:none" />*@
                </div>

                <div class="col-xs-6">

                    @*<input type='file' id="FileUpload3" accept="image/*" /><span id="ststus3" style="color: brown; font-size: larger;"></span>
                    <input type='file' id="FileUpload4" accept="image/*" /><span id="ststus4" style="color: brown; font-size: larger;"></span>
                    <input type="button" id="btnUpload3" value="Upload Files" style="display:none" />
                    <input type="button" id="btnUpload4" value="Upload Files" style="display:none" />*@

                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> Image จากการ วิเคราะห์ Technic:</span>
                            <div class="row" id="boximageTech">

                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <button class="btn-info" id="_btnsavecheck">บันทึกผลการวิเคราะห์</button>
                        </div>
                    </div>
                </div>

            </div>
            <div class="card-header">
                <i class="fa fa-table"></i>Technic 2 : ผลการพิจารณา <li id="clickme3" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV3">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class='fa fa-user'></i> รับรองการตรวจสอบโดย:</span>

                                <span>
                                    <input type="text" id="_name2tec" disabled="disabled" style="background: border-box border-box; color: blue;" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> จำนวนรับเคลม:</span>
                                <span>
                                    <input type="number" id="_tecrevqty2" style="border-bottom: 5px solid #b33c0f;" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> จำนวนของเสีย(เคลมSupplierไม่ได้):</span>
                                <span>
                                    <input type="number" id="_tecrevqtybad" style="border-bottom: 5px solid #b33c0f;" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> จำนวนของดี(สินค้าใช้งานได้):</span>
                                <span>
                                    <input type="number" id="_tecrevqtywd" style="border-bottom: 5px solid #b33c0f;" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะ:</span>
                                <span>
                                    <select class="bar" id="_apprvststus" style="border-bottom: 5px solid #b33c0f;"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่เทคนิคพิจารณา:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_appdatetec" />
                                </span>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustec1" style="border-bottom: 5px solid #b33c0f;"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>หลังเสร็จสิ้นกระบวนการเคลม:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotec1" style="border-bottom: 5px solid #b33c0f;"></select>
                                </span>
                            </div>
                        </div>
                        <div id="displ" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย:</span>
                                <span>
                                    @*<input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />*@
                                    <input type="text" id="_scrapdatetec1" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <span><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />
                    <div class="row">

                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="a">Specific<br>
                                    <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="c">Good Will<br>

                                </form>

                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="b">Manufacturing Defect<br>
                                    <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="d">Wrong Using<br>

                                </form>

                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="e">Handing Damage<br>
                                    <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="f">Other<br>

                                </form>

                            </div>
                        </div>
                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                    </div>
                    <div class="row">

                        <div class="col-md-6">
                            <div class="form-group">

                                <span><textarea rows="6" cols="100" id="remaketec2" placeholder="หมายเหตุ"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <button class="btn-info" id="_btnsaveconsider">บันทึกผลการพิจารณา</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-header">
                <i class="fa fa-table"></i>Product Manager Approval <li id="clickme4" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="col-md-12" id="myDIV4">

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>จำนวนที่รับเคลม</span>
                            <span>

                                <input type="number" id="_pmqty" />
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์:</span>
                            <span>
                                <select class="bar" id="_anlysstatustecpm"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม:</span>
                            <span>
                                <select class="bar" id="_anlysafterprotecpm"></select>
                            </span>
                        </div>
                    </div>
                    <div id="displpm" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย:</span>
                            <span>
                                @*<input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />*@
                                <input type="text" id="_scrapdatetecpm" />
                            </span>
                        </div>
                    </div>
                </div>
                @*<span><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />*@
                <div class="row">

                    <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                    <div class="col-md-2" style="display:none">
                        <div class="form-group">
                            <form>
                                <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="apm">Specific<br>
                                <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="cpm">Good Will<br>
                            </form>
                        </div>
                    </div>
                    <div class="col-md-2" style="display:none">
                        <div class="form-group">
                            <form>
                                <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="bpm">Manufacturing Defect<br>
                                <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="dpm">Wrong Using<br>

                            </form>

                        </div>
                    </div>

                    <div class="col-md-2" style="display:none">
                        <div class="form-group">
                            <form>
                                <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="epm">Handing Damage<br>
                                <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="fpm">Other<br>

                            </form>

                        </div>
                    </div>
                    <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-user"></i> Product Manager: </span>
                            <span>
                                <select class="bar" id="_PM"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่PM พิจารณา:</span>
                            <span>
                                <input type="date" data-date-format="dd/mm/yy" id="_pmdate" />
                            </span>
                        </div>
                    </div>
                </div>


                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-sort-down"></i>........</span>
                            <span>
                                <select class="bar" id="_pmtstus"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i> เปลี่ยนสินค้าเบอร์ใหม่ทดแทน P/N :</span>
                            <span>
                                <input type="text" id="_pmnewpn" />
                            </span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <span><textarea rows="6" cols="100" id="remakepm" placeholder="หมายเหตุ"></textarea></span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">

                            <button class="btn-info" id="_btnsaveapprove" style="display:none">บันทึกการอนุมัติ</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-header">
                <i class="fa fa-table"></i>Admin Tech1 ตรวจสอบรับสินค้าเคลม: <li id="clickme1" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV1">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการรับสินค้า:</span>
                                <span>
                                    <select class="bar" id="_proceedtotec" style="border-bottom: 5px solid #b33c0f;"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ผู้รับสินค้าเคลม:</span>
                                <span>
                                    <select class="bar" id="_rcvbyte" style="border-bottom: 5px solid #b33c0f;"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่รับสินค้าเคลม:</span>
                                <span>

                                    <input type="date" id="_rcvdatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Claim date:</span>
                                <span>
                                    <input type="text" id="_clmdatetec" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> จำนวนที่รับเข้า K08:</span>
                                <span>

                                    <input type="text" id="_rvqtytec" style="border-bottom: 5px solid #b33c0f;" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Location วางสินค้า:</span>
                                <span>

                                    <select id="_locationadmin" style="border-bottom: 5px solid #b33c0f;"></select>
                                </span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Due date:</span>
                                <span>
                                    <input type="text" id="_duedatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Doc transfer No.:</span>
                                <span>
                                    <input type="text" id="_docnoterfer" style="border-bottom: 5px solid #b33c0f;" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <span><textarea rows="6" cols="100" id="causeclaimtec" placeholder="หมายเหตุ รับสินค้า"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> Admin:</span>
                                <span>
                                    <input type="text" id="_admintec" style="background: border-box border-box; color: blue;" disabled="disabled">
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                @*<span> <i class="fa fa-calendar"></i> วันที่ตรวจสอบ:</span>
                                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_datechecktec" />
                                </span>*@
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <button type="button" style="float: left; display: block;" id="_btnsavete1" class="badge-primary"> บันทึกรับสินค้า</button>
                            </div>
                        </div>
                    </div>
                    @*<div class="row">


                        <div class="col-md-3">
                            <div class="form-group">
                                <button class="btn-info" id="_btnsavete1">บัททึกการตรวจสอบ</button>
                            </div>
                        </div>


                    </div>*@
                </div>
            </div>
            <div class="card-header">
                <i class="fa fa-table"></i> Admin Tech1 : <li id="clickme1" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
            </div>
            <div class="card-body" id="myDIV1">
                <div class="col-md-12">
                     <div class="row">
                         <div class="col-md-6">
                             <div class="form-group">

                                 <span><textarea rows="6" cols="100" id="updateremaketec1" placeholder="comment"></textarea></span>
                             </div>
                             <button class="btn-info" id="_btnupdateremaketec1">บันทึก</button>
                         </div>
                     </div>
                </div>
            </div>
           </div>
         </div>
                <!-- The Modal -->
                <!-- The Modal -->
                <div id="myModalzoom" class="modalx" style="z-index: 11;">

                    <!-- The Close Button -->
                    @*<span class="close">&times;</span>*@

                    <!-- Modal Content (The Image) -->
                    <img class="modal-contentx" id="img01">
                    <div class="modal-contentx" id="img01" style="background-color: #191919;"><button class="btn btn-secondary" type="button" data-dismiss="modal" id="closeimg" style="margin-left: 91%;">Close</button></div>
                    <!-- Modal Caption (Image Text) -->
                    <div id="caption"></div>

                </div>
                <input type="text" hidden id="_hqty" />
                <input type="text" hidden id="_cmnosub" />
                <input type="hidden" id="_uderlogin" value="@user" />
                <input type="hidden" id="_udertype" value="@usertype" />
                <input type="hidden" id="_subnoclaim" />
                <input type="hidden" id="_admin" />
                <input type="hidden" id="_t1" />
                <input type="hidden" id="_t2" />
                <input type="hidden" id="_t3" />
                <!-- Modal -->
                <!-- Modal -->
                <div class="modal fade" id="myModalWarning" role="dialog">
                    <div class="modal-dialog">

                        <!-- Modal content-->
                        <div class="modal-content " id="ColorboxError">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title" style="color:black;">Message Error</h4>
                            </div>
                            <div class="modal-body">
                                <div id="textAlertWarning">Some text in the modal.</div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- EndModal -->
                <script type="text/javascript">

                    $("#_pmnewpn").autocomplete({
                        selectFirst: true,
                        autoFocus: true,
                        timeout: 100000,
                        source: function (request, response) {
                            var param = {
                                Name: $('#_pmnewpn').val(),
                                XvalCompany: $('#_company').val()
                            };
                            $.ajax({
                                url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                                data: JSON.stringify(param),
                                dataType: "json",
                                type: "POST",
                                contentType: "application/json; charset=utf-8",
                                dataFilter: function (data) { return data; },
                                success: function (data) {
                                    response($.map(data.slice(0, 20), function (item) {
                                        return {
                                            value: item
                                        }
                                    }))
                                },
                                error: function (XMLhttpsRequest, textStatus, errorThrown) {
                                    alert(textStatus);
                                }
                            });


                        },

                        minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
                    });
                    $(document).ready(function () {
                        function addCommas(nStr) {
                            nStr += '';
                            x = nStr.split('.');
                            x1 = x[0];
                            x2 = x.length > 1 ? '.' + x[1] : '';
                            var rgx = /(\d+)(\d{3})/;
                            while (rgx.test(x1)) {
                                x1 = x1.replace(rgx, '$1' + ',' + '$2');
                            }
                            return x1 + x2;
                        }
                        function addDays(theDate, days) {
                            return new Date(theDate.getTime() + days * 24 * 60 * 60 * 1000);
                        }
                        var newDate = addDays(new Date(), 15);
                        $("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
                        $("#_duedatetec").attr("disabled", "disabled");
                        $("#_clmdatetec").attr("disabled", "disabled");
                        $("#_clmdatetec").css({ "background": "border-box", "color": "blue" });
                        $("#_duedatetec").css({ "background": "border-box", "color": "blue" });
                        var udertype = $("#_udertype").val();
                        var Userlogin = $("#_uderlogin").val();
                        if (udertype == "1") {
                            $.ajax({
                                url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                                data: {
                                    Usertype: udertype,
                                    Userlogin: Userlogin
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data)
                                    $("#tile").text(data.Getdata[0].val.Status)
                                    $("#tile1").text(data.Getdata[2].val.Status)
                                    $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                                    $("#counttec1").html("TAC: " + data.Getdata[2].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[3].val.CountAdmin);
                                }
                            });
                        } else if (udertype == "2") {
                            $.ajax({
                                url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                                data: {
                                    Usertype: udertype,
                                    Userlogin: Userlogin
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data)
                                    $("#tile").text(data.Getdata[0].val.Status)
                                    $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                                    //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                                    $("#counttec1").css("display", "none");
                                }
                            });
                        }
                        var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                        // var fixedTable4 = fixTable(document.getElementById('fixed-table-container-4'));
                        n = new Date();
                        y = n.getFullYear();
                        m = n.getMonth() + 1;
                        d = n.getDate();
                        if (d < 10) {
                            d = "0" + d;
                        }
                        if (m < 10) {
                            m = "0" + m;
                        }
                        $("#_clmdatetec").val(d + "/" + m + "/" + y);
                        ///fa fa-calendar///
                        var today = new Date();
                        $('#_rcvdatetec').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                        $('#_anlysdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                        //$('#_scrapdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                        $('#_appdatetec').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                        $('#_pmdate').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                        // getdate()
                        $('#Sccreateclaim').css("background-color", "");
                        $('#ScrProcess_Sc').css("background-color", "rgb(9, 183, 9)");
                        $('#SrcCheckstatus_Sc').css("background-color", "");
                        $('#SrcInvoiceHistory_Sc').css("background-color", "");
                        function getdate() {
                            var tt = document.getElementById('_clmdatetec').value;

                            var date = new Date(tt);
                            var newdate = new Date(date);

                            newdate.setDate(newdate.getDate() + 15);

                            var dd = newdate.getDate();
                            var mm = newdate.getMonth() + 1;
                            var y = newdate.getFullYear();

                            var someFormattedDate = d + '/' + m + '/' + y;
                            document.getElementById('_duedatetec').value = someFormattedDate;
                        }

                        CheckUsrClmStaff()
                        function CheckUsrClmStaff() {
                            var userlog = $("#_uderlogin").val();
                            $.ajax({
                                url: '@Url.Action("CheckUsrClmStaff", "GetdataCenter")',
                                data: {
                                    Name: userlog
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {

                                    $("#_udertype").val(data.UsrClmStaff);

                                    var type = $("#_udertype").val();

                                    if (type == "3") {
                                        // alert("vvvv"+type)


                                        var UserId = $("#_uderlogin").val();
                                        $.ajax({
                                            url: '@Url.Action("GetProductdata", "GetdataCenter")',
                                            data: {
                                                // UserId: UserId
                                                UserId: "surachet.ake"
                                            },
                                            type: "POST",
                                            dataType: "JSON",
                                            success: function (data) {
                                                console.log(data)
                                                var select = $("#_PM");
                                                select.children().remove();

                                                $(data).each(function (index, item) {

                                                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                                                });

                                            }
                                        });
                                    }
                                    //alert(data.UsrClmStaff);
                                    if (data.UsrClmStaff == "1") {
                                        $("#_admintec").val(userlog);
                                        $("#_nametec1").val(userlog);
                                        $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                                        $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                                        $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                                        $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                                        $("#_btnsaveconsider").attr("disabled", "disabled");

                                        $("#_PM").attr("disabled", "disabled");  // Product Manager
                                        $("#_pmdate").attr("disabled", "disabled"); //วันที่PM พิจารณา
                                        $("#_pmtstus").attr("disabled", "disabled"); //สถานะอนุมัติ
                                        $("#remakepm").attr("disabled", "disabled");
                                        $("#_pmnewpn").attr("disabled", "disabled");

                                        $("#_btnsaveapprove").attr("disabled", "disabled");
                                        $("#_btnsavecheck").removeAttr('disabled');
                                        $("#_btnsavete1").removeAttr('disabled');
                                        $("#_btnsaveconsider").css("display", "none");
                                        $("#_btnsavecheck").css("display", "block");
                                        $("#_btnsavete1").css("display", "block");
                                    } else if (data.UsrClmStaff == "2") {

                                        $("#_name2tec").val(userlog);
                                        $("#_btnsaveconsider").css("display", "block");
                                        // $("#_btnsavecheck").css("display", "none");
                                        $("#_btnsavete1").css("display", "none");
                                        //$("#_name2tec").removeAttr('disabled'); //รับรองการตรวจสอบโดย
                                        $("#_appdatetec").removeAttr('disabled');  //วันที่เทคนิคพิจารณา
                                        $("#_apprvststus").removeAttr('disabled'); // สถานะ
                                        $("#remaketec2").removeAttr('disabled');   //หมายเหตุ
                                        $("#_btnsaveconsider").removeAttr('disabled');

                                        $("#_PM").attr("disabled", "disabled");  // Product Manager
                                        $("#_pmdate").attr("disabled", "disabled"); //วันที่PM พิจารณา
                                        $("#_pmtstus").attr("disabled", "disabled"); //สถานะอนุมัติ
                                        $("#remakepm").attr("disabled", "disabled");
                                        $("#_pmnewpn").attr("disabled", "disabled");

                                        $("#_btnsavete1").attr("disabled", "disabled");
                                        $("#_btnsaveapprove").attr("disabled", "disabled");


                                        //ข้อมูลเคลมสำหรับรุ่นรถ//
                                        //$("#_vemac").attr("disabled", "disabled");
                                        //$("#_moty").attr("disabled", "disabled");
                                        //$("#_modyear").attr("disabled", "disabled");
                                        //$("#_encod").attr("disabled", "disabled");
                                        //$("#_chno").attr("disabled", "disabled");
                                        //$("#_pump").attr("disabled", "disabled");
                                        //$("#_typpro").attr("disabled", "disabled");
                                        //$("#_warcarno").attr("disabled", "disabled");
                                        //$("#_milage").attr("disabled", "disabled");
                                        //$("#_datofdam").attr("disabled", "disabled");
                                        //$("#_workdacar").attr("disabled", "disabled");
                                        //$("#_workmonth").attr("disabled", "disabled");
                                        //$("#_workday").attr("disabled", "disabled");
                                        //$("#_worktime").attr("disabled", "disabled");
                                        //$("#_batcod").attr("disabled", "disabled");

                                        ///ตรวจสอบรับสินค้าเคลม////
                                        // $("#_btnsavecheck").attr("disabled", "disabled");
                                        $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                                        $("#_rcvbyte").attr("disabled", "disabled");    //ผู้รับสินค้าเคลม
                                        $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                                        $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                                        // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                                        $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                                        $("#_duedatetec").attr("disabled", "disabled"); //Due date
                                        $("#_admintec").attr("disabled", "disabled");//Admin:
                                        //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ


                                        $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                                        ///Technic 1 : วิเคราะห์สินค้าเคลม///
                                        //$("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                                        //$("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                                        //$("#_nametec1").attr("disabled", "disabled");//บันทึกโดย
                                        //$("#_anlysdatetec1").attr("disabled", "disabled");    //วันที่วิเคราะห์ปัญหา
                                        //$("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                                        //$("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                                        //$("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                                        //$("# _scrapdatetec1").attr("disabled", "disabled");//วันที่ทำลาย:
                                        //$("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ

                                    }
                                    else if (data.UsrClmStaff == "3") {

                                        //alert(data.UsrClmStaff)

                                        //ข้อมูลเคลมสำหรับรุ่นรถ//
                                        $("#_vemac").attr("disabled", "disabled");
                                        $("#_moty").attr("disabled", "disabled");
                                        $("#_modyear").attr("disabled", "disabled");
                                        $("#_encod").attr("disabled", "disabled");
                                        $("#_chno").attr("disabled", "disabled");
                                        $("#_pump").attr("disabled", "disabled");
                                        $("#_typpro").attr("disabled", "disabled");
                                        $("#_warcarno").attr("disabled", "disabled");
                                        $("#_milage").attr("disabled", "disabled");
                                        $("#_datofdam").attr("disabled", "disabled");
                                        $("#_workdacar").attr("disabled", "disabled");
                                        $("#_workmonth").attr("disabled", "disabled");
                                        $("#_workday").attr("disabled", "disabled");
                                        $("#_worktime").attr("disabled", "disabled");
                                        $("#_batcod").attr("disabled", "disabled");

                                        ///ตรวจสอบรับสินค้าเคลม////
                                        $("#_btnsavecheck").attr("disabled", "disabled");
                                        $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                                        $("#_rcvbyte").attr("disabled", "disabled");    //ผู้รับสินค้าเคลม
                                        $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                                        $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                                        // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                                        $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                                        $("#_duedatetec").attr("disabled", "disabled"); //Due date
                                        $("#_admintec").attr("disabled", "disabled");//Admin:
                                        //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                                        $("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                                        $("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                                        $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                                        ///Technic 1 : วิเคราะห์สินค้าเคลม///

                                        $("#_nametec1").attr("disabled", "disabled");//บันทึกโดย
                                        $("#_anlysdatetec1").attr("disabled", "disabled");    //วันที่วิเคราะห์ปัญหา
                                        $("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                                        $("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                                        $("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                                        $("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ
                                        $("#_btnsavecheck").attr("disabled", "disabled");
                                        ///Technic 2 : ผลการพิจารณา///
                                        $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                                        $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                                        $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                                        $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                                        $("#_btnsaveconsider").attr("disabled", "disabled");


                                        $("#_PM").removeAttr('disabled');  // Product Manager
                                        $("#_pmdate").removeAttr('disabled'); //วันที่PM พิจารณา
                                        $("#_pmtstus").removeAttr('disabled'); //สถานะอนุมัติ
                                        $("#remakepm").removeAttr('disabled');
                                        $("#_pmnewpn").removeAttr('disabled');

                                        $("#_btnsaveapprove").removeAttr('disabled');

                                    }
                                }
                            });

                        }
                        $('#a').attr("disabled", "disabled");
                        $('#b').attr("disabled", "disabled");
                        $('#c').attr("disabled", "disabled");
                        $('#d').attr("disabled", "disabled");
                        $('#e').attr("disabled", "disabled");
                        $('#a').click(function () {

                            if ($(this).prop("checked") == true) {
                                $('#b').attr("disabled", "disabled");
                                $('#c').attr("disabled", "disabled");
                                $('#d').attr("disabled", "disabled");
                                $('#e').attr("disabled", "disabled");
                                $('#f').attr("disabled", "disabled");
                            }
                            else if ($(this).prop("checked") == false) {
                                $('#b').removeAttr('disabled');
                                $('#c').removeAttr('disabled');
                                $('#d').removeAttr('disabled');
                                $('#e').removeAttr('disabled');
                                $('#f').removeAttr('disabled');
                            }

                        });
                        $('#b').click(function () {

                            if ($(this).prop("checked") == true) {
                                $('#a').attr("disabled", "disabled");
                                $('#c').attr("disabled", "disabled");
                                $('#d').attr("disabled", "disabled");
                                $('#e').attr("disabled", "disabled");
                                $('#f').attr("disabled", "disabled");
                            }
                            else if ($(this).prop("checked") == false) {
                                $('#a').removeAttr('disabled');
                                $('#c').removeAttr('disabled');
                                $('#d').removeAttr('disabled');
                                $('#e').removeAttr('disabled');
                                $('#f').removeAttr('disabled');
                            }
                        });
                        $('#c').click(function () {


                            if ($(this).prop("checked") == true) {
                                $('#a').attr("disabled", "disabled");
                                $('#b').attr("disabled", "disabled");
                                $('#d').attr("disabled", "disabled");
                                $('#e').attr("disabled", "disabled");
                                $('#f').attr("disabled", "disabled");
                            }
                            else if ($(this).prop("checked") == false) {
                                $('#a').removeAttr('disabled');
                                $('#b').removeAttr('disabled');
                                $('#d').removeAttr('disabled');
                                $('#e').removeAttr('disabled');
                                $('#f').removeAttr('disabled');
                            }
                        });
                        $('#d').click(function () {

                            if ($(this).prop("checked") == true) {
                                $('#a').attr("disabled", "disabled");
                                $('#b').attr("disabled", "disabled");
                                $('#c').attr("disabled", "disabled");
                                $('#e').attr("disabled", "disabled");
                                $('#f').attr("disabled", "disabled");

                            }
                            else if ($(this).prop("checked") == false) {
                                $('#a').removeAttr('disabled');
                                $('#b').removeAttr('disabled');
                                $('#c').removeAttr('disabled');
                                $('#e').removeAttr('disabled');
                                $('#f').removeAttr('disabled');

                            }
                        });
                        $('#e').click(function () {

                            if ($(this).prop("checked") == true) {
                                $('#a').attr("disabled", "disabled");
                                $('#b').attr("disabled", "disabled");
                                $('#c').attr("disabled", "disabled");
                                $('#d').attr("disabled", "disabled");
                                $('#f').attr("disabled", "disabled");

                            }
                            else if ($(this).prop("checked") == false) {
                                $('#a').removeAttr('disabled');
                                $('#b').removeAttr('disabled');
                                $('#c').removeAttr('disabled');
                                $('#d').removeAttr('disabled');
                                $('#f').removeAttr('disabled');

                            }
                        });
                        $('#f').click(function () {


                            if ($(this).prop("checked") == true) {
                                $('#a').attr("disabled", "disabled");
                                $('#b').attr("disabled", "disabled");
                                $('#c').attr("disabled", "disabled");
                                $('#d').attr("disabled", "disabled");
                                $('#e').attr("disabled", "disabled");
                            }
                            else if ($(this).prop("checked") == false) {
                                $('#a').removeAttr('disabled');
                                $('#b').removeAttr('disabled');
                                $('#c').removeAttr('disabled');
                                $('#d').removeAttr('disabled');
                                $('#e').removeAttr('disabled');
                            }
                        });
                        $('#_tecwork').change(function () {

                            var _valtec = $(this).val();
                            //alert(_valtec)
                            $.ajax({
                                url: '@Url.Action("GetTechLocation", "GetdataCenter")',
                                data: {
                                    Name: _valtec
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    var select = $("#_shelfloctec");
                                    select.children().remove();
                                    select.append($("<option>").val("WHC").text("WHC"));
                                    $(data).each(function (index, item) {
                                        select.append($("<option>").val(item.Location).text(item.Location));
                                    });



                                }
                            });
                        });
                        //alert(_valtec)

                        function splitval(_val) {
                            var _splito = "";
                            _splito = _val.split('|');

                            return _splito[0];
                        }

                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 1
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                var select = $("#_perfromtec1");
                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {
                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });
                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 34
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                var select = $("#_proceedtotec");
                                select.children().remove();
                                select.append($("<option>").val("0").text("สถานะรับของเคลม"));
                                $(data).each(function (index, item) {
                                    if (item.CODE == "1" || item.CODE == "2" || item.CODE == "3") {
                                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                    }
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });
                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 32
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {

                                var select = $("#_anlysstatustec1");
                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {
                                    if (item.CODE == "0" || item.CODE == "1" || item.CODE == "4") {
                                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                    }
                                });
                                var select = $("#_anlysstatustecpm");
                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {
                                    if (item.CODE == "0" || item.CODE == "1" || item.CODE == "4") {
                                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                    }
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();

                            }
                        });

                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 33
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_anlysafterprotec1");

                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {

                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                var select = $("#_anlysafterprotecpm");

                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {

                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });

                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 5
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {

                                var select = $("#_pmtstus");
                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {

                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });
                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 9
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {

                                var select = $("#_apprvststus");
                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {

                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });
                        //Technician//
                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 12
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                var select = $("#_tecwork");
                                select.children().remove();
                                select.append($("<option>").val("0").text("เลือก ช่างที่รับผิดชอบ"));
                                $(data).each(function (index, item) {
                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });
                        $.ajax({
                            url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                            data: {
                                Name: 2
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                var select = $("#_proceedtotec");
                                select.children().remove();
                                // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                                $(data).each(function (index, item) {
                                    select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                });
                                //  var CUSCODt = $("#CUSCOD option:selected").text();
                            }
                        });
                        $.ajax({
                            url: '@Url.Action("GetdataNVAttribute", "GetdataCenter")',

                            data: {

                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_vemac");
                                select.children().remove();
                                select.append($("<option>").val("").text("เลือกข้อมูลสำหรับรถ"));
                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.Description).text(item.Description));
                                });

                            }
                        });
                        $.ajax({
                            url: '@Url.Action("GetProductall", "GetdataCenter")',
                            data: {

                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_PM");
                                select.children().remove();

                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                                });

                                var valpm = $("#_PM").val();

                            }
                        });
                        $.ajax({
                            url: '@Url.Action("CheckUsrClmStaffTechnical", "GetdataCenter")',
                            data: {
                                Name: "Technical"
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_rcvbyte");
                                select.children().remove();
                                select.append($("<option>").val("0").text("เลือกผู้รับสินค้าเคลม"));
                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.PROD).text(item.PROD));
                                });

                            }
                        });

                        $("#clickmeheader").on("click", function (e) {

                            myFunctionheader();
                        });
                        function myFunctionheader() {
                            var x = document.getElementById("myDIVheader");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#clickme").on("click", function (e) {

                            myFunction();
                        });
                        function myFunction() {
                            var x = document.getElementById("myDIV");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#clickme1").on("click", function (e) {

                            myFunction1();
                        });
                        function myFunction1() {
                            var x = document.getElementById("myDIV1");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#clickme2").on("click", function (e) {

                            myFunction2();
                        });
                        function myFunction2() {
                            var x = document.getElementById("myDIV2");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#clickme3").on("click", function (e) {

                            myFunction3();
                        });
                        function myFunction3() {
                            var x = document.getElementById("myDIV3");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#clickme4").on("click", function (e) {

                            myFunction4();
                        });
                        function myFunction4() {
                            var x = document.getElementById("myDIV4");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#clickme5").on("click", function (e) {

                            myFunction5();
                        });
                        function myFunction5() {
                            var x = document.getElementById("myDIV5");
                            if (x.style.display === "none") {
                                x.style.display = "block";
                            } else {
                                x.style.display = "none";
                            }
                        }
                        $("#searchclaimno").on("keyup", function (e) {
                            var claimnokey = $(this).val();
                            //  var claimsubno = $("#_subnoclaim").val();
                            if (e.keyCode == 13) {
                                GetClimtemp(claimnokey)
                                // GetClimtemp(claimnokey, claimsubno)
                            }
                        });
                        // $("#searchclaimno").attr("disabled", "disabled");
                        function clearval() {
                            $("#Nospankey").text("");
                            $("#subNospan").text("");
                            $("#_vemac").val("");
                            $("#_moty").val("");
                            $("#_modyear").val("");
                            $("#_encod").val("");
                            $("#_chno").val("");
                            $("#_pump").val("");
                            $("#_typpro").val("");
                            $("#_warcarno").val("");
                            $("#_milage").val("");
                            $("#_datofdam").val("");

                            $("#_workdacar").val("");
                            $("#_workmonth").val("");
                            $("#_workday").val("");
                            $("#_worktime").val("");
                            $("#_batcod").val("");

                            $("#_itemno").text("");
                            $("#_description").text("");
                            $("#_uom").text("");
                            $("#_invoiceno").text("");
                            $("#_psdate").text("");
                            $("#_invoiceqty").text("");
                            $("#foc").text("");
                            $("#_invoicelineamt").text("");
                            $("#_invoicelinedis").text("");
                            $("#_invoicelinedisamt").text("");;
                            $("#_lineamtsum").text("");

                            $("#_stkgup").text("");
                            $("#prdnam").text("");
                            $("#stkgrpnam").text("");

                            $("#_claimsec").text("");
                            ////Get input display ///////
                            $("#_claimqty").text("");//Qty//
                            $("#_workda").text("");//ระยะใช้งาน//
                            $("#causeclaim").text("");//เหตุผลเคลม//
                            $("#_proceedto").text("");//ดำเนินการ//
                            $("#_statusclaim").text(""); //Status///
                            $("#_claimnosub").text("");
                            $("#_proceedtotec").val("");  ///สถานะการรับสินค้า

                            $("#_perfromtec1").val("");  ///ดำเนินการ:

                            var today = new Date();
                            var _cktype = $("#_udertype").val();
                            var _ckuser = $("#_uderlogin").val();
                            $("#_proceedtotec").val("0");  ///สถานะการรับสินค้า
                            $("#_rcvbyte").val("0");      //ผู้รับสินค้าเคลม

                            $("#_rcvdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));//วันที่รับสินค้าเคลม:
                            $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
                            //$("#_rcuom").val(data.Getdata[0].val.Uom);//UOM
                            $("#_clmdatetec").val(('0' + today.getDate()).slice(-2) + '/' + ('0' + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear());//Claim date:
                            var newDate = addDays(new Date(), 15);

                            $("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
                            $("#causeclaimtec").val("");//หมายเหตุการรับเคลม



                            if (_cktype != "1") { /// User not Admin and Trcchic1
                                 //alert("ยังไม่ได้วิเคราะห์สินค้าเคลม");
                                var newDate = addDays(new Date(), 15);
                                $("#_btnsavecheck").attr("disabled", "disabled");
                                $("#_btnsaveconsider").attr("disabled", "disabled");
                                $("#_btnsaveapprove").attr("disabled", "disabled");
                                $("#_btnprintfro").attr("disabled", "disabled"); //บันทึกรับสินค้า & พิมพ์แบบฟอร์มสำหรับช่างตรวจสอบ
                                $("#_btnsavete1").attr("disabled", "disabled"); //บัททึกการตรวจสอบ

                                $("#_proceedtotec").val("0");  ///สถานะการรับสินค้า
                                $("#_rcvbyte").val("0");      //ผู้รับสินค้าเคลม

                                $("#_rcvdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));//วันที่รับสินค้าเคลม:
                                $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
                                //$("#_rcuom").val(data.Getdata[0].val.Uom);//UOM
                                $("#_clmdatetec").val(('0' + today.getDate()).slice(-2) + '/' + ('0' + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear());//Claim date:

                                $("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
                                $("#_admintec").val("");//Admin:
                                // $("#_datechecktec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)); //วันที่ตรวจสอบ
                                $("#_shelfloctec").val("0");//Shelf Location
                                $("#_tecwork").val("0");//ช่างที่รับผิดชอบ:
                                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                                //tap วิเคราะห์//
                                $("#_scrapdatetec1").val("");
                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                $("#_anlysdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา
                                $("#_perfromtec1").val("0"); //ดำเนินการ
                                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                // $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                $("#displ").css("display", "none");
                                $("#remaketec1").val("");
                                // } else {
                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                // $("#_btnprintfro").removeAttr('disabled'); //บันทึกรับสินค้า & พิมพ์แบบฟอร์มสำหรับช่างตรวจสอบ
                                $("#_btnsavete1").removeAttr('disabled'); //บัททึกการตรวจสอบ
                                $("#_btnsavecheck").removeAttr('disabled');
                                // }

                                //  if (_cktype == "2") {

                                $("#_btnsaveconsider").removeAttr('disabled');
                                $("#_name2tec").val(_ckuser); //รับรองการตรวจสอบโดย
                                $("#_appdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่เทคนิคพิจารณา
                                $("#_apprvststus").val("0"); // สถานะ
                                $("#remaketec2").val("");   //หมายเหตุ
                            } else {
                                //tap วิเคราะห์//
                                $("#_shelfloctec").val("0");//Shelf Location
                                $("#_tecwork").val("0");//ช่างที่รับผิดชอบ:
                                $("#_scrapdatetec1").val("");
                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                $("#_anlysdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา
                                $("#_perfromtec1").val("0"); //ดำเนินการ
                                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                // $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                $("#displ").css("display", "none");
                                $("#remaketec1").val("");
                                // } else {
                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                // $("#_btnprintfro").removeAttr('disabled'); //บันทึกรับสินค้า & พิมพ์แบบฟอร์มสำหรับช่างตรวจสอบ
                                $("#_btnsavete1").removeAttr('disabled'); //บัททึกการตรวจสอบ
                                $("#_btnsavecheck").removeAttr('disabled');
                                $("#_btnsavete1").css("display", "block");
                                $("#_btnsavecheck").css("display", "block");
                                $("#_btnsavete1").removeAttr('disabled');
                                $("#_btnsavecheck").removeAttr('disabled');

                                // $("#_btnsavecheck").removeAttr('disabled');
                                $("#_btnsaveconsider").attr("disabled", "disabled");
                                $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                                $("#_appdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่เทคนิคพิจารณา
                                $("#_apprvststus").val("0"); // สถานะ
                                $("#remaketec2").val("");   //หมายเหตุ
                                // }

                                //  if (_cktype == "3") {
                                //$("#_PM").val(_ckuser);  // Product Manager
                                $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)); //วันที่PM พิจารณา
                                $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                $("#remakepm").val("");
                                $("#_pmnewpn").val("");

                                $("#_btnsaveapprove").removeAttr('disabled');
                                // } else {
                                //$("#_PM").val("");  // Product Manager
                                $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)); //วันที่PM พิจารณา
                                $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                $("#remakepm").val("");
                                $("#_pmnewpn").val("");
                                $("#_btnsaveapprove").attr("disabled", "disabled");
                            }
                            $("#_PM").val("");
                        }
                        function clearimage() {
                            // alert("xxxx");
                            var control = $("#fileupload");
                            control.replaceWith(control.val('').clone(true));
                            control.on({
                                change: function () { console.log("Changed") },
                                focus: function () { console.log("Focus") }
                            });
                            var control = $("#FileUpload1");
                            control.replaceWith(control.val('').clone(true));
                            control.on({
                                change: function () { console.log("Changed") },
                                focus: function () { console.log("Focus") }
                            });
                            var control = $("#FileUpload2");
                            control.replaceWith(control.val('').clone(true));
                            control.on({
                                change: function () { console.log("Changed") },
                                focus: function () { console.log("Focus") }
                            });
                            var control = $("#FileUpload3");
                            control.replaceWith(control.val('').clone(true));
                            control.on({
                                change: function () { console.log("Changed") },
                                focus: function () { console.log("Focus") }
                            });
                            var control = $("#FileUpload4");
                            control.replaceWith(control.val('').clone(true));
                            control.on({
                                change: function () { console.log("Changed") },
                                focus: function () { console.log("Focus") }
                            });
                            $(".pip").remove();
                            $(".pip1").remove();
                            $(".pip2").remove();
                            $(".pip3").remove();
                            $(".pip4").remove();
                            $("#ststus").text("");
                            $("#ststus1").text("");
                            $("#ststus2").text("");
                            $("#ststus3").text("");
                            $("#ststus4").text("");
                        }
                        $("#_btnsearchclaimno").on("click", function (e) {
                            $('#boximage').html("");
                            $('#boximageTech').html("");
                            $('#appvideosales').html("");

                            clearval()
                            clearimage()
                            var claimnokey = $("#searchclaimno").val();
                            //var claimsubno = $("#_subnoclaim").val();
                            GetClimtemp(claimnokey)

                        });
                        var valno = $("#searchclaimno").val();
                        // var valsubno = $("#_subnoclaim").val();
                        if (valno != "") {
                            //alert(valno)
                            $("#_btnsearchclaimno").click();
                            //GetClimtemp(valno)
                        }
                        $("#_rvqtytec").on("keyup", function () {

                            var ids = $(this).val();
                            // console.log(ids);


                            $(this).keyup(function (event) {
                                if (event.which >= 37 && event.which <= 40) {
                                    event.preventDefault();
                                }
                                $(this).val(function (index, value) {
                                    return value
                                                    .replace(/\D/g, "")
                                                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",");

                                });

                            });
                        });
                        $("#_tecrevqty").on("keyup", function () {
                            if (Number($(this).val()) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();

                                $(this).val("");
                                return false;
                            }
                            if (Number($(this).val()) == -0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();
                                $(this).val("");
                                return false;
                            }
                        });
                        $("#_tecrevqty").on("click", function () {
                            if (Number($(this).val()) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();
                                $(this).val("");
                                return false;
                            }
                        });
                        $("#_tecrevqty2").on("keyup", function () {
                            if (Number($(this).val()) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();

                                $(this).val("");
                                return false;
                            }
                            if (Number($(this).val()) == -0) {
                                if ($(this).val() != "") {
                                    $("#textAlertWarning").empty();
                                    $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                    $("#myModalWarning").modal();
                                    $(this).val("");
                                    return false;
                                }
                            }
                        });
                        $("#_tecrevqty2").on("click", function () {
                            if (Number($(this).val()) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();
                                $(this).val("");
                                return false;
                            }
                        });
                        $("#_tecrevqtybad").on("keyup", function () {
                            if (Number($(this).val()) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนของเสีย(ส่งเคลมSupplierไม่ได้) ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();

                                $(this).val("");
                                return false;
                            }
                            if (Number($(this).val()) == -1) {
                                if ($(this).val() != "") {
                                    $("#textAlertWarning").empty();
                                    $("#textAlertWarning").text("จำนวนของเสีย(ส่งเคลมSupplierไม่ได้) ติดลบ กรุณาระบุจำนวนใหม่");
                                    $("#myModalWarning").modal();
                                    $(this).val("");
                                    return false;
                                }
                            }
                        });
                        $("#_tecrevqtybad").on("click", function () {
                            if (Number($(this).val()) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนของเสีย(ส่งเคลมSupplierไม่ได้) ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal();
                                $(this).val("");
                                return false;
                            }
                        });
                        var qty = $("#_tecrevqty2");
                        qty.keyup(function () {
                            var total = isNaN($("#_tecrevqty").val() - parseInt(qty.val())) ? 0 : (parseInt($("#_tecrevqty").val()) - qty.val())

                            if (parseInt(total) >= 0) {
                                $("#_tecrevqtybad").val(total);
                                $("#_tecrevqtywd").val("0")

                            } else {
                                $("#_tecrevqtybad").val("0")
                                $("#_tecrevqtywd").val("0")
                            }

                        });
                        var qty2 = $("#_tecrevqtybad");
                        qty2.keyup(function () {
                            var total = isNaN($("#_tecrevqty").val() - parseInt(qty2.val())) ? 0 : (parseInt($("#_tecrevqty").val()) - (parseInt(qty2.val()) + parseInt($("#_tecrevqty2").val())))

                            if (parseInt(total) >= 0) {
                                $("#_tecrevqtywd").val(total);

                            } else {
                                // $("#_tecrevqtybad").val("0")
                                $("#_tecrevqtywd").val("0")
                            }

                        });
                        function GetClimtemp(claimnokey) {
                            // var valclim = $("#searchclaimno").val();
                            $("#_claimnosub").val("");
                            var valclim = claimnokey;

                            //var valclimsub = subno;
                            $.ajax({
                                url: '@Url.Action("GetClimwhdata", "GetdataCenter")',
                                data: {
                                    inCLM_ID: valclim
                                    //inCLM_SUB: valclimsub
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data);
                                    $('table #_tbclmline tbody:last-child').html("");
                                    $('#_tbclmline tbody:last-child').html("");

                                    if (data.Getdata.length > 0) {
                                        // alert(data.Getdata[0].val.CLM_FOC)
                                        //  $("#_claimno").val(data.Getdata[0].val.CLM_ID);

                                        $("#requestby").text(data.Getdata[0].val.REQ_BY);
                                        $("#requestdep").text(data.Getdata[0].val.REQ_Dep_BY);
                                        $("#requestdate").text(data.Getdata[0].val.REQ_DATE);
                                        // return false;
                                        var SubmithtmlPage = '';
                                        var ADMIN_ANLYS_STATUS = '';
                                        var TECH1_PROCESS_STATUS = '';
                                        var TECH2_PROCESS_STATUS = '';
                                        var TECH2_ANLYS_STATUS = '';
                                        var PM_PROCESS_STATUS = '';
                                        var CLM_STATUS = '';
                                        for (var i = 0; i < data.Getdata.length; i++) {
                                            ADMIN_ANLYS_STATUS = data.Getdata[i].val.ADMIN_ANLYS_STATUS;
                                            TECH1_PROCESS_STATUS = data.Getdata[i].val.TECH1_PROCESS_STATUS;
                                            TECH2_PROCESS_STATUS = data.Getdata[i].val.TECH2_PROCESS_STATUS;
                                            TECH2_ANLYS_STATUS = data.Getdata[i].val.TECH2_ANLYS_STATUS;
                                            PM_PROCESS_STATUS = data.Getdata[i].val.PM_PROCESS_STATUS;
                                            CLM_STATUS = data.Getdata[i].val.CLM_STATUS;
                                            //alert(TECH1_PROCESS_STATUS);
                                            SubmithtmlPage = '<tr   fax="1"  statuclm="' + data.Getdata[i].val.CLM_STATUS + '" tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '">';
                                            SubmithtmlPage += '<td style="color: blue;text-decoration: underline;font-weight: bold;cursor:pointer;" id="xxx" fax="1"   foc="' + data.Getdata[i].val.CLM_FOC + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '">' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                                            // SubmithtmlPage += '<td><button type="reset" id="delclmtemp" style="min-width: 50px;"  clmID="' + data.Getdata[0].val.CLM_ID + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '">X</button></td>';
                                            SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + '/<br/>' + data.Getdata[i].val.STKDES + '</td>';
                                            SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                                            SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_REQ_QTY + '</td>';
                                            SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_DATE + '</td>';
                                            SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_CAUSE + '</td>';
                                            SubmithtmlPage += '<td>' + data.Getdata[i].val.PERFORMDESCRIPTION + '</td>';
                                            // SubmithtmlPage += '<td>xxxxx</td>';

                                            //SubmithtmlPage += '<td>xxxxx</td>';
                                            if (CLM_STATUS != "8") {
                                                SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';

                                                if (TECH1_PROCESS_STATUS == "0") {
                                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจสอบ"></span></td>';
                                                } else if (TECH1_PROCESS_STATUS == "1") {
                                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจสอบเรียบร้อย"></span></td>';
                                                }
                                                if (TECH2_ANLYS_STATUS == "0") {
                                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการพิจารณา"></span></td>';
                                                } else if (TECH2_ANLYS_STATUS == "1") {
                                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="พิจารณาเรียบร้อย"></span></td>';
                                                }
                                                else if (TECH2_ANLYS_STATUS == "2") {
                                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่ผ่านการพิจารณา"></span></td>';
                                                }
                                                else if (TECH2_ANLYS_STATUS == "3") {
                                                    SubmithtmlPage += '<td><span class="fa fa-hourglass-half gi-4x" style="color: blue;" title="รอประสานงานกับsupplier"></span></td>';
                                                }
                                                if (PM_PROCESS_STATUS == "0") {
                                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติ"></span></td>';
                                                } else if (PM_PROCESS_STATUS == "1") {
                                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย"></span></td>';

                                                } else if (PM_PROCESS_STATUS == "2") {
                                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                                }
                                                else if (PM_PROCESS_STATUS == "3") {
                                                    SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ตรวจสอบใหม่"></span></td>';
                                                }
                                                SubmithtmlPage += '<td></td>';
                                                if (ADMIN_ANLYS_STATUS == "0") {
                                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                                } else if (ADMIN_ANLYS_STATUS == "1") {
                                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจรับสินค้าเรียบร้อย"></span></td>';
                                                }
                                            }
                                            else {
                                                SubmithtmlPage += '<td style="color:red;">ยกเลิกการเคลม</td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                            }
                                            SubmithtmlPage += '</tr>';
                                            //$('table #_tbclmline  tbody:last-child').append(SubmithtmlPage);
                                            $('#_tbclmline  tbody:last-child').append(SubmithtmlPage);

                                        }
                                    } else {
                                        $("#textAlertWarning").empty();
                                        $("#textAlertWarning").text("No Data.....");
                                        $("#myModalWarning").modal();

                                    }
                                    var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                                }
                            });
                        }
                        $('#_anlysstatustec1').change(function () {
                            var _val = $(this).val();
                            // alert(_val)
                            if (_val == "2") {
                                $("#a").attr('checked', false);
                                $("#b").attr('checked', false);
                                $("#c").attr('checked', true);
                                $("#d").attr('checked', false);
                                $("#e").attr('checked', false);
                                $("#f").attr('checked', false);
                                $("#c").removeAttr("disabled");
                                $("#f").attr("disabled", "disabled");
                            } else {
                                $("#a").attr('checked', false);
                                $("#b").attr('checked', false);
                                $("#c").attr('checked', false);
                                $("#d").attr('checked', false);
                                $("#e").attr('checked', false);
                                $("#f").attr('checked', true);
                            }
                        });
                        $('#_anlysafterprotec1').change(function () {
                            var _val = $(this).val();
                            if (_val == "1") {
                                $('#displ').css("display", "block");
                                var newDate = addDays(new Date(), 90);
                                $("#_scrapdatetec1").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //วันที่ทำลาย
                                $("#_scrapdatetec1").attr("disabled", "disabled");
                            } else {
                                $('#displ').css("display", "none");
                                $("#_scrapdatetec1").val("");
                                $("#_scrapdatetec1").attr("disabled", "disabled");
                            }
                        });
                        $("table").on("click", "tr #xxx", function () {

                            var statuscancel = $(this).attr('statuclm');
                            if (statuscancel == "8") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("รายการถูกยกเลิกการเคลมกรุณาเลือกรายการใหม่");
                                $("#myModalWarning").modal();
                                return false;
                            }
                            var cusno = $("#_cusno").text();
                            var nokey = $("#searchclaimno").val();
                            $("#_company").attr('disabled', 'disabled');

                            $("#requestby").attr('disabled', 'disabled');
                            $("#requestdate").attr('disabled', 'disabled');

                            var comup = $(this).attr('comup');
                            var clmnoup = $(this).attr('clmnoup');
                            var clmno = $(this).attr('clmno');
                            var itemup = $(this).attr('itemup');
                            var invoicenoeup = $(this).attr('invoicenoeup');
                            var proceedtoup = $(this).attr('proceedtoup');
                            var statusclaimup = $(this).attr('statusclaimup');
                            var worktimeup = $(this).attr('worktimeup');
                            var claimqtyup = $(this).attr('claimqtyup');
                            var causeclaimup = $(this).attr('causeclaimup'); //เหตุผลเคลม//
                            var proceedtoupdes = $(this).attr('perfromdes');
                            var statusclaimupdes = $(this).attr('recstades');
                            var fax = $(this).attr('fax');
                            var foc = $(this).attr('foc');
                            var adminstatus = $(this).attr('statuclm');
                            var tec1status = $(this).attr('tec1status');
                            var tec2status = $(this).attr('tec2status');
                            var pmstatus = $(this).attr('pmstatus');
                            $("#Nospankey").text(nokey);
                            $("#subNospan").text(clmnoup);
                            $("#_admin").val(adminstatus);
                            $("#_t1").val(tec1status);
                            $("#_t2").val(tec2status);
                            $("#_t3").val(pmstatus);

                            if (fax == "1") {
                                $.ajax({
                                    url: '@Url.Action("GetClimwhdata", "GetdataCenter")',
                                    data: {
                                        inCLM_ID: nokey,
                                        inCLM_SUB: clmnoup
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {
                                        console.log(data);
                                        // $("#Nospankey").text(nokey);
                                        //  $("#subNospan").text(clmnoup);
                                        $("#_itemno").text(data.Getdata[0].val.STKCOD);
                                        $("#_description").text(data.Getdata[0].val.STKDES);
                                        $("#_uom").text(data.Getdata[0].val.CLM_UOM);

                                      
                                        $("#_stkgup").text(data.Getdata[0].val.CLM_STKGRP);
                                        $("#prdnam").text(data.Getdata[0].val.PROD + "/" + data.Getdata[0].val.PRODNAM);
                                        $("#stkgrpnam").text(data.Getdata[0].val.GRPNAM);

                                        $("#_claimsec").text(data.Getdata[0].val.SEC + "/" + data.Getdata[0].val.DEPNAM);
                                        ////Get input display ///////
                                        $("#_claimqty").text(data.Getdata[0].val.CLM_REQ_QTY);//Qty//
                                        //$("#_workda").text(worktimeup);//ระยะใช้งาน//
                                        $("#causeclaim").text(causeclaimup);//เหตุผลเคลม//
                                        $("#_proceedto").text(proceedtoupdes);//ดำเนินการ//
                                        $("#_statusclaim").text(statusclaimupdes); //Status///
                                        $("#_claimnosub").text(clmnoup);
                                        $("#_proceedtotec").val(statusclaimup);  ///สถานะการรับสินค้า
                                        $("#_location").text(data.Getdata[0].val.CLM_Location);
                                        $("#_perfromtec1").val(proceedtoup);  ///ดำเนินการ
                                        $("#_batcod").val(data.Getdata[0].val.CLM_BatchCode);  ///BatchCode
                                        $("#updateremaketec1").val(data.Getdata[0].val.CLM_COMMENT);
                                        var _cktype = $("#_udertype").val();
                                        var _ckuser = $("#_uderlogin").val();
                                        var nokey = $("#Nospankey").text();
                                        var nosubkey = $("#subNospan").text();
                                        $("#_nametec1").val(_ckuser);

                                        ///ตรวจสอบรับสินค้าเคลม////
                                        var today = new Date();

                                        //  alert(_ckuser)
                                        var _tec1Proststus = data.Getdata[0].val.TECH1_PROCESS_STATUS;
                                        var _AdminProststus = data.Getdata[0].val.ADMIN_ANLYS_STATUS;

                                        $("#_tecrevqty").val(data.Getdata[0].val.CLM_TECH1_QTY)

                                        if (_tec1Proststus != "0") {
                                            $("#_proceedtotec").val(data.Getdata[0].val.CLM_RCVSTATUS);  ///สถานะการรับสินค้า
                                            //$("#_rcvbyte").val(data.Getdata[0].val.CLM_RCVBY);      //ผู้รับสินค้าเคลม
                                            //$("#_rcvdatetec").val(data.Getdata[0].val.CLM_RCVDATE);//วันที่รับสินค้าเคลม:
                                            $("#_rvqtytec").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                                            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                                            $("#_clmdatetec").val(data.Getdata[0].val.CLM_DATE);//Claim date:
                                            //$("#_duedatetec").val(data.Getdata[0].val.CLM_DUEDATE); //Due date
                                            // $("#_admintec").val(data.Getdata[0].val.CLM_ADMIN);//Admin:
                                            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ

                                            var shelf = data.Getdata[0].val.CLM_SHELF_LOCATION;
                                            $("#_shelfloctec").val(shelf);//Shelf Location

                                            $("#_tecwork").val(data.Getdata[0].val.Technician);//ช่างที่รับผิดชอบ:
                                            var _valtec = $('#_tecwork').val();
                                            if (_valtec != null) {
                                                $.ajax({
                                                    url: '@Url.Action("GetTechLocation", "GetdataCenter")',
                                                    data: {
                                                        Name: _valtec
                                                    },
                                                    type: "POST",
                                                    dataType: "JSON",
                                                    success: function (data) {
                                                        console.log(data)
                                                        var select = $("#_shelfloctec");
                                                        select.append($("<option>").val(shelf).text(shelf));
                                                        $(data).each(function (index, item) {

                                                            select.append($("<option>").val(item.Location).text(item.Location));
                                                        });
                                                    }
                                                });
                                            } else {
                                                $('#_tecwork').val("0");
                                                var select = $("#_shelfloctec");
                                                select.append($("<option>").val("0").text("เลือก Shelf Location"));
                                            }

                                            $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม

                                            ///Technic 1 : วิเคราะห์สินค้าเคลม///
                                            $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);//บันทึกโดย
                                            $("#_anlysdatetec1").val(data.Getdata[0].val.TECH1_ANLYS_DATE);    //วันที่วิเคราะห์ปัญหา
                                            $("#_perfromtec1").val(data.Getdata[0].val.CLM_PERFORM); //ดำเนินการ
                                            
                                            var anlysafterprotec1 = $("#_anlysafterprotec1").val();
                                            if (anlysafterprotec1 == "1") {
                                                $("#displ").css("display", "block")
                                                $("#_scrapdatetec1").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                            } else {
                                                crapdatetec1 = null;
                                                $("#displ").css("display", "none")
                                            }
                                            $("#remaketec1").val(data.Getdata[0].val.TECH1_ANLYS_RESULT);  //ผลการตรวจสอบ
                                            var statustec1 = data.Getdata[0].val.TECH1_ANLYS_STATUS;

                                            if (statustec1 == "2") {
                                                $("#a").attr('checked', false);
                                                $("#b").attr('checked', false);
                                                $("#c").attr('checked', true);
                                                $("#d").attr('checked', false);
                                                $("#e").attr('checked', false);
                                                $("#f").attr('checked', false);
                                                $("#c").removeAttr("disabled");
                                                $("#f").attr("disabled", "disabled");
                                            } else {
                                                $("#a").prop('checked', false);
                                                $("#b").prop('checked', false);
                                                $("#c").prop('checked', false);
                                                $("#d").prop('checked', false);
                                                $("#e").prop('checked', false);
                                                $("#f").prop('checked', true);
                                                $("#f").removeAttr("disabled", "disabled");

                                            }
                                        } else if (_tec1Proststus == "0") {
                                            ///ยังไม่ได้ตรวจสอบรับสินค้าเคลม && วิเคราะห์สินค้าเคลม////
                                            // alert("ยังไม่ได้ตรวจสอบรับสินค้าเคลม && วิเคราะห์สินค้าเคลม");
                                            if (_cktype != "1") { /// User not Admin and Trcchic1
                                                //alert("ยังไม่ได้วิเคราะห์สินค้าเคลม");
                                                var newDate = addDays(new Date(), 15);
                                                $("#_btnsavecheck").removeAttr('disabled');
                                                $("#_btnsaveconsider").attr("disabled", "disabled");
                                                $("#_btnsaveapprove").attr("disabled", "disabled");
                                                $("#_btnprintfro").attr("disabled", "disabled"); //บันทึกรับสินค้า & พิมพ์แบบฟอร์มสำหรับช่างตรวจสอบ
                                                $("#_btnsavete1").attr("disabled", "disabled"); //บัททึกการตรวจสอบ

                                                $("#_proceedtotec").val(statusclaimup);  ///สถานะการรับสินค้า
                                                $("#_rcvbyte").val("0");      //ผู้รับสินค้าเคลม

                                                $("#_rcvdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));//วันที่รับสินค้าเคลม:
                                                $("#_rvqtytec").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                                                //$("#_rcuom").val(data.Getdata[0].val.Uom);//UOM
                                                $("#_clmdatetec").val(('0' + today.getDate()).slice(-2) + '/' + ('0' + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear());//Claim date:

                                                //$("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
                                                //$("#_admintec").val("");//Admin:
                                                // $("#_datechecktec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)); //วันที่ตรวจสอบ
                                                $("#_shelfloctec").val("0");//Shelf Location
                                                $("#_tecwork").val("0");//ช่างที่รับผิดชอบ:
                                                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                                                //tap วิเคราะห์//

                                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                                $("#_anlysdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา
                                                $("#_perfromtec1").val(proceedtoup); //ดำเนินการ
                                                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                                $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                                $("#remaketec1").val("");
                                            } else {
                                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                                // $("#_btnprintfro").removeAttr('disabled'); //บันทึกรับสินค้า & พิมพ์แบบฟอร์มสำหรับช่างตรวจสอบ
                                                $("#_btnsavete1").removeAttr('disabled'); //บัททึกการตรวจสอบ
                                                $("#_btnsavecheck").removeAttr('disabled');
                                                $("#_shelfloctec").val("0");//Shelf Location
                                                $("#_tecwork").val("0");//ช่างที่รับผิดชอบ:
                                                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                                                $("#_nametec1").val(_ckuser);//บันทึกโดย
                                                $("#_anlysdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา
                                                $("#_perfromtec1").val(proceedtoup); //ดำเนินการ
                                                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                                $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                                $("#remaketec1").val("");
                                            }
                                        }
                                        var _tec2Proststus = data.Getdata[0].val.TECH2_ANLYS_STATUS;//approve tec2
                                        var _PMProststus = data.Getdata[0].val.PM_PROCESS_STATUS;//approve PM
                                        var _PM_NAME = data.Getdata[0].val.PM_NAME;
                                        if (_tec2Proststus != "0") {
                                            ///Technic 2 : ผลการพิจารณา///
                                            // alert("Technic 2 : พิจารณา");
                                          
                                            $("#_anlysstatustec1").val(data.Getdata[0].val.TEC_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                            $("#_anlysafterprotec1").val(data.Getdata[0].val.ANLYS_AFTERPROCESS); //หลังเสร็จสิ้นกระบวนการเคลม
                                            var anlysafterprotec1 = $("#_anlysafterprotec1").val();
                                            if (anlysafterprotec1 == "1") {
                                                $("#displ").css("display", "block")
                                                $("#_scrapdatetec1").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                                $("#_scrapdatetec1").attr("disabled", "disabled");
                                            } else {
                                                crapdatetec1 = null;
                                                $("#displ").css("display", "none")
                                            }
                                            $("#a").prop('checked', false);
                                            $("#b").prop('checked', false);
                                            $("#c").prop('checked', false);
                                            $("#d").prop('checked', false);
                                            $("#e").prop('checked', false);
                                            $("#f").prop('checked', false);

                                            var tyclom = data.Getdata[0].val.Clmtype;
                                           
                                            if (tyclom == "1") {
                                                $("#a").prop('checked', true);
                                                $("#b").prop('checked', false);
                                                $("#c").prop('checked', false);
                                                $("#d").prop('checked', false);
                                                $("#e").prop('checked', false);
                                                $("#f").prop('checked', false);
                                                $("#a").removeAttr('disabled');
                                            } else if (tyclom == "2") {
                                                $("#a").prop('checked', false);
                                                $("#b").prop('checked', true);
                                                $("#c").prop('checked', false);
                                                $("#d").prop('checked', false);
                                                $("#e").prop('checked', false);
                                                $("#f").prop('checked', false);
                                                $("#b").removeAttr('disabled');
                                            } else if (tyclom == "3") {

                                                $("#a").prop('checked', false);
                                                $("#b").prop('checked', false);
                                                $("#c").prop('checked', true);
                                                $("#d").prop('checked', false);
                                                $("#e").prop('checked', false);
                                                $("#f").prop('checked', false);
                                                $("#c").removeAttr('disabled');

                                            } else if (tyclom == "4") {
                                                $("#a").prop('checked', false);
                                                $("#b").prop('checked', false);
                                                $("#c").prop('checked', false);
                                                $("#d").prop('checked', true);
                                                $("#e").prop('checked', false);
                                                $("#f").prop('checked', false);
                                                $("#d").removeAttr('disabled');
                                            } else if (tyclom == "5") {
                                                $("#a").prop('checked', false);
                                                $("#b").prop('checked', false);
                                                $("#c").prop('checked', false);
                                                $("#d").prop('checked', false);
                                                $("#e").prop('checked', true);
                                                $("#f").prop('checked', false);
                                                $("#e").removeAttr('disabled');
                                            } else if (tyclom == "6") {
                                                $("#a").prop('checked', false);
                                                $("#b").prop('checked', false);
                                                $("#c").prop('checked', false);
                                                $("#d").prop('checked', false);
                                                $("#e").prop('checked', false);
                                                $("#f").prop('checked', true);
                                                $("#f").removeAttr("disabled", "disabled");
                                            }
                                            $("#_btnsavete1").css("display", "none");
                                            $("#_btnsavecheck").css("display", "none");
                                            $("#_btnsavete1").attr("disabled", "disabled");
                                            $("#_btnsavecheck").attr("disabled", "disabled");
                                            $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                            $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                            $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                            $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                            $("#_tecrevqty2").val(data.Getdata[0].val.CLM_TECH2_QTY);   //หมายเหตุ
                                            $("#_tecrevqtybad").val(data.Getdata[0].val.CLM_TECH2_WASTE_QTY);   //จำนวนของเสีย(ส่งเคลมSupplierไม่ได้)
                                            $("#_tecrevqtywd").val(data.Getdata[0].val.CLM_TECH2_GOOD_QTY);   //จำนวนสินค้าใช้งานได้
                                            if (_PMProststus == "0") {// if PM<>Approve
                                                if (_cktype == "2") {
                                                    $("#_btnsaveconsider").css("display", "block");
                                                    if (_tec2Proststus != "1") {
                                                        // $("#_btnsaveconsider").removeAttr('disabled');
                                                        $("#_btnsaveconsider").attr("disabled", "disabled");
                                                    } else {
                                                        $("#_btnsaveconsider").attr("disabled", "disabled");
                                                    }
                                                } else {
                                                    $("#_btnsaveconsider").attr("disabled", "disabled");
                                                    $("#_btnsaveconsider").css("display", "none");
                                                }
                                            } else if (_PMProststus != "0") {
                                                //PM = Approve//
                                                //if (_PM_NAME == "TEC2") {

                                                if (_cktype == "2") {
                                                    $("#_btnsaveconsider").attr("disabled", "disabled");
                                                    $("#_btnsaveconsider").css("display", "none");
                                                } else {
                                                    $("#_btnsaveconsider").attr("disabled", "disabled");
                                                    $("#_btnsaveconsider").css("display", "none");
                                                }
                                                // } else {
                                                //   $("#_btnsaveconsider").attr("disabled", "disabled");
                                                //}
                                            }
                                        } else {
                                            //alert("Technic 2 : ยังพิจารณา");
                                            $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                            $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                            $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                            $("#_tecrevqty2").val(data.Getdata[0].val.CLM_TECH2_QTY);   //หมายเหตุ
                                            $("#a").prop('checked', false);
                                            $("#b").prop('checked', false);
                                            $("#c").prop('checked', false);
                                            $("#d").prop('checked', false);
                                            $("#e").prop('checked', false);
                                            $("#f").prop('checked', true);
                                            $("#f").removeAttr("disabled", "disabled");

                                            if (_cktype == "2") {

                                                $("#_btnsaveconsider").removeAttr('disabled');
                                                $("#_btnsaveconsider").css("display", "block");
                                                $("#_name2tec").val(_ckuser); //รับรองการตรวจสอบโดย
                                                $("#_appdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่เทคนิคพิจารณา
                                                $("#_apprvststus").val("0"); // สถานะ
                                                $("#remaketec2").val("");   //หมายเหตุ

                                                $("#_btnsavecheck").css("display", "block");
                                                $("#_btnsavecheck").removeAttr('disabled');
                                            } else {

                                                $("#_btnsavete1").css("display", "block");
                                                $("#_btnsavecheck").css("display", "block");
                                                $("#_btnsavete1").removeAttr('disabled');
                                                $("#_btnsavecheck").removeAttr('disabled');

                                                // $("#_btnsavecheck").removeAttr('disabled');
                                                $("#_btnsaveconsider").attr("disabled", "disabled");
                                                $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                                                $("#_appdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่เทคนิคพิจารณา
                                                $("#_apprvststus").val("0"); // สถานะ
                                                $("#remaketec2").val("");   //หมายเหตุ
                                            }

                                        }

                                        if (_PMProststus != "0") {
                                            ///Product Manager Approval///
                                            // alert("Product Manager Approval");
                                            $("#_PM").val(data.Getdata[0].val.PM_NAME);  // Product Manager
                                            $("#_pmdate").val(data.Getdata[0].val.PM_APPRV_DATE); //วันที่PM พิจารณา
                                            $("#_pmtstus").val(data.Getdata[0].val.PM_APPRV_STATUS); //สถานะอนุมัติ
                                            $("#remakepm").val(data.Getdata[0].val.PM_REMARK);
                                            $("#_pmnewpn").val(data.Getdata[0].val.PM_Replacemen);
                                            $("#_pmqty").val(data.Getdata[0].val.CLM_PM_QTY);
                                            $("#_rvqtytec").val(data.Getdata[0].val.CLM_PM_QTY);
                                            //aps//
                                            if (_PMProststus == "1") {
                                                $("#_btnsavete1").removeAttr('disabled');
                                                $("#_btnsavete1").css("display", "block");
                                            } else if (_PMProststus == "2") {
                                                $("#_btnsavete1").attr("disabled", "disabled");
                                                $("#_btnsavete1").css("display", "none");
                                            } if (_PMProststus == "3") {
                                                $("#_btnsavete1").attr("disabled", "disabled");
                                                $("#_btnsavete1").css("display", "none");
                                            }
                                            $("#_btnsaveapprove").attr("disabled", "disabled");

                                            $("#_anlysstatustecpm").val(data.Getdata[0].val.PM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                            $("#_anlysafterprotecpm").val(data.Getdata[0].val.PM_PROCESS_STATUS_ANLYS); //หลังเสร็จสิ้นกระบวนการเคลม
                                            var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
                                            if (anlysafterprotecpm == "1") {
                                                $("#displpm").css("display", "block")
                                                $("#_scrapdatetecpm").val(data.Getdata[0].val.PM_ANLYS_AFTERPROCESS);     //วันที่ทำลาย:
                                            } else {
                                                crapdatetec1 = null;
                                                $("#displpm").css("display", "none");
                                            }

                                            $("#_anlysstatustecpm").attr("disabled", "disabled");
                                            $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                            $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                            $("#apm").attr("disabled", "disabled");
                                            $("#bpm").attr("disabled", "disabled");
                                            $("#cpm").attr("disabled", "disabled");
                                            $("#dpm").attr("disabled", "disabled");
                                            $("#epm").attr("disabled", "disabled");
                                            $("#fpm").attr("disabled", "disabled");
                                            $("#_pmqty").attr("disabled", "disabled");
                                            var tyclom = data.Getdata[0].val.Process_PM;
                                            // alert(tyclom)
                                            if (tyclom == "1") {
                                                $("#apm").attr('checked', true);
                                                $("#bpm").attr('checked', false);
                                                $("#cpm").attr('checked', false);
                                                $("#dpm").attr('checked', false);
                                                $("#epm").attr('checked', false);
                                                $("#fpm").attr('checked', false);

                                            } else if (tyclom == "2") {
                                                $("#apm").attr('checked', false);
                                                $("#bpm").attr('checked', true);
                                                $("#cpm").attr('checked', false);
                                                $("#dpm").attr('checked', false);
                                                $("#epm").attr('checked', false);
                                                $("#fpm").attr('checked', false);
                                            } else if (tyclom == "3") {
                                                $("#apm").attr('checked', false);
                                                $("#bpm").attr('checked', false);
                                                $("#cpm").attr('checked', true);
                                                $("#dpm").attr('checked', false);
                                                $("#epm").attr('checked', false);
                                                $("#fpm").attr('checked', false);
                                            } else if (tyclom == "4") {
                                                $("#apm").attr('checked', false);
                                                $("#bpm").attr('checked', false);
                                                $("#cpm").attr('checked', false);
                                                $("#dpm").attr('checked', true);
                                                $("#epm").attr('checked', false);
                                                $("#fpm").attr('checked', false);
                                            } else if (tyclom == "5") {
                                                $("#apm").attr('checked', false);
                                                $("#bpm").attr('checked', false);
                                                $("#cpm").attr('checked', false);
                                                $("#dpm").attr('checked', false);
                                                $("#epm").attr('checked', true);
                                                $("#fpm").attr('checked', false);
                                            } else if (tyclom == "6") {
                                                $("#apm").attr('checked', false);
                                                $("#bpm").attr('checked', false);
                                                $("#cpm").attr('checked', false);
                                                $("#dpm").attr('checked', false);
                                                $("#epm").attr('checked', false);
                                                $("#fpm").attr('checked', true);
                                                $("#fpm").attr("disabled", "disabled");
                                            }
                                        } else {
                                            //alert("Product Manager No Approval");
                                            $("#_anlysstatustecpm").attr("disabled", "disabled");
                                            $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                            $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                            $("#apm").attr("disabled", "disabled");
                                            $("#bpm").attr("disabled", "disabled");
                                            $("#cpm").attr("disabled", "disabled");
                                            $("#dpm").attr("disabled", "disabled");
                                            $("#epm").attr("disabled", "disabled");
                                            $("#fpm").attr("disabled", "disabled");
                                            $("#apm").attr('checked', false);
                                            $("#bpm").attr('checked', false);
                                            $("#cpm").attr('checked', false);
                                            $("#dpm").attr('checked', false);
                                            $("#epm").attr('checked', false);
                                            $("#fpm").attr('checked', false);
                                            if (_cktype == "3") {
                                                //$("#_PM").val(_ckuser);  // Product Manager
                                                $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)); //วันที่PM พิจารณา
                                                $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                                $("#remakepm").val("");
                                                $("#_pmnewpn").val("");

                                                $("#_btnsaveapprove").removeAttr('disabled');
                                            } else {

                                                //$("#_PM").val("");  // Product Manager
                                                $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2)); //วันที่PM พิจารณา
                                                $("#_pmtstus").val("0"); //สถานะอนุมัติ
                                                $("#remakepm").val("");
                                                $("#_pmnewpn").val("");
                                                $("#_btnsaveapprove").attr("disabled", "disabled");
                                            }
                                            $("#_PM").val(data.Getdata[0].val.PROD);
                                            $("#_btnsavete1").attr("disabled", "disabled");
                                            $("#_btnsavete1").css("display", "none");
                                        }

                                        if (_AdminProststus != "0") {
                                            // alert(data.Getdata[0].val.CLM_RCVDATE)
                                            $("#_proceedtotec").val(data.Getdata[0].val.CLM_RCVSTATUS);  ///สถานะการรับสินค้า
                                            $("#_rcvbyte").val(data.Getdata[0].val.CLM_RCVBY);      //ผู้รับสินค้าเคลม
                                            $("#_rcvdatetec").val(data.Getdata[0].val.CLM_RCVDATE);//วันที่รับสินค้าเคลม:
                                            $("#_rvqtytec").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                                            $("#_clmdatetec").val(data.Getdata[0].val.CLM_DATE);//Claim date:
                                            $("#_duedatetec").val(data.Getdata[0].val.CLM_DUEDATE); //Due date
                                            $("#_admintec").val(data.Getdata[0].val.CLM_ADMIN);//Admin:
                                            $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม

                                            var shelf = data.Getdata[0].val.CLM_SHELF_LOCATION;

                                            $("#_shelfloctec").val(shelf);//Shelf Location tech1
                                           // $("#_locationadmin").val(shelf); //Shelf Location admin
                                            var _valtec = $('#_tecwork').val();
                                            if (_valtec != null){
                                                $.ajax({
                                                    url: '@Url.Action("GetTechLocation", "GetdataCenter")',
                                                    data: {
                                                        Name: '8'
                                                    },
                                                    type: "POST",
                                                    dataType: "JSON",
                                                    success: function (data) {
                                                        console.log(data)
                                                        var select = $("#_locationadmin");
                                                        select.children().remove();
                                                        select.append($("<option>").val(shelf).text(shelf));
                                                        $(data).each(function (index, item) {

                                                            select.append($("<option>").val(item.Location).text(item.Location));
                                                        });
                                                    }
                                                });
                                            }
                                            $("#_btnsavete1").css("display", "none");
                                        } else if (_AdminProststus == "0") {

                                            if (_PMProststus != "0") {
                                                $("#_proceedtotec").val(statusclaimup);  ///สถานะการรับสินค้า
                                                $("#_rcvbyte").val("0");      //ผู้รับสินค้าเคลม
                                                //alert(data.Getdata[0].val.CLM_QTY)
                                                $("#_rcvdatetec").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));//วันที่รับสินค้าเคลม:
                                                $("#_rvqtytec").val(data.Getdata[0].val.CLM_PM_QTY); //จำนวนที่รับเคลม:
                                                //$("#_rcuom").val(data.Getdata[0].val.Uom);//UOM
                                                $("#_clmdatetec").val(('0' + today.getDate()).slice(-2) + '/' + ('0' + (today.getMonth() + 1)).slice(-2) + '/' + today.getFullYear());//Claim date:
                                                var newDate = addDays(new Date(), 15);

                                                $("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
                                                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                                                $("#_admintec").val(_ckuser);//Admin

                                                var shelf = data.Getdata[0].val.CLM_SHELF_LOCATION;

                                                $("#_shelfloctec").val(shelf);//Shelf Location tech1
                                                //$("#_locationadmin").val(shelf); //Shelf Location admin
                                                var _valtec = $('#_tecwork').val();
                                                if (_valtec != null) {
                                                    $.ajax({
                                                        url: '@Url.Action("GetTechLocation", "GetdataCenter")',
                                                        data: {
                                                            Name: '8'
                                                        },
                                                        type: "POST",
                                                        dataType: "JSON",
                                                        success: function (data) {
                                                            console.log(data)
                                                            var select = $("#_locationadmin");
                                                            select.children().remove();
                                                            select.append($("<option>").val(shelf).text(shelf));
                                                            $(data).each(function (index, item) {

                                                                select.append($("<option>").val(item.Location).text(item.Location));
                                                            });
                                                        }
                                                    });
                                                }
                                            }
                                        }
                                        //} else {

                                        //    $("#textAlertWarning").empty();
                                        //    $("#textAlertWarning").text("ไม่มีรายการเคลม...");
                                        //    $("#myModalWarning").modal();
                                        //}
                                        //}
                                        // });
                                    }
                                });
                                $.ajax({
                                    url: '@Url.Action("GetfileVideoWH", "GetdataCenter")',
                                    data: {
                                        inCLM_ID: nokey,
                                        CLM_NO: clmnoup,
                                        Im_No: "01"
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (result) {
                                        console.log(result.videolist)
                                        if (result.videolist.length > 0) {
                                            $('#appvideosales').html("");
                                            for (var i = 0; i < result.videolist.length; i++) {
                                                SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                                SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';
                                                SubmithtmlPage += '</video>';
                                                $('#appvideosales').append(SubmithtmlPage);
                                                // HTMLbuilder = HTMLbuilder + imgHtml;
                                            }
                                        } else {

                                        }
                                    },
                                });
                                $.ajax({
                                    url: '@Url.Action("GetfileVideoWH", "GetdataCenter")',
                                    data: {
                                        inCLM_ID: nokey,
                                        CLM_NO: clmnoup,
                                        Im_No: "TEC01"
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (result) {
                                        console.log(result.videolist)
                                        if (result.videolist.length > 0) {
                                            $(".pip").remove();
                                            $("<span class=\"pip\">" +
                                            "<video controls='controls' style='width: 600px; max-width: 100%;'>" +
                                            "<source src=" + result.videolist[0].FilePath + ".mp4" + " type='video/mp4' videomode='720p' />" +
                                            " </video>" +
                                             "<br/><span class=\"removevideo\"  remoimage=" + result.videolist[0].Name + " img=" + result.videolist[0].Name + " >Remove image</span>" +
                                             "</span>").insertAfter("#appvideo");
                                            $(".removevideo").click(function () {
                                                $(this).parent(".pip").remove();
                                                $("#ststus").text("");

                                            });

                                        } else {
                                            $(".pip").remove();
                                            $("#ststus").text("");
                                        }
                                    },
                                });
                                //  }
                                //Getimage//
                                var _cktype = $("#_udertype").val();
                                $.ajax({
                                    url: '@Url.Action("GetPathImageWH", "GetdataCenter")',
                                    data: {
                                        inCLM_ID: nokey,
                                        CLM_NO: clmnoup
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (result) {
                                        $('#boximage').html("");
                                        var SubmithtmlPage = "";
                                        if (result.Getdata.length > 0) {
                                            $("#FilesList tbody").empty();
                                            for (var i = 0; i < result.Getdata.length; i++) {
                                                resultObj = eval(result.Getdata);
                                                var str = resultObj[i].val.IMAGE_NO;
                                                var res = str.substring(0, 3);
                                                if (res != "TEC") {
                                                    SubmithtmlPage = '<div class="col-sm-3">';
                                                    SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                                    SubmithtmlPage += '</div>';
                                                    $('#boximage').append(SubmithtmlPage);
                                                } else if (res == "TEC") {
                                                    var markup = "<tr id='" + resultObj[i].val.IMAGE_ID + "'><td><img src='" + resultObj[i].val.PATH + "' id='myImg' style='width: 25%'></td>\
                                  <td>\
                                 <button type='button' style='float: right;' class='delimagsalsccess'  faxdel=2 ic=" + resultObj[i].val.IMAGE_ID + " name=" + resultObj[i].val.IMAGE_NAME + " remoimage=" + resultObj[i].val.IMAGE_ID + " img=" + resultObj[i].val.IMAGE_NAME + " >Cancel</button></td>\
                                  </tr>"; // Binding the file name
                                                    $("#FilesList tbody").append(markup);
                                                }
                                                //var sfilename = resultObj[i].val.IMAGE_NAME;
                                                //formdata.append(sfilename, resultObj[i]);

                                            }

                                            chkatchtbl();
                                        } else {
                                            $("#FilesList tbody").empty();
                                            $('#boximage').html("");
                                            SubmithtmlPage = '<div class="col-sm-3" style="color: red;">';
                                            SubmithtmlPage += 'ไม่มีภาพประกอบการเคลมสินค้า';
                                            SubmithtmlPage += '</div>';
                                            $('#boximage').append(SubmithtmlPage);
                                        }
                                    },

                                });

                            }

                        });
                        // Get the modal


                        // Get the image and insert it inside the modal - use its "alt" text as a caption

                        //img.onclick = function () {
                        //    modal.style.display = "block";
                        //    modalImg.src = this.src;
                        //    captionText.innerHTML = this.alt;
                        //}

                        $(document).on('click', '#myImg', function () {
                            var modal = document.getElementById('myModalzoom');
                            var img = document.getElementById('myImg');
                            var modalImg = document.getElementById("img01");
                            var captionText = document.getElementById("caption");
                            modal.style.display = "block";
                            modalImg.src = this.src;
                            captionText.innerHTML = this.alt;
                        });
                        $(document).on('click', '.close', function () {
                            var modal = document.getElementById('myModalzoom');
                            modal.style.display = "none";
                        });
                        $(document).on('click', '#closeimg', function () {
                            var modal = document.getElementById('myModalzoom');
                            modal.style.display = "none";
                        });
                        $(document).on('click', '#myModalzoom div', function () {
                            var modal = document.getElementById('myModalzoom');
                            modal.style.display = "none";
                        });

                        // Get the <span> element that closes the modal
                        //  var span = document.getElementsByClassName("close")[0];

                        // When the user clicks on <span> (x), close the modal
                        //  span.onclick = function () {
                        //      modal.style.display = "none";
                        //  }
                        $(document).on('click', '.removevideo', function () {
                            var control = $("#FileUpload");
                            control.replaceWith(control.val('').clone(true));
                            // Some bound handlers to preserve when cloning
                            control.on({
                                change: function () { console.log("Changed") },
                                focus: function () { console.log("Focus") }
                            });
                            var clmno = $("#Nospankey").text();
                            var clmsub = $("#subNospan").text();
                            // var phimage = $('.imageThumb img').attr('src');
                            // var absPath = resultObj[0].val.IMAGE_NAME;
                            var absPath = $(this).attr("img");

                            var idimag = $(this).attr("remoimage");

                            if (idimag != "") {
                                if (typeof idimag !== "undefined") {
                                    $.ajax({
                                        url: '@Url.Action("DeleteFileVideo", "Process_Wh")',
                                        data: {
                                            comid: clmno,
                                            clmnoup: clmsub,
                                            clmidimg: idimag,
                                            absPath: absPath + ".mp4",
                                            Im_No: "TEC01"

                                        },
                                        type: "POST",
                                        dataType: "JSON",
                                        success: function (data) {
                                            console.log(data);
                                            if (data.message == "true") {

                                                alert("ลบ VIDEOS รายการเรียบร้อย");
                                                location.reload();
                                                var control = $("#FileUpload");

                                                control.replaceWith(control.val('').clone(true));

                                                // Some bound handlers to preserve when cloning
                                                control.on({
                                                    change: function () { console.log("Changed") },
                                                    focus: function () { console.log("Focus") }
                                                });
                                            } else {
                                                alert(data.message);
                                            }
                                        }
                                    });
                                }
                            }
                        });
                        $(document).on('click', '#delimgtec', function () {

                            var clmno = $("#Nospankey").text();
                            var clmsub = $("#subNospan").text();

                            var absPath = $(this).attr("abspath");

                            var idimag = $(this).attr("imno");

                            if (idimag != "") {
                                if (typeof idimag !== "undefined") {
                                    $.ajax({
                                        url: '@Url.Action("Deleteimage", "Createclaim_Sc")',
                                        data: {
                                            comid: clmno,
                                            clmnoup: clmsub,
                                            clmidimg: idimag,
                                            absPath: absPath
                                        },
                                        type: "POST",
                                        dataType: "JSON",
                                        success: function (data) {
                                            console.log(data);
                                            if (data.message == "true") {

                                                alert("ลบ image รายการเรียบร้อย");
                                                location.reload();

                                            } else {
                                                alert(data.message);
                                            }
                                        }
                                    });
                                }
                            }
                        });
                        var waitingDialog = waitingDialog || (function ($) {
                            'use strict';

                            // Creating modal dialog's DOM
                            var $dialog = $(
                                '<div class="modal fade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
                                '<div class="modal-dialog modal-m">' +
                                '<div class="modal-content">' +
                                    '<div class="modal-header"><h3 style="margin:0;"></h3></div>' +
                                    '<div class="modal-body">' +
                                        '<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>' +
                                    '</div>' +
                                '</div></div></div>');

                            return {

                                show: function (message, options) {
                                    // Assigning defaults
                                    if (typeof options === 'undefined') {
                                        options = {};
                                    }
                                    if (typeof message === 'undefined') {
                                        message = 'Loading...';
                                    }
                                    var settings = $.extend({
                                        dialogSize: 'm',
                                        progressType: '',
                                        onHide: null // This callback runs after the dialog was hidden
                                    }, options);

                                    // Configuring dialog
                                    $dialog.find('.modal-dialog').attr('class', 'modal-dialog').addClass('modal-' + settings.dialogSize);
                                    $dialog.find('.progress-bar').attr('class', 'progress-bar');
                                    if (settings.progressType) {
                                        $dialog.find('.progress-bar').addClass('progress-bar-' + settings.progressType);
                                    }
                                    $dialog.find('h3').text(message);
                                    // Adding callbacks
                                    if (typeof settings.onHide === 'function') {
                                        $dialog.off('hidden.bs.modal').on('hidden.bs.modal', function (e) {
                                            settings.onHide.call($dialog);
                                        });
                                    }
                                    // Opening dialog
                                    $dialog.modal();
                                },
                                /**
                                 * Closes dialog
                                 */
                                hide: function () {
                                    $dialog.modal('hide');
                                }
                            };

                        })(jQuery);
                        $("#_btnupdateremaketec1").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();
                            if (nokey == "" && nosubkey == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือกรายการเคลมที่ต้องการบันทึก Comment");
                                $("#myModalWarning").modal(); return false;
                            }
                            var commentt1 = $("#updateremaketec1").val();
                            var rcvbyte = $("#_uderlogin").val();
                            $.ajax({
                                url: '@Url.Action("SaveProcessClaimUpdateAdmin", "Process_Wh")',
                                data: {
                                    aj_REQ_NO: nokey,
                                    aj_CLM_NO_SUB: nosubkey,
                                    aj_CLM_COMMENT: commentt1,
                                    aj_CLM_RCVBY: rcvbyte,
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data);
                                    // waitingDialog.hide();
                                    if (data.message == "true") {
                                        $("#textAlertSucces").empty();
                                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                        $("#myModalSucces").modal();
                                    }else{
                                        $("#textAlertWarning").empty();
                                        $("#textAlertWarning").text(data.message);
                                        $("#myModalWarning").modal(); return false;
                                    }
                                }
                            });
                        });
                        $("#_btnsavete1").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();
                            if (nokey == "" && nosubkey == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือกรายการวิเคราะห์สินค้าเคลม");
                                $("#myModalWarning").modal(); return false;
                            }

                            var proceedtotec = $("#_proceedtotec").val();  ///สถานะการรับสินค้า
                            var rcvbyte = $("#_rcvbyte").val();      //ผู้รับสินค้าเคลม
                            var rcvdatetec = $("#_rcvdatetec").val();//วันที่รับสินค้าเคลม:
                            var rvqtytec = $("#_rvqtytec").val(); //จำนวนที่รับเคลม:
                            var rcvbyte = $("#_rcvbyte").val(); //
                            var clmdatetec = $("#_clmdatetec").val();//Claim date:
                            var duedatetec = $("#_duedatetec").val(); //Due date
                            var admintec = $("#_admintec").val();//Admin:
                            // var datechecktec = $("#_datechecktec").val(); //วันที่ตรวจสอบ
                            var shelfloctecAdmin = $("#_locationadmin").val();//Shelf Location
                            if (shelfloctecAdmin == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือก Location วางสินค้า");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (shelfloctecAdmin == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือก Location วางสินค้า");
                                $("#myModalWarning").modal(); return false;
                            }
                            // var tecwork = $("#_tecwork").val();//ช่างที่รับผิดชอบ:
                            var causeclaimtec = $("#causeclaimtec").val();//หมายเหตุการรับเคลม

                            var docnoterfer = $("#_docnoterfer").val();//Doc transfer No

                            if (proceedtotec == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุสถานะรับของเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (rcvbyte == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุผู้รับสินค้าเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (rvqtytec == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุจำนวนรับเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (rvqtytec == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุจำนวนรับเคลม");
                                $("#myModalWarning").modal(); return false;
                            } else if (rvqtytec != "") {
                                if (proceedtotec != "1") {
                                    $("#textAlertWarning").empty();
                                    $("#textAlertWarning").text("กรุณาเปลี่ยนสถานะการรับสินค้า");
                                    $("#myModalWarning").modal(); return false;
                                }
                            }
                            if (docnoterfer == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุ Doc transfer No");
                                $("#myModalWarning").modal(); return false;
                            }
                            alert();
                            return false;
                            $.ajax({
                                url: '@Url.Action("SaveProcessClaimDetailAdmin", "Process_Wh")',
                                data: {
                                    aj_REQ_NO: nokey,
                                    aj_CLM_NO_SUB: nosubkey,
                                    aj_CLM_RCVSTATUS: proceedtotec,
                                    aj_CLM_RCVBY: rcvbyte,
                                    aj_CLM_QTY: rvqtytec,
                                    aj_CLM_ADMIN: admintec,
                                    aj_CLM_SHELF_LOCATION: shelfloctecAdmin,
                                    aj_ADMIN_ANLYS_STATUS: "1",
                                    aj_TECH1_PROCESS_STATUS: "0",
                                    aj_CLM_REMARK: causeclaimtec,
                                    aj_CLM_RCVDATE: rcvdatetec,
                                    aj_CLM_DUEDATE: duedatetec,
                                    aj_CLM_DATE: clmdatetec,
                                    aj_DOC_TRANSFER: docnoterfer


                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data);
                                    // waitingDialog.hide();
                                    if (data.message == "true") {
                                        //  waitingDialog.hide();
                                        $("#_admin").val("2");
                                        $("#textAlertSucces").empty();
                                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                        $("#myModalSucces").modal();
                                        $("#PrintlabalModal").modal();

                                        //location.reload();
                                        //$("#_btnsearchclaimno").click();
                                        //$("#myModalSucces").click(function () {

                                        //    $("#_btnsearchclaimno").click();
                                        //    $("table tr #xxx").click();
                                        //});
                                    } else {
                                        //  waitingDialog.hide();
                                        $("#textAlertWarning").empty();
                                        $("#textAlertWarning").text(data.message);
                                        $("#myModalWarning").modal(); return false;
                                    }
                                }
                            });
                        });
                        $("#_btnsavecheck").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();

                            //var adminststud = $("#_admin").val();
                            //if (adminststud == "1") {
                            //    $("#textAlertWarning").empty();
                            //    $("#textAlertWarning").text("ยังไม่ตรวจรับสินค้า");
                            //    $("#myModalWarning").modal(); return false;

                            //}
                            /////////////วิเคราะห์ปัญหา///////////////

                            var nametec1 = $("#_nametec1").val();//บันทึกโดย
                            var anlysdatetec1 = $("#_anlysdatetec1").val();    //วันที่วิเคราะห์ปัญหา
                            var perfromtec1 = $("#_perfromtec1").val(); //ดำเนินการ
                            var batcod = $("#_batcod").val(); //ดำเนินการ
                            //var anlysstatustec1 = $("#_anlysstatustec1").val(); //สถานะการวิเคราะห์ WR,WE,WF
                            //var anlysafterprotec1 = $("#_anlysafterprotec1").val(); //หลังเสร็จสิ้นกระบวนการเคลม
                            //var crapdatetec1;

                            //if (anlysafterprotec1 == "1") {
                            //    crapdatetec1 = $("#_scrapdatetec1 ").val();     //วันที่ทำลาย:
                            //} else {
                            //    crapdatetec1 = null;
                            //}
                            var remaketec1 = $("#remaketec1").val();  //ผลการตรวจสอบ
                            var ckt = $("#_t1").val();
                            //waitingDialog.show();
                            var datereturn = $("#_datereturn").val();  //วันที่คืนสินค้า:
                            var namereturn = $("#_namereturn").val();  // ผู้รับสินค้า:
                            if (nokey == "" && nosubkey == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือกรายการวิเคราะห์สินค้าเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            var tecwork = $("#_tecwork").val();//ช่างที่รับผิดชอบ:
                            var shelfloctec = $("#_shelfloctec").val();//Shelf Location
                            var tecrevqty = $("#_tecrevqty").val();// จำนวนรับเคลม:
                            if (tecwork == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุช่างที่รับผิดชอบ");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (tecrevqty == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุ จำนวนรับเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (tecrevqty == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุ จำนวนรับเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (Number(tecrevqty) < 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("จำนวนรับเคลม ติดลบ กรุณาระบุจำนวนใหม่");
                                $("#myModalWarning").modal(); return false;
                            }

                            if (perfromtec1 == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("ต้องการให้ดำเนินการ ??");
                                $("#myModalWarning").modal(); return false;
                            }

                            if (remaketec1 == "") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุผลการวิเคราะห์");
                                $("#myModalWarning").modal(); return false;
                            }
                            var leng = $('#FilesList > tbody:last-child').children().length;
                            //console.log(leng)

                            if (leng == 0) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณา Upload image สองรูปขึ้นไป เพื่อประกอบพิจารณาเคลม");
                                $("#myModalWarning").modal();
                                //return false;
                            }

                            console.log(nokey)
                            console.log(nosubkey)

                            var uderlogin = $("#_uderlogin").val();
                            $.ajax({
                                url: '@Url.Action("SaveProcessClaimWHDetail", "Process_Wh")',
                                data: {
                                    aj_REQ_NO: nokey,
                                    aj_CLM_NO_SUB: nosubkey,
                                    aj_TECH1_NAME: uderlogin,
                                    aj_TECH1_ANLYS_DATE: anlysdatetec1,
                                    aj_CLM_PERFORM: perfromtec1,
                                    aj_CLM_BATCODE: batcod,
                                    //aj_TECH1_ANLYS_STATUS: anlysstatustec1,
                                    //aj_ANLYS_AFTERPROCESS: anlysafterprotec1,
                                    //aj_SCRAP_DATE: crapdatetec1,
                                    aj_TECH1_ANLYS_RESULT: remaketec1,
                                    aj_tecrevqty: tecrevqty,
                                    aj_CLM_SHELF_LOCATION: shelfloctec,
                                    aj_Technician: tecwork

                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data.message);
                                    console.log(data);
                                    // waitingDialog.hide();
                                    if (data.message == "true") {
                                        //  waitingDialog.hide();
                                        $("#textAlertSucces").empty();
                                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                        $("#myModalSucces").modal();


                                        $("#btnUpload").click();
                                        $("#btnuploadsales").click();

                                    } else {
                                        //  waitingDialog.hide();
                                        $("#textAlertWarning").empty();
                                        $("#textAlertWarning").text(data.message);
                                        $("#myModalWarning").modal(); return false;
                                    }
                                }
                            });
                        });

                        $("#btnprint").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();
                            var udertype = 'TECH';
                            if (nokey != "" && nosubkey != "") {
                                var wi = window.open("../Report/frmClaim.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey) + "/" + btoa(udertype));
                                wi.focus();
                                $("#PrintlabalModal").modal();
                            } else {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือกรายการสำหรับปริ้น");
                                $("#myModalWarning").modal();
                                return false;
                            }

                            $("#PrintModal").modal('hide');
                            var claimnokey = nokey;
                            GetClimtemp(claimnokey);
                            // $("#_btnsearchclaimno").click();
                            // $("table tr #xxx").click();

                        });
                        $("#btnnotprint").click(function () {
                            var nokey = $("#Nospankey").text();
                            //alert(nokey)
                            // var claimnokey = nokey;
                            GetClimtemp(nokey);
                            // $("#_btnsearchclaimno").click();
                            // $("table tr #xxx").click();
                        });
                        $("#myModalSucces").click(function () {
                            var nokey = $("#Nospankey").text();
                            //alert(nokey)
                            var claimnokey = nokey;
                            GetClimtemp(claimnokey);
                        });
                        $("#btnprintlabal").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();

                            if (nokey != "" && nosubkey != "") {
                                if (nokey != "" && nosubkey != "") {
                                    var wi = window.open("../Report/frmViewLabelWH.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey));
                                    wi.focus();
                                }
                            } else {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือกรายการสำหรับปริ้น");
                                $("#myModalWarning").modal();
                                return false;
                            }

                            $("#PrintlabalModal").modal('hide');
                            //$("#_btnsearchclaimno").click();
                            var claimnokey = nokey;
                            GetClimtemp(claimnokey);
                            //$("table tr #xxx").click();

                        });
                        $("#btnnotprintlabal").click(function () {
                            var nokey = $("#Nospankey").text();
                            var claimnokey = nokey;
                            GetClimtemp(claimnokey);
                            //$("#_btnsearchclaimno").click();
                            //$("table tr #xxx").click();
                        });
                        //APS//
                        var formdata = new FormData();
                        var dataimage = [];
                        $("#fileInput").on("change", function () {
                            var fileInput = document.getElementById('fileInput');

                            //Iterating through each files selected in fileInput
                            for (i = 0; i < fileInput.files.length; i++) {
                                var src = "";
                                var sfilename = fileInput.files[i].name;
                                let srandomid = Math.random().toString(36).substring(7);
                                src = URL.createObjectURL(fileInput.files[i]);
                                //formdata.append(sfilename, fileInput.files[i], a1 + "-" + inCim_NoSub);
                                formdata.append(sfilename, fileInput.files[i]);
                                var markup = "<tr id='" + srandomid + "'><td><img src='" + src + "' style='width: 25%'></td>\
                                  <td>\
                                 <button type='button' style='float: right;' class='delimagsal' faxdel=1 ic=" + srandomid + " name=" + sfilename + ">Cancel</button></td>\
                                  </tr>"; // Binding the file name
                                $("#FilesList tbody").append(markup);
                            }
                            chkatchtbl();
                            $('#fileInput').val('');
                        });
                        $("#FilesList").on("click", "tr .delimagsal", function () {
                            var Fileid = $(this).attr("ic");
                            var FileName = $(this).attr("name");
                            var faxdel = $(this).attr("faxdel");
                            if (faxdel == "1") {
                                DeleteFile(Fileid, FileName);
                            } else {

                            }
                        });

                        function DeleteFile(Fileid, FileName) {

                            formdata.delete(FileName)
                            $("#" + Fileid).remove();
                            chkatchtbl();
                        }
                        function chkatchtbl() {
                            //alert($('#FilesList tbody').length)
                            if ($('#FilesList tbody').length >= 1) {
                                $("#FilesList").css("visibility", "visible");
                            } else {
                                $("#FilesList").css("visibility", "hidden");
                            }
                        }
                        $("#btnuploadsales").click(function () {
                            var No = $("#Nospankey").text();
                            var inCim_NoSub = $("#subNospan").text();
                            //var No = 'CMTXXXXXX';
                            // var inCim_NoSub = 'CMTXXXXXX-01';
                            formdata.set('uploadername', No + "-" + inCim_NoSub);
                            formdata.set('inCim_NoSub', inCim_NoSub);
                            formdata.set('No', No);
                            $.ajax({
                                url: '@Url.Action("UploadFiles", "Process_Wh")',
                                type: "POST",
                                contentType: false, // Not to set any content header
                                processData: false, // Not to process data
                                //data: formdata,
                                data: formdata,
                                async: false,
                                success: function (result) {
                                    if (result != "") {
                                        alert(result);
                                        $("#FilesList tr .delimagsal").trigger("click");
                                        // $("#_tbclmline tr #xxx").trigger("click");
                                    }
                                },
                                error: function (err) {
                                    alert(err.statusText);
                                }
                            });
                        });
                        $(document).on('click', '#FilesList .delimagsalsccess', function () {
                            var faxdel = $(this).attr("faxdel");
                            if (faxdel == "2") {
                                var control = $("#fileInput");
                                control.replaceWith(control.val('').clone(true));
                                // Some bound handlers to preserve when cloning
                                control.on({
                                    change: function () { console.log("Changed") },
                                    focus: function () { console.log("Focus") }
                                });
                                var clmno = $("#Nospankey").text();
                                var clmsub = $("#subNospan").text();

                                var absPath = $(this).attr("img");
                                var idimag = $(this).attr("remoimage");
                                // alert("clmno=" + clmno + "////" + "clmsub=" + clmsub + "////" + "absPath=" + absPath + "////" + "idimag=" + idimag);
                                //return false;
                                var idimag = $(this).attr("remoimage"); if (idimag != "") {
                                    if (typeof idimag !== "undefined") {
                                        $.ajax({
                                            url: '@Url.Action("Deleteimage", "Process_Wh")',
                                            data: {
                                                comid: clmno,
                                                clmnoup: clmsub,
                                                clmidimg: idimag,
                                                absPath: absPath
                                            },
                                            type: "POST",
                                            dataType: "JSON",
                                            success: function (data) {
                                                console.log(data);
                                                if (data.message == "true") {

                                                    alert("ลบ image รายการเรียบร้อย");
                                                    $("#receclaim #btngetshowdata").trigger("click");
                                                    $("#_tbclmline #xxx").trigger("click");

                                                    var control = $("#fileInput");

                                                    control.replaceWith(control.val('').clone(true));

                                                    // Some bound handlers to preserve when cloning
                                                    control.on({
                                                        change: function () { console.log("Changed") },
                                                        focus: function () { console.log("Focus") }
                                                    });
                                                } else {
                                                    alert(data.message);
                                                }
                                            }
                                        });
                                    }
                                }
                            }
                        });

                        $('#btnUpload').click(function () {
                            // Checking whether FormData is available in browser
                            if (window.FormData !== undefined) {
                                // var a2 = $("#_itemno").val();
                                var a2 = $("#_itemno").text();
                                //var _val = a2.replace(/ /g, '');;
                                //a2 = splitval(_val);
                                var a1 = $("#Nospankey").text();
                                var fileUpload = $("#fileupload").get(0);
                                var files = fileUpload.files;
                                console.log(files);


                                var inCim_NoSub = $("#subNospan").text();

                                // Create FormData object
                                var fileData = new FormData();
                                // Looping over all files and add it to FormData object
                                console.log(files)
                                for (var i = 0; i < files.length; i++) {

                                    //fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + inCim_NoSub + "TEC-01");
                                    fileData.append(files[i].name, files[i], a1 + "-" + inCim_NoSub + "TEC-01");
                                }
                                console.log(fileData)
                                // Adding one more key to FormData object
                                // fileData.append('username', 'gdb1100');

                                $.ajax({
                                    url: '@Url.Action("UploadVideo", "Process_Wh")',
                                    type: "POST",
                                    contentType: false, // Not to set any content header
                                    processData: false, // Not to process data
                                    data: fileData,
                                    success: function (result) {
                                        console.log(result)
                                        if (result.message == "true") {
                                            var Img = result.fileName;
                                            if (Img != "") {
                                                $.ajax({
                                                    url: '@Url.Action("Savefilevideo","Process_Wh")',
                                                    data: {
                                                        im_name: Img,
                                                        aj_CLM_NO: a1,
                                                        Im_No: "TEC01",
                                                        aj_CLM_NO_SUB: inCim_NoSub,
                                                        Size: result.Size
                                                    },
                                                    type: "POST",
                                                    dataType: "JSON",
                                                    success: function (data) {
                                                        console.log(data);
                                                        if (data.message == 'true') {
                                                            //alert(data.message)
                                                            $('#ststus').text(data.message);

                                                        }
                                                    }
                                                });
                                            }

                                        }


                                    },
                                    error: function (err) {
                                        alert(err.statusText + "xxxx");
                                    }
                                });
                            } else {
                                alert("FormData is not supported.");
                            }
                        });

                        $("#_btnsaveconsider").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();
                         
                            var name2tec = $("#_name2tec").val(); //รับรองการตรวจสอบโดย
                            var appdatetec = $("#_appdatetec").val();  //วันที่เทคนิคพิจารณา
                            var apprvststus = $("#_apprvststus").val(); // สถานะ
                            var remaketec2 = $("#remaketec2").val();   //หมายเหตุ
                            var tecrevqty2 = $("#_tecrevqty2").val();   // จำนวนรับเคลม
                            var tecrevqtybad = $("#_tecrevqtybad").val();   // จำนวนของเสีย:
                            var tecrevqtywd = $("#_tecrevqtywd").val();   // จำนวนสินค้าใช้งานได้
                            var favorite = [];
                            $.each($("input[name='vehicle']:checked"), function () {
                                favorite.push($(this).val());
                            });
                            //alert("My favourite sports are: " + favorite.join(", "));
                            //var claimtypecke = favorite;
                            var anlysstatustec1 = $("#_anlysstatustec1").val(); //สถานะการวิเคราะห์ WR,WE,WF
                            var anlysafterprotec1 = $("#_anlysafterprotec1").val(); //หลังเสร็จสิ้นกระบวนการเคลม
                            var crapdatetec1;

                            if (anlysafterprotec1 == "1") {
                                crapdatetec1 = $("#_scrapdatetec1 ").val();     //วันที่ทำลาย:
                            } else {
                                crapdatetec1 = null;
                            }
                            var claimtypecke = $("input[name='vehicle']:checked").val()
                            var ckt1 = $("#_t1").val();
                            if (nokey == "" && nosubkey == "") {

                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("ไม่มีรายการบันทึกผลการพิจารณา");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (ckt1 == "0") {

                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("รอ Technic 1 วิเคราะห์สินค้าเคลม.....");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (apprvststus == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือกผลการพิจารณา");
                                $("#myModalWarning").modal(); return false;

                            }
                            if (apprvststus == "1") {
                                if (tecrevqty2 == "" || tecrevqty2 == "0") {
                                    $("#textAlertWarning").empty();
                                    $("#textAlertWarning").text("กรุณาระบุจำนวนรับเคลม");
                                    $("#myModalWarning").modal(); return false;
                                }

                            }
                            // alert(claimtypecke);
                            if (anlysstatustec1 == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุสถานะการวิเคราะห์");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (anlysafterprotec1 == "0") {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาระบุหลังเสร็จสิ้นกระบวนการเคลม");
                                $("#myModalWarning").modal(); return false;
                            }
                            if (claimtypecke === undefined || claimtypecke === null) {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("กรุณาเลือก Warranty Claim Type");
                                $("#myModalWarning").modal(); return false;
                            };
                            //  alert(nokey + "//////" + nosubkey);


                            $.ajax({
                                url: '@Url.Action("SaveProcessClaimDetailTec2", "Process_WH")',
                                data: {
                                    clamtyp: claimtypecke,
                                    aj_REQ_NO: nokey,
                                    aj_CLM_NO_SUB: nosubkey,
                                    aj_TECH2_NAME: name2tec,
                                    aj_TECH2_APPRV_STATUS: apprvststus,
                                    aj_TECH2_REMARK: remaketec2,
                                    aj_TECH2_APPRV_DATE: appdatetec,
                                    aj_TTECH2_QTY: tecrevqty2,
                                    aj_TECH2_PROCESS_ANLYS: anlysstatustec1,
                                    aj_ANLYS_AFTERPROCESS: anlysafterprotec1,
                                    aj_SCRAP_DATE: crapdatetec1,
                                    aj_CLM_TECH2_WASTE_QTY: tecrevqtybad,
                                    aj_CLM_TECH2_GOOD_QTY: tecrevqtywd
                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data);
                                    if (data.message == "true") {
                                        waitingDialog.hide();
                                        $("#textAlertSucces").empty();
                                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                        $("#myModalSucces").modal();

                                        // $("#myModalSucces").click(function () {
                                        //  $("#_btnsearchclaimno").click();
                                        //    $("table tr #xxx").click();
                                        //});
                                    } else {
                                        waitingDialog.hide();
                                        $("#textAlertWarning").empty();
                                        $("#textAlertWarning").text(data.message);
                                        $("#myModalWarning").modal(); return false;
                                    }
                                }
                            });

                        });
                        $("#_btnsaveapprove").click(function () {
                            var nokey = $("#Nospankey").text();
                            var nosubkey = $("#subNospan").text();
                            var pm = $("#_PM").val();  // Product Manager
                            var pmdate = $("#_pmdate").val(); //วันที่PM พิจารณา
                            var pmtstus = $("#_pmtstus").val(); //สถานะอนุมัติ
                            var pmremake = $("#remakepm").val();
                            var pmreplacpn = $("#_pmnewpn").val();
                            var ckt2 = $("#_t2").val();
                            if (nokey == "" && nosubkey == "") {

                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("ไม่มีรายการบันทึกผลการพิจารณา");
                                $("#myModalWarning").modal(); return false;
                            }

                            if (ckt2 == "0") {

                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("รอ ผลการพิจารณา.....");
                                $("#myModalWarning").modal(); return false;
                            }
                            $.ajax({
                                url: '@Url.Action("SaveProcessClaimDetailPM", "Process_Sc")',
                                data: {
                                    aj_REQ_NO: nokey,
                                    aj_CLM_NO_SUB: nosubkey,
                                    aj_PM_NAME: pm,
                                    aj_PM_APPRV_STATUS: pmtstus,
                                    aj_PM_REMARK: pmremake,
                                    aj_PM_APPRV_DATE: pmdate,
                                    aj_PM_Replacement: pmreplacpn

                                },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {
                                    console.log(data);
                                    if (data.message == "true") {
                                        waitingDialog.hide();
                                        $("#textAlertSucces").empty();
                                        $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                        // $("#myModalSucces").modal();
                                        location.reload();
                                    } else {
                                        waitingDialog.hide();
                                        $("#textAlertWarning").empty();
                                        $("#textAlertWarning").text(data.message);
                                        $("#myModalWarning").modal(); return false;
                                    }
                                }
                            });
                        });

                    });

                </script>

</body>


</html>