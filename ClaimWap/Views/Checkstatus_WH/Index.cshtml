@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutindexWH.cshtml";
    var user = ViewBag.UserId;
    var usertype = ViewBag.UserType;
}

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Check Ststus Claim</title>
    <link href="~/Content/css/sb-admin-A.css" rel="stylesheet" />

    @*<link href="~/Content/css/TableFixedColandHeader.css" rel="stylesheet" />*@
    <link href="~/Scripts/JSautocomplete/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/JSautocomplete/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/JSautocomplete/jquery-ui.js"></script>
    <script src="~/Content/fixed-table-master/fixed-table.js"></script>
    <link href="~/Content/fixed-table-master/fixed-table.css" rel="stylesheet" />

    <style>
        #myImg {
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

            #myImg:hover {
                opacity: 0.7;
            }

        /* The Modal (background) */
        .modalx {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        /* Modal Content (Image) */
        .modal-contentx {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
        }

        /* Caption of Modal Image (Image Text) - Same Width as the Image */
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        /* Add Animation - Zoom in the Modal */
        .modal-content, #caption {
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        /* The Close Button */
        .close {
            position: absolute;
            top: 56px;
            right: 20px;
            color: #f1f1f1;
            font-size: 57px;
            font-weight: bold;
            /* transition: 0.3s; */
            left: 1656px;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

        .gi-4x {
            font-size: 1.5em;
        }

       

        button.print-button {
            width: 75px;
            height: 55px;
        }

            span.print-icon, span.print-icon::before, span.print-icon::after, button.print-button:hover .print-icon::after {
                border: solid 2px #333;
            }

                span.print-icon::after {
                    border-width: 2px;
                }

        button.print-button {
            position: relative;
            padding: 0;
            border: 0;
            border: none;
            background: transparent;
        }

            span.print-icon, span.print-icon::before, span.print-icon::after, button.print-button:hover .print-icon::after {
                box-sizing: border-box;
                background-color: #fff;
            }

        span.print-icon {
            position: relative;
            display: inline-block;
            padding: 0;
            margin-top: 20%;
            width: 55%;
            height: 30%;
            background: #fff;
            border-radius: 20% 20% 0 0;
        }

            span.print-icon::before {
                content: " ";
                position: absolute;
                bottom: 100%;
                left: 12%;
                right: 12%;
                height: 110%;
                transition: height .2s .15s;
            }

            span.print-icon::after {
                content: " ";
                position: absolute;
                top: 55%;
                left: 12%;
                right: 12%;
                height: 0%;
                background: #fff;
                background-repeat: no-repeat;
                background-size: 70% 90%;
                background-position: center;
                background-image: linear-gradient( to top, #fff 0, #fff 14%, #333 14%, #333 28%, #fff 28%, #fff 42%, #333 42%, #333 56%, #fff 56%, #fff 70%, #333 70%, #333 84%, #fff 84%, #fff 100% );
                transition: height .2s, border-width 0s .2s, width 0s .2s;
            }

        button.print-button:hover {
            cursor: pointer;
        }

            button.print-button:hover .print-icon::before {
                height: 0px;
                transition: height .2s;
            }

            button.print-button:hover .print-icon::after {
                height: 120%;
                transition: height .2s .15s, border-width 0s .16s;
            }

        .pip {
            display: inline-block;
            margin: 10px 10px 0 0;
        }
    </style>
    <style>
        /* The container */
        .container_check {
            display: block;
            position: relative;
            padding-left: 35px;
            margin-bottom: 12px;
            cursor: pointer;
            font-size: 22px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

            /* Hide the browser's default checkbox */
            .container_check input {
                position: absolute;
                opacity: 0;
                cursor: pointer;
                height: 0;
                width: 0;
            }

        /* Create a custom checkbox */
        .checkmark {
            position: absolute;
            top: 0;
            left: 0;
            height: 25px;
            width: 25px;
            background-color: #eee;
        }

        /* On mouse-over, add a grey background color */
        .container_check:hover input ~ .checkmark {
            background-color: #ccc;
        }

        /* When the checkbox is checked, add a blue background */
        .container_check input:checked ~ .checkmark {
            background-color: #2196F3;
        }

        /* Create the checkmark/indicator (hidden when not checked) */
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
        }

        /* Show the checkmark when checked */
        .container_check input:checked ~ .checkmark:after {
            display: block;
        }

        /* Style the checkmark/indicator */
        .container_check .checkmark:after {
            left: 9px;
            top: 5px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 3px 3px 0;
            -webkit-transform: rotate(45deg);
            -ms-transform: rotate(45deg);
            transform: rotate(45deg);
        }
        input[type="checkbox"] {
            width: 35px;
            zoom: 2;
            padding: 2px;
            -webkit-appearance: checkbox;
        }
    </style>

</head>

<body>

    <div class="card mb-12">
        <div class="card-header">
            <i class="fa fa-table"></i> ตรวจสอบสถานะ
        </div>
        <div class="card-body">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Company.:</span>
                            <span>
                                <select id="_company" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;float:inherit;">
                                    <option value="0" disabled>Choose option</option>
                                    <option value="TAC" selected>TAC</option>
                                    <option value="AAC">AAC</option>
                                    <option value="OMP">OMP</option>
                                    <option value="ALL">ALL</option>
                                </select>
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>เลขทีใบคำขอ:</span>
                            <span>
                                <input type="text" id="_cliamno">
                            </span>
                        </div>
                    </div>
                    @*<div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>SlmCod:</span>
                                <select class="bar" id="slmcod"></select>



                            </div>
                        </div>*@




                </div>
                <div class="row">
                    @*<div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Customer:</span>
                                <span><input type="text" required id="_cusno"></span>
                            </div>
                        </div>*@
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Item No.:</span>
                            <span><input type="text" required id="_itemno"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Stk Group.:</span>
                            <span><select id="_stkgrp"></select></span>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Request start date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_statdate"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Request end date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_enddate"></span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">

                        </div>
                    </div>

                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Status.:</span>
                            <span>
                                <select id="_status" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;"></select>
                            </span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>สถานะสินค้าหลังตรวจสอบ:</span>
                            <span>
                                <select id="_statusclaimafter" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;"></select>
                            </span>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>สถานะรับตรจสอบสินค้า:</span>
                            <span>
                                <select id="_statusclaimdisplay" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;"></select>
                            </span>
                        </div>
                    </div>

                </div>
                @if (usertype == "1")
                {
                    <div class="row">
                        <!-- <div class="col-md-4" >
                             <div class="form-group">
                                 <span> <i class="fa fa-pencil"></i>CN/สินค้าทดแทน</span>
                                 <span>
                                     <select id="_proceedtofter" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;display:none;"></select>
                                 </span>
                             </div>
                         </div>-->
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Status Print .:</span>
                                <span>
                                    <select id="_statusprint" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;">
                                        <option value="2">เลือก Status Print</option>
                                        <option value="1">Y</option>
                                        <option value="0">N</option>
                                    </select>
                                </span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <button type="button" style="float: left;display:block;" id="_btnprintrepall" class="badge-primary"><i class="fa fa-print"></i>  พิมพ์แบบฟอร์มใบคำร้องขอชดเชยสินค้า</button>

                            </div>
                        </div>
                    </div>
                }
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <button type="button" class="btn btn-info" id="refresh">Refresh</button>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <button type="button" class="btn btn-success" id="_btnsearch">Search</button>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="form-group">
                            <button type="button" style="float: left;display:none;" id="_btnprint" class="badge-primary"><i class="fa fa-print"></i>  พิมพ์ใบสั่งรถไปรับของ</button>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card-body">
            <div id="fixed-table-container-1" class="fixed-table-container" style="z-index: 1;">
                <table>
                    <thead>
                        <tr>
                            <th>เลขที่ใบตรวจสอบ</th>
                            <th>Print</th>
                            <th>line no</th>
                            <th>Request date</th>
                            <th>Due date</th>
                            <th>Item No.</th>
                            <th>Description</th>
                            <th>UOM</th>
                            <th>Request Qty.</th>
                            <th>จำนวน<br />Tech 1 ตรวจสอบจริง.</th>
                            <th>จำนวน<br />Tech ส่งเคลม Supplier.</th>
                            <th>จำนวน<br />PM อนุมัติ.</th>
                            <th>ต้องการให้ดำเนินการ</th>
                            @*<th>สถานะเคลม</th>*@
                            <th>last update date</th>
                            <th>last update by</th>
                            <th>สถานะ<br /></th>
                            <th>สถานะ<br />รับสินค้า</th>

                            <th>สินค้าหลังตรวจสอบ</th>

                            @*<th>Edit</th>
                                <th>Tech staff</th>*@
                            <th>ยกเลิกตรวจสอบ</th>
                            <th>Tech1</th>
                            <th>Tech2</th>
                            <th>PM</th>
                            @*<th>Log</th>*@
                            <th>Tech รับสินค้า</th>
                            <th>BU Head </th>
                            <th>MD</th>
                           
                            <th>Status Print</th>
                            <th>Print By</th>

                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div id="fixed-table-container-2" class="fixed-table-container" style="display:none;z-index:1">
                <table>
                    <thead>
                        <tr>
                            <th>เลขที่ใบตรวจสอบ</th>
                            <th>Print</th>
                            <th>line no</th>
                            <th>Request date</th>
                            <th>Due date</th>
                            <th>Invoice No</th>
                            <th>Customer</th>
                            <th>Sales Man</th>
                            <th>Item No.</th>
                            <th>Description</th>
                            <th>UOM</th>
                            <th>Claim Qty.</th>
                            <th>Receive Qty.</th>
                            <th>ต้องการให้ดำเนินการ</th>
                            @*<th>สถานะเคลม</th>*@
                            <th>last update date</th>
                            <th>last update by</th>
                            <th>สถานะ</th>
                            <th>สถานะ<br />รับสินค้า</th>
                            @*<th>Claim<br /> supplier</th>*@
                            <th>สินค้าหลังตรวจสอบ</th>
                            <th>ยกเลิกตรวจสอบ</th>
                            @*<th>Edit</th>
                                <th>Tech staff</th>*@
                            <th>ตรวจสอบ<br />รับสินค้า</th>
                            <th>Tech1</th>
                            <th>Tech2</th>
                            <th>PM</th>
                            <th>CS</th>
                            <th>Log</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="row">
                <div class="col-md-4" id="allck" style="display:none">
                    <div class="form-group">
                        Select All <input type="checkbox" id="select_all" style="margin-top: -17px;" />
                    </div>
                </div>
            </div>
            <div id="fixed-table-container-3" class="fixed-table-container" style="display:none">
                <table>
                    <thead>
                        <tr>
                            <th>เลขที่เคลม</th>
                            <th>Print</th>
                            <th>line no</th>
                            <th>Request date</th>
                            <th>Due date</th>
                            <th>Item No.</th>
                            <th>Description</th>
                            <th>UOM</th>
                            <th>Request Qty.</th>
                            <th>จำนวน<br />Tech 1 ตรวจสอบจริง.</th>
                            <th>จำนวน<br />Tech ส่งเคลม Supplier.</th>
                            <th>จำนวน<br />PM อนุมัติ.</th>
                            <th>ต้องการให้ดำเนินการ</th>
                            @*<th>สถานะเคลม</th>*@
                            <th>last update date</th>
                            <th>last update by</th>
                            <th>สถานะ<br /></th>
                            <th>สถานะ<br />รับสินค้า</th>

                            <th>สินค้าหลังตรวจสอบ</th>

                            @*<th>Edit</th>
                                <th>Tech staff</th>*@

                            <th>Tech1</th>
                            <th>Tech2</th>
                            <th>PM</th>
                            <th>Log</th>
                            <th>รับสินค้า</th>


                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div class="col-md-12">
                <div class="card-footer small ">
                    <div class="row">

                    </div>
                    <div id="displx" style="display:none">
                        <div class="form-group">
                            <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย:</span>
                            <span>
                                <input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />
                            </span>
                        </div>
                        <button id="_updateafterprodate">บันทึกวันที่ทำลาย</button>
                    </div>
                </div>

            </div>
            <div class="card mb-12">
                <div class="card-header">
                    <i class="fa fa-table"></i>รายละเอียดสินค้า<li id="clickme" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="col-md-12" id="myDIV">
                    <div><span id="Nospankey" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                    <div><span id="subNospan" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Item No.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_itemnotext"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Description:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_description"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">

                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Uom:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_uom"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Stock Group:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_stkgup"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Stock Group Name:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="stkgrpnam"></span>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>แผนก Dep :</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimsec"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Product Name</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="prdnam"></span>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Claim Qty.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimqty"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-clock-o"></i>Location</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_location"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-sm-12">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สาเหตุการ Claim:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="causeclaim"></span>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> ดำเนินการ:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_proceedto"></span>

                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะรับของ:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_statusclaim"></span>

                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="form-group">

                        </div>
                    </div>
                    <div class="col-xs-6">
                        <span class="fa fa-image">Video:</span>
                        <div class="py-4" id="appvideosales">


                        </div>

                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span class="fa fa-image">Product Image:</span>

                                </div>
                            </div>
                        </div>
                        <div class="row" id="boximage">

                        </div>
                    </div>
                </div>






                <div class="card-header">
                    <i class="fa fa-table"></i>Technic 1 : วิเคราะห์สินค้า <li id="clickme3" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV3" style="display:none">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ช่างที่รับผิดชอบ:</span>
                                <span>
                                    @*<input type="text" id="_tecwork" />*@
                                    <select class="bar" id="_tecwork"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> จำนวนที่ตรวจสอบจริง:</span>
                                <span>
                                    <input type="number" id="_tecrevqty" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Shelf Location:</span>
                                <span>
                                    <input class="bar" id="_shelfloctec">

                                </span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> บันทึกโดย:</span>
                                <span>

                                    <input type="text" id="_nametec1" disabled="disabled" style="background: border-box border-box; color: blue;" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่วิเคราะห์ปัญหา:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_anlysdatetec1" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ดำเนินการ:</span>
                                <span>
                                    <select class="bar" id="_perfromtec1"></select>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <span><textarea rows="6" cols="100" id="remaketec1" placeholder="ผลการตรวจสอบ"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">


                            </div>
                        </div>
                    </div>

                </div>

                <div class="card-header">
                    <i class="fa fa-table"></i>Technic 2 : ผลการพิจารณา <li id="clickme4" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV4" style="display:none">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class='fa fa-user'></i> รับรองการตรวจสอบโดย:</span>

                                    <span>
                                        <input type="text" id="_name2tec" disabled="disabled" style="background: border-box border-box; color: blue;" />

                                    </span>
                                </div>
                            </div>

                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-user"></i> จำนวนรับเคลม Supplier:</span>
                                    <span>
                                        <input type="number" id="_tecrevqty2" />

                                    </span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-user"></i> จำนวนของเสีย(ส่งเคลมSupplierไม่ได้):</span>
                                    <span>
                                        <input type="number" id="_tecrevqtybad" />

                                    </span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-user"></i> จำนวนสินค้าใช้งานได้:</span>
                                    <span>
                                        <input type="number" id="_tecrevqtywd" />

                                    </span>
                                </div>
                            </div>


                        </div>

                        <span><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />
                        <div class="row">

                            <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <form>
                                        <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="atech">Specific<br>
                                        <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="ctech">Good Will<br>

                                    </form>

                                </div>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group">
                                    <form>
                                        <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="btech">Manufacturing Defect<br>
                                        <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="dtech">Wrong Using<br>

                                    </form>

                                </div>
                            </div>

                            <div class="col-md-2">
                                <div class="form-group">
                                    <form>
                                        <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="etech">Handing Damage<br>
                                        <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="ftech">Other<br>

                                    </form>

                                </div>
                            </div>
                            <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> วันที่เทคนิคพิจารณา:</span>
                                    <span>
                                        <input type="date" data-date-format="dd/mm/yy" id="_appdatetec" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i> สถานะ:</span>
                                    <span>
                                        <select class="bar" id="_apprvststus"></select>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i>สถานะการวิเคราะห์:</span>
                                    <span>
                                        <select class="bar" id="_anlysstatustec1"></select>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการ:</span>
                                    <span>
                                        <select class="bar" id="_anlysafterprotec1"></select>
                                    </span>
                                </div>
                            </div>
                            <div id="displdisplay" style="display:none">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย:</span>
                                    <span>
                                        <input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1display" />
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <span><textarea rows="6" cols="100" id="remaketec2" placeholder="หมายเหตุ"></textarea></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">


                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="card-header">
                    <i class="fa fa-table"></i>Product Manager Approval <li id="clickme5" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>

                <div class="card-body" id="myDIV5" style="display:none">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>จำนวนที่รับเคลม</span>
                                <span>

                                    <input type="number" id="_pmqty" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> Product Manager: </span>
                                <span>
                                    <select class="bar" id="_PM"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่PM พิจารณา:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_pmdate" />
                                </span>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-sort-down"></i>สถานะอนุมัติเคลม</span>
                                <span>
                                    <select class="bar" id="_pmtstus"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotecpm"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> เปลี่ยนสินค้าเบอร์ใหม่ทดแทน P/N :</span>
                                <span>
                                    <input type="text" id="_pmnewpn" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> ต้องให้คลังดำเนินการ:</span>
                                <span>
                                    <input type="text" id="_pmafterapp" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12">
                        <span> <i class="fa fa-pencil"></i> ต้องให้คลังดำเนินการ :</span>
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-5">
                                    <input type="checkbox" name="optionpm1" value="1" style="zoom: 2.5;margin-left: -10px;" id="optionpm1">
                                    <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนไปขายได้ปกติ</span>
                                </div>
                                <div class="col-md-6">
                                    <span>ระบุจำนวนโอนเข้าพื้นที่ขายปกติ(Ready for Sale)</span> <input type="number" name="vehicle" min="0" id="optionpmtext1" disabled="disabled">
                                </div>

                            </div>

                        </div>
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-5">
                                    <input type="checkbox" name="optionpm2" value="2" style="zoom: 2.5;margin-left: -10px;" id="optionpm2">
                                    <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนไปขายตามสภาพ</span>
                                </div>
                                <div class="col-md-6">
                                    <span>ระบุจำนวน โอนเข้า Clearance</span> <input type="number" name="vehicle" min="0" id="optionpmtext2" disabled="disabled">
                                </div>

                            </div>

                        </div>
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-5">
                                    <input type="checkbox" name="optionpm3" value="3" style="zoom: 2.5;margin-left: -10px;" id="optionpm3">
                                    <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนออกไปรอซ่อมแซ่มกล่อง หรือ รอเปลี่ยนกล่อง</span>
                                </div>
                                <div class="col-md-6">
                                    <span>ระบุจำนวน โอนเข้า Rework</span>  <input type="number" name="vehicle" min="0" id="optionpmtext3" disabled="disabled">
                                </div>

                            </div>

                        </div>

                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-5">
                                    <input type="checkbox" name="optionpm4" value="4" style="zoom: 2.5;margin-left: -10px;" id="optionpm4">
                                    <span style="margin: -30px 41px 32px;position: absolute;">PM ให้โอนออกไปรอทำลาย</span>
                                </div>
                                <div class="col-md-4">
                                    <span>ระบุจำนวน โอนเข้า DM</span>  <input type="number" name="vehicle" min="0" id="optionpmtext4" disabled="disabled">
                                </div>

                            </div>

                        </div>
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-5">
                                    <input type="checkbox" name="optionpm5" value="5" style="zoom: 2.5;margin-left: -10px;" id="optionpm5">
                                    <span style="margin: -30px 41px 32px;position: absolute;">อื่นๆ</span>
                                </div>
                                <div class="col-md-6">
                                    <span>ระบุสิ่งที่ต้องการ(รับได้50ตัวอักษร)</span>   <input type="text" name="vehicle" id="optionpmtext5" maxlength="50" disabled="disabled">
                                </div>

                            </div>

                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <span> <i class="fa fa-pencil"></i> หมายเหตุเพิ่มเติม:</span>
                            <div class="form-group">

                                <span><textarea rows="6" cols="100" id="remakepm"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <button class="btn-info" id="_btnsaveapprove" style="display:none">บันทึกการอนุมัติ</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="sidbu" style="display:block">
                    <div class="card-header">
                        <i class="fa fa-table"></i>Head of PM พิจารณา โอนย้ายเข้า Damange <li id="clickme7" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                    </div>
                    <div class="col-md-12" id="myDIV7" style="display:block">

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i>จำนวนขออนุมัติโอนย้ายเข้า Damange</span>
                                    <span>

                                        <input type="number" id="_dmqty" disabled="disabled" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">

                                </div>
                            </div>
                        </div>

                        <div class="row">
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-sort-down"></i>สถานะ พิจารณา โอนย้ายเข้า Damange</span>
                                    <span>

                                        <select class="bar" id="_statusbu" disabled="disabled"></select>
                                        <span id="worrejbu" style="color: red;">

                                        </span>
                                    </span>

                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">

                                    <span id="worrejbu">

                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-sort-down"></i> วันที่ Bu พิจารณา:</span>
                                    <span>
                                        <input type="text" id="_budate" disabled="disabled">
                                    </span>
                                </div>
                            </div>

                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <span> <i class="fa fa-pencil"></i> หมายเหตุเพิ่มเติม:</span>
                                <div class="form-group">

                                    <span><textarea rows="6" cols="100" id="remakebu" maxlength="500" placeholder="หมายเหตุ" disabled="disabled"></textarea></span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="sidmd" style="display:block">
                    <div class="card-header">
                        <i class="fa fa-table"></i>Managing Director พิจารณา โอนย้ายเข้า Damange <li id="clickme8" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                    </div>
                    <div class="col-md-12" id="myDIV8" style="display:block">

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i>จำนวนขออนุมัติโอนย้ายเข้า Damange</span>
                                    <span>

                                        <input type="number" id="_dmqtymd" disabled="disabled" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">

                                </div>
                            </div>
                        </div>

                        <div class="row">
                        </div>

                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-sort-down"></i>สถานะ พิจารณา โอนย้ายเข้า Damange</span>
                                    <span>

                                        <select class="bar" id="_statusmd" disabled="disabled"></select>
                                        <span id="worrejmd" style="color: red;">

                                        </span>
                                    </span>

                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">

                                    <span id="worrejmd">

                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-sort-down"></i> วันที่ MD พิจารณา:</span>
                                    <span>
                                        <input type="text"  id="_mddate" disabled="disabled">
                                    </span>
                                </div>
                            </div>

                        </div>


                        <div class="row">
                            <div class="col-md-6">
                                <span> <i class="fa fa-pencil"></i> หมายเหตุเพิ่มเติม:</span>
                                <div class="form-group">

                                    <span><textarea rows="6" cols="100" id="remakemd" maxlength="500" placeholder="หมายเหตุ" disabled="disabled"></textarea></span>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
           

                <div class="card-header">
                    <i class="fa fa-table"></i>Admin Warehouse: <li id="clickme6" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV6" style="display:none">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-user"></i>ดำเนินงานโดย:</span>
                                    <span>
                                        <input type="text" id="closeworkwh" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> วันที่ดำเนินงานเรียบ:</span>
                                    <span>

                                        <input type="date" id="closeworkdatewh" />
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> เหตุผลเพิ่มเติม:</span>
                                    <span><textarea rows="6" cols="100" id="closeworkremakewh"></textarea></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <button class="btn-info" id="_btnupdatewhadmin">บันทึกจบงาน</button>
                                </div>
                            </div>
                          
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">


                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-header">
                    <i class="fa fa-table"></i>Admin Tech1 ตรวจสอบรับสินค้า: <li id="clickme2" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV2" style="display:none">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i> สถานะการรับสินค้า:</span>
                                    <span>
                                        <select class="bar" id="_proceedtotec"></select>
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-user"></i> ผู้รับสินค้าเคลม:</span>
                                    <span>
                                        <input type="text" id="_rcvbyte" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> วันที่รับสินค้าเคลม:</span>
                                    <span>

                                        <input type="date" id="_rcvdatetec" />
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-pencil"></i> จำนวนที่รับเคลม:</span>
                                    <span>

                                        <input type="text" id="_rvqtytecadmin" />
                                    </span>
                                </div>
                            </div>

                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> Claim date:</span>
                                    <span>
                                        <input type="text" id="_clmdatetec" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-calendar"></i> Due date:</span>
                                    <span>
                                        <input type="text" id="_duedatetec" />
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">
                                    @*<span> <i class="fa fa-pencil"></i> UOM:</span>
                                        <span>
                                            <input type="text" id="_rcuom" />
                                        </span>*@
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <span><textarea rows="6" cols="100" id="causeclaimtec" placeholder="หมายเหตุ รับสินค้า"></textarea></span>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="form-group">
                                    <span> <i class="fa fa-user"></i> Admin:</span>
                                    <span>
                                        <input type="text" id="_admintec" style="background: border-box border-box; color: blue;" disabled="disabled">
                                    </span>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">

                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="form-group">

                                </div>
                            </div>

                            <div class="col-md-3">
                                <div class="form-group">
                                    @*<span> <i class="fa fa-calendar"></i> วันที่ตรวจสอบ:</span>
                                                        <span>
                                            <input type="date" data-date-format="dd/mm/yy" id="_datechecktec" />
                                        </span>*@
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">


                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="card-header">
                    <i class="fa fa-table"></i> Admin Tech1 : <li id="clickme1" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV1">
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <span><textarea rows="6" cols="100" id="updateremaketec1" placeholder="comment"></textarea></span>
                                </div>
                                <button class="btn-info" id="_btnupdateremaketec1">บันทึก</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Logout Modal-->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" href="~/Account/LogIn">Logout</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="myModalsupplier" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Warranty claim supplier</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="overflow-x:scroll">
                    <div id="textAlertWarning">Some text in the modal.</div>
                    <span id="supno" style="display:none"></span><span id="supno_sub" style="display:none"></span>
                    <br /><span>  <select id="_statusClaimsupplier" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;"></select></span>
                    <br /><span> <i class="fa fa-pencil"></i>เลขที่เคลมจากSupplier:</span>
                    <span><input type="text" required id="_supplierno"></span>
                    <input type='file' id="FileUpload1" /><span id="ststus1" style="color: brown; font-size: larger;"></span>
                    <input type="button" id="btnUpload1" value="Upload Files" style="display:none" /><br />

                    <button type="button" class="btn btn-success" id="_btnsupplier">บันทึกรายการเคลมจากSupplier</button>

                    <br /><br /><button type="button" class="btn btn-success" id="_dowloadpdf"> download pdf</button>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modalsuccess -->
    <div class="modal fade" id="myModalSucces" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Succes</strong>
                <div class="modal-body">
                    <div id="textAlertSucces">Save success</div>
                </div>

            </div>
        </div>
    </div>
    <!-- EndModalsuccess -->
    <!-- ModalWarning -->
    <div id="myModalWarning" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog" role="document">

            <div class="alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong>
                <div class="modal-body">
                    <div id="textAlertWarningmes">Some text in the modal.</div>
                </div>

            </div>
        </div>
    </div>
    <div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    ยืนยันยกเลิกเคลม
                </div>
                <div class="modal-body">
                    คุณต้องการยกเลิกเคลมหรือไม่
                </div>
                <div class="modal-footer">


                    <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="button" id="del" class="btn btn-danger btn-ok" data-dismiss="modal">ยกเลิกเคลม</button>
                </div>
            </div>
        </div>

    </div>

    <div class="modal fade" id="modalconfirm" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"></h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">คุณต้องการตรวจสอบ&พิจาราณหรือไม่</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" id="linkdetail">OK</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalconfirmdate" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"></h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">คุณต้องการบันทึกวันที่ทำลายสินค้าหรือไม่</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal" id="linkmodelsavenodate">NO</button>
                    <a class="btn btn-primary" id="linkmodelsavedate">OK</a>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="modalconfirmProcess" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"></h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">คุณต้องการตรวจสอบ & พิจารณาหรือไม่</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" id="linkprocess">OK</a>
                </div>
            </div>
        </div>
    </div>
    <div id="myModalzoom" class="modalx" style="z-index: 11;">

        <!-- The Close Button -->
        @*<span class="close">&times;</span>*@

        <!-- Modal Content (The Image) -->
        <img class="modal-contentx" id="img01">
        <div class="modal-contentx" id="img01" style="background-color: #191919;"><button class="btn btn-secondary" type="button" data-dismiss="modal" id="closeimg" style="margin-left: 91%;">Close</button></div>
        <!-- Modal Caption (Image Text) -->
        <div id="caption"></div>

    </div>
    <div class="modal" id="myModalconfrimprint" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Print แบบฟอร์ม</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>เลือก แบบฟอร์มที่ท่านต้องการ Print</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="refromreqest">ใบคำขอร้องชดเชยสินค้า</button>
                    <button type="button" class="btn btn-secondary" id="refrompredeli">ใบแจ้งตรวจสอบสินค้า</button>
                    <button class="btn btn-secondary" type="button" id="btnprintlabal">Re Print Lable</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal hide fade" id="myModalloadingfadex">
        <div class="modal-header">
            @*<a class="close" data-dismiss="modal">×</a>
                <h3>Modal header</h3>*@
        </div>
        <div class="modal-body">
            <p>loading…</p>
        </div>
        <div class="modal-footer">
            @*<a href="#" class="btn">Close</a>
                <a href="#" class="btn btn-primary">Save changes</a>*@
        </div>
    </div>
    <input type="hidden" id="_uderlogin" value="@user" />
    <input type="hidden" id="_udertype" value="@usertype" />

    <script type="text/javascript">
        $("#_itemno").autocomplete({
            selectFirst: true,
            autoFocus: true,
            timeout: 100000,
            source: function (request, response) {
                var param = {
                    Name: $('#_itemno').val(),
                    XvalCompany: $("#_company").val()
                };
                $.ajax({
                    url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                    data: JSON.stringify(param),
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.slice(0, 20), function (item) {
                            return {
                                value: item
                            }
                        }))
                    },
                    error: function (XMLhttpsRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });


            },

            minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
        });
        $("#_cusno").autocomplete({
            selectFirst: true,
            autoFocus: true,
            source: function (request, response) {
                var param = { Name: $('#_cusno').val(), Slm: $('#slmcod').val() };
                $.ajax({
                    url: '@Url.Action("GetdateCusCode", "GetdataCenter")',
                    data: JSON.stringify(param),
                    dataType: "json",
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataFilter: function (data) { return data; },
                    success: function (data) {
                        response($.map(data.slice(0, 50), function (item) {
                            return {
                                value: item
                            }
                        }))
                    },
                    error: function (XMLhttpsRequest, textStatus, errorThrown) {
                        alert(textStatus);
                    }
                });
            },
            minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
        });

        $(document).ready(function () {
            var udertype = $("#_udertype").val();
            var Userlogin = $("#_uderlogin").val();
            if (udertype == "4") {
                $.ajax({
                    url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                    data: {
                        Usertype: udertype,
                        Userlogin: Userlogin
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data)
                        $("#tile").text(data.Getdata[0].val.Status)
                        $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                        //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                        $("#counttec1").css("display", "none");
                    }
                });
            } else if (udertype == "5") {
                $.ajax({
                    url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                    data: {
                        Usertype: udertype,
                        Userlogin: Userlogin
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data)
                        $("#tile").text(data.Getdata[0].val.Status)
                        $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                        //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                        $("#counttec1").css("display", "none");
                    }
                });
            }
            if (udertype == "1" || udertype == "2") {
               
                $("#_btnupdateremaketec1").css("display", "none");
            } else {
                $("#_btnupdateremaketec1").css("display", "none");
            }
            $('#Sccreateclaim').css("background-color", "");
            $('#ScrProcess_Sc').css("background-color", "");
            $('#SrcCheckstatus_Sc').css("background-color", "rgb(9, 183, 9)");
            $('#SrcInvoiceHistory_Sc').css("background-color", "");
            // var fixedTable4 = fixTable(document.getElementById('fixed-table-container-4'));
            $("#clickme").on("click", function (e) {

                myFunction();
            });
            function myFunction() {
                var x = document.getElementById("myDIV");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }

            $("#clickme1").on("click", function (e) {

                myFunction1();
            });
            function myFunction1() {
                var x = document.getElementById("myDIV1");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }

            $("#clickme2").on("click", function (e) {

                myFunction2();
            });
            function myFunction2() {
                var x = document.getElementById("myDIV2");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme3").on("click", function (e) {

                myFunction3();
            });
            function myFunction3() {
                var x = document.getElementById("myDIV3");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme4").on("click", function (e) {

                myFunction4();
            });
            function myFunction4() {
                var x = document.getElementById("myDIV4");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme5").on("click", function (e) {

                myFunction5();
            });
            function myFunction5() {
                var x = document.getElementById("myDIV5");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme6").on("click", function (e) {

                myFunction6();
            });
            function myFunction6() {
                var x = document.getElementById("myDIV6");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme7").on("click", function (e) {

                myFunction7();
            });
            function myFunction7() {
                var x = document.getElementById("myDIV7");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme8").on("click", function (e) {

                myFunction8();
            });
            function myFunction8() {
                var x = document.getElementById("myDIV8");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            ///fa fa-calendar///
            var today = new Date();
            $('#_scrapdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
            var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
            var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));

            $.ajax({
                url: '@Url.Action("Getdatastkgrp", "GetdataCenter")',
                data: {
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)

                    var select = $("#_stkgrp");
                    select.children().remove();
                    select.append($("<option>").val("ALL").text("ALL"));
                    $(data).each(function (index, item) {

                        select.append($("<option>").val(item.STKGRP).text(item.STKGRP + "/" + item.GRPNAM));
                    });
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 31
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var selectudertype = $("#_udertype").val();
                    //  alert(selectudertype)
                    var select = $("#_status");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    if (selectudertype == "1") {
                        $("#_status").val("1");

                    } else if (selectudertype == "2") {
                        $("#_status").val("2");

                    } else if (selectudertype == "4") {
                        $("#_status").val("1");

                    } else if (selectudertype == "5") {
                        $("#_status").val("1");

                    } else if (selectudertype == "3") {
                        $("#_status").val("1");

                    } else if (selectudertype == "10") {
                        $("#_status").val("1");

                    } else if (selectudertype == "6") {
                        $("#_status").val("1");

                    }

                }

            });

            var UserId = $("#_uderlogin").val();
            $.ajax({
                url: '@Url.Action("GetdataUsetype", "GetdataCenter")',
                data: { User: UserId },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data);
                    $("#_udertype").val(data.Usetpye);
                }
            });
            $("#requestby").val(UserId);


            //Technician//
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 12
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_tecwork");
                    select.children().remove();
                    select.append($("<option>").val("0").text("เลือก ช่างที่รับผิดชอบ"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            var chkststus = $("#_udertype").val();
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 34
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_statusclaimdisplay");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("สถานะรับของเคลม"));
                    // if (chkststus == "1" || chkststus == "2") {
                    $(data).each(function (index, item) {
                        //  if (item.CODE == "1" || item.CODE == "2" || item.CODE == "3") {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                        //  }
                    });
                    // }else if(chkststus == "4" || chkststus == "5"){

                    //  $(data).each(function (index, item) {
                    //  if (item.CODE == "2" || item.CODE == "4") {
                    //       select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    //   }
                    // });
                    // }
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 33
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    var select = $("#_anlysafterprotec1");

                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    var select = $("#_anlysafterprotecpm");

                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 10
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_statusClaimsupplier");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            var waitingDialog = waitingDialog || (function ($) {
                'use strict';

                // Creating modal dialog's DOM
                var $dialog = $(
                    '<div class="modal fade"  id="myModalloadingfade" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-hidden="true" style="padding-top:15%; overflow-y:visible;">' +
                    '<div class="modal-dialog modal-m">' +
                    '<div class="modal-content">' +
                        '<div class="modal-header"><h3 style="margin:0;"></h3></div>' +
                        '<div class="modal-body">' +
                            '<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>' +
                        '</div>' +
                    '</div></div></div>');

                return {

                    show: function (message, options) {
                        // Assigning defaults
                        if (typeof options === 'undefined') {
                            options = {};
                        }
                        if (typeof message === 'undefined') {
                            message = 'Loading';
                        }
                        var settings = $.extend({
                            dialogSize: 'm',
                            progressType: '',
                            onHide: null // This callback runs after the dialog was hidden
                        }, options);

                        // Configuring dialog
                        $dialog.find('.modal-dialog').attr('class', 'modal-dialog').addClass('modal-' + settings.dialogSize);
                        $dialog.find('.progress-bar').attr('class', 'progress-bar');
                        if (settings.progressType) {
                            $dialog.find('.progress-bar').addClass('progress-bar-' + settings.progressType);
                        }
                        $dialog.find('h3').text(message);
                        // Adding callbacks
                        if (typeof settings.onHide === 'function') {
                            $dialog.off('hidden.bs.modal').on('hidden.bs.modal', function (e) {
                                settings.onHide.call($dialog);
                            });
                        }
                        // Opening dialog
                        $dialog.modal();
                    },
                    /**
                     * Closes dialog
                     */
                    hide: function () {
                        $dialog.modal('hide');
                    }

                };

            })(jQuery);
            function splitval(_val) {
                var _splito = "";
                _splito = _val.split('|');

                return _splito[0];
            }

            $('#_tecwork').change(function () {

                var _valtec = $(this).val();
                $.ajax({
                    url: '@Url.Action("GetTechLocation", "GetdataCenter")',
                    data: {
                        Name: _valtec
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        var select = $("#_shelfloctec");
                        select.children().remove();
                        select.append($("<option>").val("0").text("เลือก Shelf Location"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.DefineCode).text(item.Location));
                        });

                    }
                });
            });
            $("#_statusclaimdisplay").change(function () {
                var cktyp = $("#_udertype").val();
                var statusrec = $(this).val();
                var status = $("#_status").val();
                if (cktyp == "1") {
                    if (status == "1" && statusrec != "1" && statusrec != "0" && statusrec != "4") {
                        // $("#_btnprint").css("display", "block");
                    } else {
                        $("#_btnprint").css("display", "none");
                    }
                } else {
                    $("#_btnprint").css("display", "none");
                }
            });
            $("#_btnsearch").click(function () {

                var claimnokey = $("#_cliamno").val();
                var company = $("#_company").val();
                var status = $("#_status").val();

                var statusrec = $("#_statusclaimdisplay").val();

                var itemno = $("#_itemno").val();
                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }


                var statdate = $("#_statdate").val();
                var enddate = $("#_enddate").val();
                var statusclaimafter = $("#_statusclaimafter").val();
                var cktyp = $("#_udertype").val();
                var stkgrp = $("#_stkgrp").val();
                // var proceedtofter = $("#_proceedtofter").val("0");
                var proceedtofter = "0";
                var statusprint = $("#_statusprint").val();
                if (cktyp == "1") {
                    if (status == "1" && statusrec != "1" && statusrec != "0" && statusrec != "4") {

                        $("#_btnprint").css("display", "block");
                        GetClimline(claimnokey, company, status, itemno, statdate, enddate, statusrec, statusclaimafter, stkgrp, proceedtofter, statusprint)
                    } else {
                        $("#_btnprint").css("display", "none");
                        GetClimline(claimnokey, company, status, itemno, statdate, enddate, statusrec, statusclaimafter, stkgrp, proceedtofter, statusprint)
                    }
                    if (statusclaimafter == "1") {
                        // $("#modalconfirmdate").modal();
                        // $("#displ").css("display", "block");
                    } else {
                        //  $("#displ").css("display", "none");
                        // GetClimline(claimnokey, company, status, cusno, itemno, statdate, enddate, slmcod, statusrec, statusclaimafter)
                    }
                } else {
                    //alert(slmcod)
                    GetClimline(claimnokey, company, status, itemno, statdate, enddate, statusrec, statusclaimafter, stkgrp, "0", "2")

                }
            });
            function dateafterprint() {
                var claimnokey = $("#_cliamno").val();
                var company = $("#_company").val();
                var status = $("#_status").val();
                var cusno = $("#_cusno").val();
                var statusrec = $("#_statusclaimdisplay").val();
                if (cusno != "") {
                    cusno = splitval(cusno);
                } else {
                    cusno = "";
                }
                var itemno = $("#_itemno").val();
                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                var slmcod = $("#slmcod").val();

                var statdate = $("#_statdate").val();
                var enddate = $("#_enddate").val();
                var statusclaimafter = $("#_statusclaimafter").val();
                var cktyp = $("#_udertype").val();
                var stkgrp = $("#_stkgrp").val();
                GetClimline(claimnokey, company, status, itemno, statdate, enddate, statusrec, "0", stkgrp)
            }
            $("#_btnprint").click(function () {
                var _user = $("#_uderlogin").val();
                var _status = $("#_status").val();
                var _statusclaimdis = $("#_statusclaimdisplay").val();
                var strin = "";
                // if (_status == "1" && _statusclaimdis != "1") {
                var data = new Array();
                $('#fixed-table-container-1 tr').each(function () {
                    var Id = $(this).find("td").eq(0).html();
                    var SubId = $(this).find("td").eq(2).html();
                    var ItemList = {
                        req_no: Id,
                        clm_no_sub: SubId,
                        user: _user

                    };
                    if (Id != undefined) {
                        strin += Id + ",";
                        data.push(ItemList);
                    }


                });
                var DataSend = JSON.stringify(data);
                // console.log(data.length);
                //  console.log(data);
                if (data.length == 0) {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณากด Search เลือกข้อมูลที่ต้องการพิมพ์");
                    $("#myModalWarning").modal();
                    return false;
                }
                //console.log(strin);
                if (strin != "") {
                    $.ajax({
                        url: '@Url.Action("Updatercvstatusprocess", "Checkstatus_Sc")',
                        data: {
                            DataSend: DataSend
                            //DataSend: ""
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data);
                            if (data = "true") {
                                //alert("xxxx");
                                var wi = window.open("../Report/frmRequestClaim.aspx?ClmNUM=" + btoa(strin));
                                wi.focus();

                                dateafterprint()
                            }
                        }
                    });
                } else {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณากด Search เลือกข้อมูลที่ต้องการพิมพ์");
                    $("#myModalWarning").modal();
                    return false;
                }
            });
            $("#linkmodelsavenodate").click(function () {
                $('#fixed-table-container-3 tbody:last-child').html("");
                $('#fixed-table-container-3').css("display", "none");
                $('#allck').css("display", "none");
                var claimnokey = $("#_cliamno").val();
                var company = $("#_company").val();
                var status = $("#_status").val();
                var cusno = $("#_cusno").val();
                var statusrec = $("#_statusclaimdisplay").val();
                if (cusno != "") {
                    cusno = splitval(cusno);
                } else {
                    cusno = "";
                }
                var itemno = $("#_itemno").val();
                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                var slmcod = $("#slmcod").val();
                var statdate = $("#_statdate").val();
                var enddate = $("#_enddate").val();
                var statusclaimafter = $("#_statusclaimafter").val();
                var cktyp = $("#_udertype").val();
                var stkgrp = $("#_stkgrp").val();
                GetClimline(claimnokey, company, status, itemno, statdate, enddate, statusrec, statusclaimafter, stkgrp)
                $("#displ").css("display", "none");
            });
            $("#linkmodelsavedate").click(function () {
                $('#fixed-table-container-1 tbody:last-child').html("");
                $('#fixed-table-container-2 tbody:last-child').html("");
                $('#fixed-table-container-1').css("display", "none");
                $('#fixed-table-container-2').css("display", "none");
                $('#allck').css("display", "block");
                $("#modalconfirmdate").modal('hide');
                var claimnokey = $("#_cliamno").val();
                var company = $("#_company").val();
                var status = $("#_status").val();
                var cusno = $("#_cusno").val();
                var statusrec = $("#_statusclaimdisplay").val();
                if (cusno != "") {
                    cusno = splitval(cusno);
                } else {
                    cusno = "";
                }
                var itemno = $("#_itemno").val();
                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                var slmcod = $("#slmcod").val();
                var statdate = $("#_statdate").val();
                var enddate = $("#_enddate").val();
                var statusclaimafter = $("#_statusclaimafter").val();
                var cktyp = $("#_udertype").val();
                var stkgrp = $("#_stkgrp").val();
                GetClimlineafterprocess(claimnokey, company, "0", itemno, statdate, enddate, statusrec, statusclaimafter, stkgrp)
                $("#displ").css("display", "none");
            });
            $('#select_all').click(function (event) {
                if (this.checked) {
                    // Iterate each checkbox
                    $(':checkbox').each(function () {
                        this.checked = true;
                    });
                }
                else {
                    $(':checkbox').each(function () {
                        this.checked = false;
                    });
                }
            });
            function GetClimlineafterprocess(claimnokey, company, status, itemno, statdate, enddate, statusrec, statusclaimafter) {
                // var valclim = $("#searchclaimno").val();
                var _user = $("#_uderlogin").val();
               // alert(_user)
                $.ajax({
                    url: '@Url.Action("GetdataUsetype", "GetdataCenter")',
                    data: { User: _user },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        $("#_udertype").val(data.Usetpye);
                    }
                });
                var valclim = claimnokey;
                var valcompany = company;
                var valstatus = status;
                var valcusno = cusno;
                var valitemno = itemno;
                var valstatdate = statdate;
                var valenddate = enddate;
                var valslm = "";
                var cktyp = $("#_udertype").val();
                if (cktyp != "4" || cktyp != "3" || cktyp != "5") {
                    valslm = "ALL";
                } else {
                    valslm = slmcod
                }
              //  alert(cktyp)
                // waitingDialog.show();
                $.ajax({
                    url: '@Url.Action("GetClimcheckdata", "Checkstatus_Sc")',
                    data: {
                        inCLM_ID: valclim,
                        incompany: valcompany,
                        instatus: valstatus,
                        incusno: valcusno,
                        initemno: valitemno,
                        instatdate: valstatdate,
                        inenddate: valenddate,
                        insales: valslm,
                        instatusrec: statusrec,
                        instatusclaimafter: statusclaimafter,
                        inuser: _user,
                        intype: cktyp
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // waitingDialog.hide();
                        $('#myModalloadingfade').modal('hide');
                        // $('table  tbody:last-child').html("");
                        if (data.Getdata.length > 0) {
                            //waitingDialog.hide();
                            $('#myModalloadingfade').modal('hide');
                            var SubmithtmlPage = '';
                            var ADMIN_ANLYS_STATUS = '';
                            var TECH1_PROCESS_STATUS = '';
                            var TECH2_PROCESS_STATUS = '';
                            var TECH2_ANLYS_STATUS = '';
                            var PM_PROCESS_STATUS = '';
                            var CLM_STATUS = '';

                            $("#fixed-table-container-3").css("display", "block");
                            $("#fixed-table-container-2").css("display", "none");
                            $("#fixed-table-container-1").css("display", "none");
                            $('#fixed-table-container-3 tbody:last-child').html("");
                            for (var i = 0; i < data.Getdata.length; i++) {
                                ADMIN_ANLYS_STATUS = data.Getdata[i].val.ADMIN_ANLYS_STATUS;
                                TECH1_PROCESS_STATUS = data.Getdata[i].val.TECH1_PROCESS_STATUS;
                                TECH2_PROCESS_STATUS = data.Getdata[i].val.TECH2_PROCESS_STATUS;
                                TECH2_ANLYS_STATUS = data.Getdata[i].val.TECH2_ANLYS_STATUS;
                                PM_PROCESS_STATUS = data.Getdata[i].val.PM_PROCESS_STATUS;
                                CLM_STATUS = data.Getdata[i].val.CLM_STATUS;


                                SubmithtmlPage = '<tr fax="1" foc="' + data.Getdata[i].val.CLM_FOC + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '" supstatus="' + data.Getdata[i].val.CLM_FRMSUP_STATUS + '"supno="' + data.Getdata[i].val.CLM_FRMSUP_NO + '" supdate="' + data.Getdata[i].val.CLM_FRMSUP_DATE + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" >';

                                SubmithtmlPage += '<td  foc="' + data.Getdata[i].val.CLM_FOC + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" company="' + data.Getdata[i].val.CLM_COMPANY + '" claimno="' + data.Getdata[i].val.REQ_NO + '"  claimsupno="' + data.Getdata[i].val.CLM_NO_SUB + '"  invoiceno="' + data.Getdata[i].val.CLM_INVNO + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" cuscod="' + data.Getdata[i].val.Customer + '" itemno="' + data.Getdata[i].val.STKCOD + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '" id="_btnview1" style="cursor: pointer;color: darkorchid;text-decoration: underline;">' + data.Getdata[i].val.REQ_NO + '</td>';
                                SubmithtmlPage += '<td style="text-align: center;">  <button type="button" id="_btnPrintclim" class="print-button"   req_no="' + data.Getdata[i].val.REQ_NO + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '" statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '"><span class="print-icon"></span></button></td>';
                                SubmithtmlPage += '<td><span> <input type="checkbox" class="chksave" claimno="' + data.Getdata[i].val.REQ_NO + '"  claimsupno="' + data.Getdata[i].val.CLM_NO_SUB + '"/></span></td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.REQ_DATE + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_DUEDATE + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_INVNO + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.Customer + "/<br>" + data.Getdata[i].val.CUSNAM + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.SLMCOD + "/<br>" + data.Getdata[i].val.SLMNAM + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.STKDES + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.FCLM_QTY + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_QTY + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_PERFORMTEXT + '</td>';

                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UPDATE_DATE + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UPDATE_BY + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.STATUSTEXT + '</td>';
                                //SubmithtmlPage += '<td><span class="fa fa-book gi-4x" style="cursor: pointer;"title="สินค้าส่งเคลมจากsupplier" id="_btnsupplier"  REQ_NO="' + data.Getdata[i].val.REQ_NO + '" CLM_NO_SUB="' + data.Getdata[i].val.CLM_NO_SUB + '" supstatus="' + data.Getdata[i].val.CLM_FRMSUP_STATUS + '"supno="' + data.Getdata[i].val.CLM_FRMSUP_NO + '" supdate="' + data.Getdata[i].val.CLM_FRMSUP_DATE + '" ></span></td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '</td>';
                                if (ADMIN_ANLYS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                } else if (ADMIN_ANLYS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจรับสินค้าเรียบร้อย"></span></td>';
                                }
                                if (TECH1_PROCESS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจสอบ"></span></td>';
                                } else if (TECH1_PROCESS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจสอบเรียบร้อย"></span></td>';
                                }
                                if (TECH2_ANLYS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการพิจารณา"></span></td>';
                                } else if (TECH2_ANLYS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="พิจารณาเรียบร้อย"></span></td>';
                                }
                                else if (TECH2_ANLYS_STATUS == "2") {
                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่ผ่านการพิจารณา"></span></td>';
                                }
                                else if (TECH2_ANLYS_STATUS == "3") {
                                    SubmithtmlPage += '<td><span class="fa fa-hourglass-half gi-4x" style="color: blue;" title="รอประสานงานกับsupplier"></span></td>';
                                }
                                if (PM_PROCESS_STATUS == "0") {
                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                } else if (PM_PROCESS_STATUS == "1") {
                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย"></span></td>';

                                } else if (PM_PROCESS_STATUS == "2") {
                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                } else if (PM_PROCESS_STATUS == "3") {
                                    SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ตรวจสอบใหม่"></span></td>';
                                }
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.CS_No + '</td>';
                                SubmithtmlPage += '<td>' + data.Getdata[i].val.Log_No + '</td>';
                                SubmithtmlPage += '</tr>';
                                $('#fixed-table-container-3  tbody:last-child').append(SubmithtmlPage);

                            }

                        } else {
                            var _status = $("#_status :selected").text();


                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text("ไม่มีข้อมูล" + _status);
                            $("#myModalWarning").modal();
                        }
                        var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
                        var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                        var fixedTable3 = fixTable(document.getElementById('fixed-table-container-3'));
                    }
                });
            }
            function GetClimline(claimnokey, company, status, itemno, statdate, enddate, statusrec, statusclaimafter, stkgrp, proceedtofter, statusprint) {
                // var valclim = $("#searchclaimno").val();
                var _user = $("#_uderlogin").val();
                //var _status = $("#_status").val();
                $.ajax({
                    url: '@Url.Action("GetdataUsetype", "GetdataCenter")',
                    data: { User: _user },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);

                        $("#_udertype").val(data.Usetpye);
                    }
                });
                var valclim = claimnokey;
                var valcompany = company;
                var valstatus = status;
                // var valcusno = cusno;
                var valitemno = itemno;
                var valstatdate = statdate;
                var valenddate = enddate;
                var valslm = "";
                var cktyp = $("#_udertype").val();
                // if (cktyp != "4") {
                //   valslm = "ALL";
                // } else {
                // valslm = slmcod

                // }
                //$('#myModalloadingfade').modal('show');
                waitingDialog.show();
                $('#fixed-table-container-1 tbody:last-child').html("");
                $.ajax({
                    url: '@Url.Action("GetClimcheckdata", "Checkstatus_WH")',
                    data: {
                        inCLM_ID: valclim,
                        incompany: valcompany,
                        instatus: valstatus,
                        // incusno: valcusno,
                        initemno: valitemno,
                        instatdate: valstatdate,
                        inenddate: valenddate,
                        // insales: valslm,
                        instatusrec: statusrec,
                        instatusclaimafter: statusclaimafter,
                        instkgrp: stkgrp,
                        proceedtofter: proceedtofter,
                        statusprint: statusprint,
                        inuser: _user,
                        intype: cktyp
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // waitingDialog.hide();
                        $('#myModalloadingfade').modal('hide');
                        // $('table  tbody:last-child').html("");
                        $('#fixed-table-container-1 tbody:last-child').html("");
                        if (data.Getdata.length > 0) {
                            //waitingDialog.hide();
                            $('#myModalloadingfade').modal('hide');
                            //  $("#_claimno").val(data.Getdata[0].val.CLM_ID);
                            //$("#_cusno").text(data.Getdata[0].val.CUSCOD);
                            //$("#_cusname").text(data.Getdata[0].val.CUSNAM);
                            //$("#slmcod").text(data.Getdata[0].val.SLMCOD);
                            //$("#sslmnam").text(data.Getdata[0].val.SLMNAM);
                            //$("#requestby").text(data.Getdata[0].val.CLM_RCVBY);
                            //$("#requestdate").text(data.Getdata[0].val.CLM_RCVDATE);
                            var SubmithtmlPage = '';
                            var ADMIN_ANLYS_STATUS = '';
                            var TECH1_PROCESS_STATUS = '';
                            var TECH2_PROCESS_STATUS = '';
                            var TECH2_ANLYS_STATUS = '';
                            var PM_PROCESS_STATUS = '';
                            var CLM_STATUS = '';

                            if (cktyp != "4" && cktyp != "5") {//User <> Sales

                                $("#fixed-table-container-2").css("display", "none");
                                $("#fixed-table-container-1").css("display", "block");
                                $('#fixed-table-container-1 tbody:last-child').html("");
                                for (var i = 0; i < data.Getdata.length; i++) {
                                    ADMIN_ANLYS_STATUS = data.Getdata[i].val.ADMIN_ANLYS_STATUS;
                                    TECH1_PROCESS_STATUS = data.Getdata[i].val.TECH1_PROCESS_STATUS;
                                    TECH2_PROCESS_STATUS = data.Getdata[i].val.TECH2_PROCESS_STATUS;
                                    TECH2_ANLYS_STATUS = data.Getdata[i].val.TECH2_ANLYS_STATUS;
                                    PM_PROCESS_STATUS = data.Getdata[i].val.PM_PROCESS_STATUS;
                                    CLM_STATUS = data.Getdata[i].val.CLM_STATUS;

                                    var BU_Head = data.Getdata[0].val.BU_Head;
                                    var BU_APPRV_DATE = data.Getdata[0].val.BU_APPRV_DATE;
                                    var BU_APPRV_STATUS = data.Getdata[0].val.BU_APPRV_STATUS;
                                    var BU_REMARK = data.Getdata[0].val.BU_REMARK;
                                    var CLM_BU_QTY = data.Getdata[0].val.CLM_BU_QTY;
                                    var CLM_BU_Ref = data.Getdata[0].val.CLM_BU_Ref;
                                    var PM_Optiontext4 = data.Getdata[0].val.PM_Optiontext4;


                                    var MD_Head = data.Getdata[0].val.MD_Head;
                                    var MD_APPRV_DATE = data.Getdata[0].val.MD_APPRV_DATE;
                                    var MD_APPRV_STATUS = data.Getdata[0].val.MD_APPRV_STATUS;
                                    var MD_REMARK = data.Getdata[0].val.MD_REMARK;
                                    var CLM_MD_QTY = data.Getdata[0].val.CLM_MD_QTY;
                                    var CLM_MD_Ref = data.Getdata[0].val.CLM_MD_Ref;


                                    if (CLM_STATUS != "8") {
                                        SubmithtmlPage = '<tr  fax="1" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '"   statuclm="' + data.Getdata[i].val.CLM_STATUS + '"  statustext="' + data.Getdata[i].val.STATUSTEXT + '" supstatus="' + data.Getdata[i].val.CLM_FRMSUP_STATUS + '"supno="' + data.Getdata[i].val.CLM_FRMSUP_NO + '" supdate="' + data.Getdata[i].val.CLM_FRMSUP_DATE + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '">';
                                    } else {
                                        SubmithtmlPage = '<tr  class="table-warning" fax="1"   perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '" supstatus="' + data.Getdata[i].val.CLM_FRMSUP_STATUS + '"supno="' + data.Getdata[i].val.CLM_FRMSUP_NO + '" supdate="' + data.Getdata[i].val.CLM_FRMSUP_DATE + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" >';
                                    }

                                    SubmithtmlPage += '<td  fax="1" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" company="' + data.Getdata[i].val.CLM_COMPANY + '" claimno="' + data.Getdata[i].val.CLM_ID + '"  claimsupno="' + data.Getdata[i].val.CLM_NO_SUB + '"  afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" itemno="' + data.Getdata[i].val.STKCOD + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '" id="_btnview" style="cursor: pointer;color: darkorchid;text-decoration: underline;">' + data.Getdata[i].val.CLM_ID + '</td>';
                                    SubmithtmlPage += '<td style="text-align: center;">  <button type="button" id="_btnPrintclim" class="print-button"   req_no="' + data.Getdata[i].val.CLM_ID + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '" statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '"><span class="print-icon"></span></button></td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.REQ_DATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_DUEDATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKDES + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_REQQTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_TECH1_QTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_TECH2_QTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_PM_QTY + '</td>';
                                    if (cktyp == "1") {
                                        SubmithtmlPage += '<td>' + data.Getdata[i].val.PERFORMDESCRIPTION + '</td>';
                                    } else {
                                        SubmithtmlPage += '<td>' + data.Getdata[i].val.PERFORMDESCRIPTION + '</td>';
                                    }
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UPDATE_DATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UPDATE_BY + '</td>';
                                    if (CLM_STATUS != "8") { //ไม่ยกเลิกการเคลม
                                        SubmithtmlPage += '<td>' + data.Getdata[i].val.STATUSTEXT + '</td>';
                                        SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';

                                    } else {
                                        SubmithtmlPage += '<td style="color: red;">' + data.Getdata[i].val.STATUSTEXT + '</td>';
                                        SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';

                                    }
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '</td>';
                                    if (CLM_STATUS != "8") {
                                        if (TECH1_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td>  <button type="button" id="_btndelclaim" class="btn btn-default"  req_no="' + data.Getdata[i].val.CLM_ID + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '">ยกเลิก</button></td>';
                                        } else if (TECH1_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td>  <button type="button" id="_btndelclaim" class="btn btn-default" disabled="disabled"  req_no="' + data.Getdata[i].val.CLM_ID + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '">ยกเลิก</button></td>';
                                        }

                                        if (TECH1_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจสอบ"></span></td>';
                                        } else if (TECH1_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจสอบเรียบร้อย"></span></td>';
                                        }
                                        if (TECH2_ANLYS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการพิจารณา"></span></td>';
                                        } else if (TECH2_ANLYS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="พิจารณาเรียบร้อย"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่ผ่านการพิจารณา"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "3") {
                                            SubmithtmlPage += '<td><span class="fa fa-hourglass-half gi-4x" style="color: blue;" title="รอประสานงานกับsupplier"></span></td>';
                                        }
                                        if (CLM_STATUS != "3") {
                                            // Tech รับสินค้า //
                                            if (PM_PROCESS_STATUS == "0") {
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                            } else if (PM_PROCESS_STATUS == "1") {
                                                SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย PM"></span></td>';

                                            } else if (PM_PROCESS_STATUS == "2") {
                                                SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                            } else if (PM_PROCESS_STATUS == "3") {
                                                SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ตรวจสอบใหม่"></span></td>';
                                            }


                                            if (ADMIN_ANLYS_STATUS == "0") {

                                                if (PM_PROCESS_STATUS == "0") {
                                                    // SubmithtmlPage += '<td>' + data.Getdata[i].val.Log_No + '</td>';
                                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                                } else if (PM_PROCESS_STATUS == "1") {
                                                    // SubmithtmlPage += '<td>' + data.Getdata[i].val.Log_No + '</td>';
                                                    SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                                } else if (PM_PROCESS_STATUS == "2") {
                                                    //SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"></span></td>';
                                                } else if (PM_PROCESS_STATUS == "3") {
                                                    // SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                    SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                }


                                                if (PM_Optiontext4 != "0") {
                                                    if (BU_APPRV_STATUS == "0") {
                                                        SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติโอนเข้า Damange"></span></td>';
                                                    } else if (BU_APPRV_STATUS == "1") {
                                                        SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติโอนเข้า Damange"></span></td>';

                                                    } else if (BU_APPRV_STATUS == "2") {

                                                        SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;" title="ไม่อนุมัติโอนเข้า Damange"></span></td>';

                                                    }
                                                    if (MD_APPRV_STATUS == "0") {
                                                        SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติโอนเข้า Damange"></span></td>';
                                                    } else if (MD_APPRV_STATUS == "1") {
                                                        SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติโอนเข้า Damange"></span></td>';

                                                    } else if (MD_APPRV_STATUS == "2") {

                                                        SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;" title="ไม่อนุมัติโอนเข้า Damange"></span></td>';

                                                    } else if (MD_APPRV_STATUS == "3") {

                                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';

                                                    }
                                                } else {
                                                    SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                    SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                }

                                            } else if (ADMIN_ANLYS_STATUS == "1") {
                                                // SubmithtmlPage += '<td>' + data.Getdata[i].val.Log_No + '</td>';
                                                SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจรับสินค้าเรียบร้อย"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                               
                                            }


                                        } else if (CLM_STATUS == "3") {
                                            if (PM_PROCESS_STATUS == "0") {
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                            } else if (PM_PROCESS_STATUS == "1") {
                                                SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ตรวจสอบใหม่"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';

                                            } else if (PM_PROCESS_STATUS == "2") {
                                                SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="PM พิจารณาโอนเข้า Damange อีกครั้ง"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                            } 
                                        }
                                        //alert(ADMIN_ANLYS_STATUS)
                                       
                                    }
                                    else {
                                        // SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                     
                                    }

                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.P_Claim + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.User_Print + '</td>';
                                    SubmithtmlPage += '</tr>';
                                    $('#fixed-table-container-1  tbody:last-child').append(SubmithtmlPage);

                                }
                            } else {

                                $("#fixed-table-container-2").css("display", "block");
                                $("#fixed-table-container-1").css("display", "none");
                                $('#fixed-table-container-2  tbody:last-child').html("");
                                for (var i = 0; i < data.Getdata.length; i++) {
                                    ADMIN_ANLYS_STATUS = data.Getdata[i].val.ADMIN_ANLYS_STATUS;
                                    TECH1_PROCESS_STATUS = data.Getdata[i].val.TECH1_PROCESS_STATUS;
                                    //TECH2_PROCESS_STATUS = data.Getdata[i].val.TECH2_PROCESS_STATUS;
                                    TECH2_ANLYS_STATUS = data.Getdata[i].val.TECH2_ANLYS_STATUS;
                                    PM_PROCESS_STATUS = data.Getdata[i].val.PM_PROCESS_STATUS;
                                    CLM_STATUS = data.Getdata[i].val.CLM_STATUS;
                                    if (CLM_STATUS != "8") {

                                        SubmithtmlPage = '<tr  fax="1"  foc="' + data.Getdata[i].val.CLM_FOC + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '"supstatus="' + data.Getdata[i].val.CLM_FRMSUP_STATUS + '"supno="' + data.Getdata[i].val.CLM_FRMSUP_NO + '" supdate="' + data.Getdata[i].val.CLM_FRMSUP_DATE + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '">';
                                    } else {

                                        SubmithtmlPage = '<tr class="table-warning" fax="1"  foc="' + data.Getdata[i].val.CLM_FOC + '"perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '"  statuclm="' + data.Getdata[i].val.CLM_STATUS + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '" supstatus="' + data.Getdata[i].val.CLM_FRMSUP_STATUS + '"supno="' + data.Getdata[i].val.CLM_FRMSUP_NO + '" supdate="' + data.Getdata[i].val.CLM_FRMSUP_DATE + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_QTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" >';
                                    }

                                    SubmithtmlPage += '<td   style="cursor: pointer; color: darkorchid; text-decoration: underline; width: 117px; position: absolute; left: 0px;"  foc="' + data.Getdata[i].val.CLM_FOC + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" statuclm="' + data.Getdata[i].val.CLM_STATUS + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '" company="' + data.Getdata[i].val.CLM_COMPANY + '" claimno="' + data.Getdata[i].val.REQ_NO + '"  claimsupno="' + data.Getdata[i].val.CLM_NO_SUB + '"  invoiceno="' + data.Getdata[i].val.CLM_INVNO + '" afterprocess="' + data.Getdata[i].val.ANLYS_AFTERPROCESS + '" cuscod="' + data.Getdata[i].val.Customer + '" itemno="' + data.Getdata[i].val.STKCOD + '" anlyafretori="' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '" statustext="' + data.Getdata[i].val.STATUSTEXT + '" id="_btnview" style="cursor: pointer;">' + data.Getdata[i].val.REQ_NO + '</td>';
                                    SubmithtmlPage += '<td style="text-align: center;">  <button type="button" id="_btnPrintclim" class="print-button"   req_no="' + data.Getdata[i].val.REQ_NO + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '" statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '"><span class="print-icon"></span></button></td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.REQ_DATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_DUEDATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_INVNO + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.Customer + '/<br>' + data.Getdata[i].val.CUSNAM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.SLMCOD + '/<br>' + data.Getdata[i].val.SLMNAM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKDES + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.FCLM_QTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_QTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_PERFORMTEXT + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UPDATE_DATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UPDATE_BY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STATUSTEXT + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.ANLYS_AFTERPROCESSTEXT + '</td>';

                                    if (CLM_STATUS != "8") {
                                        if (TECH1_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td>  <button type="button" id="_btndelclaim" class="btn btn-default"  req_no="' + data.Getdata[i].val.REQ_NO + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '">ยกเลิก</button></td>';
                                        } else if (TECH1_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td>  <button type="button" id="_btndelclaim" class="btn btn-default" disabled="disabled"  req_no="' + data.Getdata[i].val.REQ_NO + '"  clm_no_sub="' + data.Getdata[i].val.CLM_NO_SUB + '">ยกเลิก</button></td>';
                                        }
                                        if (ADMIN_ANLYS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                        } else if (ADMIN_ANLYS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจรับสินค้าเรียบร้อย"></span></td>';
                                        }
                                        if (TECH1_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจสอบ"></span></td>';
                                        } else if (TECH1_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจสอบเรียบร้อย"></span></td>';
                                        } if (TECH2_ANLYS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการพิจารณา"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="พิจารณาเรียบร้อย"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่ผ่านการพิจารณา"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "3") {
                                            SubmithtmlPage += '<td><span class="fa fa-hourglass-half gi-4x" style="color: blue;" title="รอประสานงานกับsupplier"></span></td>';
                                        }
                                        if (PM_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการอนุมัติ"></span></td>';
                                        } else if (PM_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย"></span></td>';

                                        } else if (PM_PROCESS_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                        } else if (PM_PROCESS_STATUS == "3") {
                                            SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ตรวจสอบใหม่"></span></td>';
                                        }
                                    }
                                    else {
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                    }

                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CS_No + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.Log_No + '</td>';
                                    SubmithtmlPage += '</tr>';
                                    $('#fixed-table-container-2  tbody:last-child').append(SubmithtmlPage);
                                    waitingDialog.hide();
                                }

                            }

                        } else {
                            var _status = $("#_status :selected").text();


                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text("ไม่มีข้อมูล" + _status);
                            $("#myModalWarning").modal();
                            $("#_btnprint").css("display", "none");
                            $('#fixed-table-container-1  tbody:last-child').html("");
                            $('#fixed-table-container-2  tbody:last-child').html("");

                        }
                        var fixedTable1 = fixTable(document.getElementById('fixed-table-container-1'));
                        var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                    }, error: function (jqXHR, textStatus, errorThrown) {
                        setTimeout(function () {
                            console.log('Error GetClimcheckdata : ' + textStatus, errorThrown);
                            waitingDialog.hide();
                        }, 2000);
                    }, complete: function () {
                        setTimeout(function () {
                            waitingDialog.hide();
                        }, 2000);
                    }
                });

            }

            //  var slmcod = $("#slmcod").val();
            $.ajax({
                url: '@Url.Action("Getdateslm","GetdataCenter")',
                data: {
                    UserId: UserId

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    var _tpy = $("#_udertype").val();
                    var select = $("#slmcod");
                    select.children().remove();
                    if (_tpy == "4") {
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();

                        //GetClimline("", "TAC", "1", "", "", "", "", slmcod, "0", "0", "ALL","0","2")
                    } else if (_tpy == "1") {
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();
                        GetClimline("", "TAC", "1", "", "", "", "0", "0", "ALL", "0", "2")

                    }
                    else if (_tpy == "2") {
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();
                        GetClimline("", "TAC", "2", "", "", "", "0", "0", "ALL", "0", "2")

                    }
                    else if (_tpy == "3") {
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();
                        //GetClimline("", "TAC", "4", "", "", "", "0", "0", "ALL", "0", "2")
                        GetClimline("", "TAC", "1", "", "", "", "0", "0", "ALL", "0", "2")
                    } else if (_tpy == "5") {
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();
                        GetClimline("", "TAC", "1", "", "", "", "0", "0", "ALL", "0", "2")
                    } else if (_tpy == "6") {
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();
                        GetClimline("", "TAC", "1", "", "", "", "0", "0", "ALL", "0", "2")

                    } else if (_tpy == "10") {
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                        var slmcod = $("#slmcod").val();
                        GetClimline("", "TAC", "1", "", "", "", "0", "0", "ALL", "0", "2")

                    }
                }
            });
            var _status = $("#_status").val();
            var udertype = $("#_udertype").val();
            var Userlogin = $("#_uderlogin").val();
            if (udertype == "1") {
                $.ajax({
                    url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                    data: {
                        Usertype: udertype,
                        Userlogin: Userlogin
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data)
                        $("#tile").text(data.Getdata[0].val.Status)
                        $("#tile1").text(data.Getdata[2].val.Status)
                        $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                        $("#counttec1").html("TAC: " + data.Getdata[2].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[3].val.CountAdmin);
                    }
                });
                //  GetClimline("", "TAC", "1", "", "", "", "", "ALL", "0", "0")
            } else if (udertype == "2") {
                if (udertype == "2") {
                    $.ajax({
                        url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                        data: {
                            Usertype: udertype,
                            Userlogin: Userlogin
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data)
                            $("#tile").text(data.Getdata[0].val.Status)
                            $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                            //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                            $("#counttec1").css("display", "none");
                        }
                    });
                }
                //  GetClimline("", "TAC", "3", "", "", "", "", "ALL", "0", "0")
            }
            else if (udertype == "4") {

                // var slmcod = $("#slmcod").val();
                if (udertype == "4") {
                    $.ajax({
                        url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                        data: {
                            Usertype: udertype,
                            // Userlogin: 'samart.s'
                            Userlogin: Userlogin
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data)
                            $("#tile").text(data.Getdata[0].val.Status)
                            $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                            //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                            $("#counttec1").css("display", "none");
                        }
                    });

                }

            }

            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 2
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_proceedtotec");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 1
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_perfromtec1");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 32
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_anlysstatustec1");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 33
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    var select = $("#_anlysafterprotec1");

                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 9
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_apprvststus");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }

            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 33
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_statusclaimafter");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }

            });
            $.ajax({
                url: '@Url.Action("GetProductall", "GetdataCenter")',
                data: {

                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    var select = $("#_PM");
                    select.children().remove();

                    $(data).each(function (index, item) {

                        select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                    });

                    var valpm = $("#_PM").val();

                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 35
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_pmtstus");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });

            $("#linkprocess").on("click", function () {
                var _usertype = $("#_udertype").val();
                var claimno = $(this).attr('claimno');
                var claimsupno = $(this).attr('claimsupno');
                var statuclm = $(this).attr('statuclm');
                if (_usertype != "4" && _usertype != "5") {
                    if (statuclm != "8") {
                        // var wi = window.open("../Process_Sc/Index?ClmNUM=" + btoa(claimno) + "/" + btoa(claimsupno));
                        var wi = window.open("../Process_wh/Index?ClmNUM=" + btoa(claimno));
                        wi.focus();
                        $("#modalconfirmProcess").modal('hide');
                    }
                }
            });
            function addCommas(nStr) {
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }
            $("#_btnupdatewhadmin").click(function () {
                var nokey = $("#Nospankey").text();
                var nosubkey = $("#subNospan").text();
                if (nokey == "" && nosubkey == "") {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณาเลือกรายการเคลมที่ต้องการบันทึกปิดงาน");
                    $("#myModalWarning").modal(); return false;
                }
                var closeworkwh = $("#closeworkwh").val();
                var closeworkdatewh = $("#closeworkdatewh").val();
                var closeworkremakewh = $("#closeworkremakewh").val();
                $.ajax({
                    url: '@Url.Action("SaveProcessClaimUpdateAdminWh", "Checkstatus_WH")',
                    data: {
                        aj_REQ_NO: nokey,
                        aj_CLM_NO_SUB: nosubkey,
                        aj_ADMINWH_BY: closeworkwh,
                        aj_ADMINWH_UPDATE: closeworkdatewh,
                        aj_ADMINWH_REMARK: closeworkremakewh,
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // waitingDialog.hide();
                        if (data.message == "true") {
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                            $("#myModalSucces").modal();
                            location.reload(true);
                        } else {
                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text(data.message);
                            $("#myModalWarning").modal(); return false;
                        }
                    }
                });
            });
            $("table").on("click", "tr #_btnview", function () {
                var req_no = $(this).attr('claimno');
                var statuclm = $(this).attr('statuclm');
                var clm_no_sub = $(this).attr('claimsupno');

                var afterprocess = $(this).attr('afterprocess');
                var company = $(this).attr('company');

                var itemno = $(this).attr('itemno');

                var anlyafretori = $(this).attr('anlyafretori');
                var statustext = $(this).attr('statustext');
                var proceedtoupdes = $(this).attr('perfromdes');
                var statusclaimupdes = $(this).attr('recstades');
                var statuclm = $(this).attr('statuclm');
                var fax = $(this).attr('fax');
                var _user = $("#_uderlogin").val();
                var _usertype = $("#_udertype").val();
                $("#Nospankey").text(req_no);
                $("#subNospan").text(clm_no_sub);
                $("#_itemnotext").text(itemno);

                $("#linkdetail").attr("req_no", req_no);
                $("#linkdetail").attr("clm_no_sub", clm_no_sub);
                $("#linkprocess").attr('claimno', req_no);
                $("#linkprocess").attr('statuclm', statuclm);
                $("#linkprocess").attr('claimsupno', clm_no_sub);
                if (_usertype == "10") {
                    $("#myDIV6").css("display", "block");
                }
                if (fax == "1") {
                    $.ajax({
                        url: '@Url.Action("GetClimwhdata", "GetdataCenter")',
                        data: {
                            inCLM_ID: req_no,
                            inCLM_SUB: clm_no_sub
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data);
                            // $("#Nospankey").text(nokey);
                            //  $("#subNospan").text(clmnoup);
                            $("#_itemnotext").text(data.Getdata[0].val.STKCOD);
                            $("#_description").text(data.Getdata[0].val.STKDES);
                            $("#_uom").text(data.Getdata[0].val.CLM_UOM);


                            $("#_stkgup").text(data.Getdata[0].val.CLM_STKGRP);
                            $("#prdnam").text(data.Getdata[0].val.PROD + "/" + data.Getdata[0].val.PRODNAM);
                            $("#stkgrpnam").text(data.Getdata[0].val.GRPNAM);

                            $("#_claimsec").text(data.Getdata[0].val.SEC + "/" + data.Getdata[0].val.DEPNAM);
                            ////Get input display ///////
                            $("#_claimqty").text(data.Getdata[0].val.CLM_REQ_QTY);//Qty//
                            //$("#_workda").text(worktimeup);//ระยะใช้งาน//
                            $("#causeclaim").text(data.Getdata[0].val.CLM_CAUSE);//เหตุผลเคลม//
                            $("#_proceedto").text(data.Getdata[0].val.PERFORMDESCRIPTION);//ดำเนินการ//
                            $("#_statusclaim").text(data.Getdata[0].val.PERFORMDESCRIPTION); //Status///
                            // $("#_claimnosub").text(clmnoup);
                            $("#_proceedtotec").val(data.Getdata[0].val.RCVSTATUSDESCRIPTION);  ///สถานะการรับสินค้า
                            $("#_location").text(data.Getdata[0].val.CLM_Location);
                            //$("#_perfromtec1").val(proceedtoup);  ///ดำเนินการ:
                            $("#updateremaketec1").val(data.Getdata[0].val.CLM_COMMENT);  ///COMMENT
                            var _tec1Proststus = data.Getdata[0].val.TECH1_PROCESS_STATUS;
                            var _AdminProststus = data.Getdata[0].val.ADMIN_ANLYS_STATUS;

                            $("#_tecrevqty").val(data.Getdata[0].val.CLM_TECH1_QTY)
                            if (_tec1Proststus != "0") {
                                $("#_proceedtotec").val(data.Getdata[0].val.CLM_RCVSTATUS);  ///สถานะการรับสินค้า
                                //$("#_rcvbyte").val(data.Getdata[0].val.CLM_RCVBY);      //ผู้รับสินค้าเคลม
                                //$("#_rcvdatetec").val(data.Getdata[0].val.CLM_RCVDATE);//วันที่รับสินค้าเคลม:
                                $("#_rvqtytec").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                                // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                                $("#_clmdatetec").val(data.Getdata[0].val.CLM_DATE);//Claim date:
                                //$("#_duedatetec").val(data.Getdata[0].val.CLM_DUEDATE); //Due date
                                // $("#_admintec").val(data.Getdata[0].val.CLM_ADMIN);//Admin:
                                //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ

                                var shelf = data.Getdata[0].val.CLM_SHELF_LOCATION;
                                $("#_shelfloctec").val(shelf);//Shelf Location

                                $("#_tecwork").val(data.Getdata[0].val.Technician);//ช่างที่รับผิดชอบ:

                                $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม
                                $("#_shelfloctec").val(shelf);
                                ///Technic 1 : วิเคราะห์สินค้าเคลม///
                                //alert(data.Getdata[0].val.TECH1_NAME)
                                $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);//บันทึกโดย
                                $("#_anlysdatetec1").val(data.Getdata[0].val.TECH1_ANLYS_DATE);    //วันที่วิเคราะห์ปัญหา
                                $("#_perfromtec1").val(data.Getdata[0].val.CLM_PERFORM); //ดำเนินการ
                               
                                $("#remaketec1").val(data.Getdata[0].val.TECH1_ANLYS_RESULT);  //ผลการตรวจสอบ
                                var statustec1 = data.Getdata[0].val.TECH1_ANLYS_STATUS;
                            }
                            else if (_tec1Proststus == "0") {
                                $("#_tecwork").val("0");//ช่างที่รับผิดชอบ:
                                $("#_tecrevqty").val("0");//จำนวนรับเคลม:
                                $("#_shelfloctec").val("");
                                $("#_nametec1").val("");
                                $("#_anlysdatetec1").val("");
                                $("#_perfromtec1").val("0");
                                $("#_anlysstatustec1").val("0");
                                $("#_anlysafterprotec1").val("0");
                                $("#remaketec1").val("0");
                            }
                            var _tec2Proststus = data.Getdata[0].val.TECH2_ANLYS_STATUS;//approve tec2
                            var _PMProststus = data.Getdata[0].val.PM_PROCESS_STATUS;//approve PM
                            var _PM_NAME = data.Getdata[0].val.PM_NAME;

                            // Option 5 by PM//
                            var optionpm1 = data.Getdata[0].val.PM_Option1;
                            var optionpm2 = data.Getdata[0].val.PM_Option2;
                            var optionpm3 = data.Getdata[0].val.PM_Option3;
                            var optionpm4 = data.Getdata[0].val.PM_Option4;
                            var optionpm5 = data.Getdata[0].val.PM_Option5;

                            var optionpmtext1 = data.Getdata[0].val.PM_Optiontext1;
                            var optionpmtext2 = data.Getdata[0].val.PM_Optiontext2;
                            var optionpmtext3 = data.Getdata[0].val.PM_Optiontext3;
                            var optionpmtext4 = data.Getdata[0].val.PM_Optiontext4;
                            var optionpmtext5 = data.Getdata[0].val.PM_Optiontext5;

                            var BU_Head = data.Getdata[0].val.BU_Head;
                            var BU_APPRV_DATE = data.Getdata[0].val.BU_APPRV_DATE;
                            var BU_APPRV_STATUS = data.Getdata[0].val.BU_APPRV_STATUS;
                            var BU_REMARK = data.Getdata[0].val.BU_REMARK;
                            var CLM_BU_QTY = data.Getdata[0].val.CLM_BU_QTY;
                            var CLM_BU_Ref = data.Getdata[0].val.CLM_BU_Ref;


                            var MD_Head = data.Getdata[0].val.MD_Head;
                            var MD_APPRV_DATE = data.Getdata[0].val.MD_APPRV_DATE;
                            var MD_APPRV_STATUS = data.Getdata[0].val.MD_APPRV_STATUS;
                            var MD_REMARK = data.Getdata[0].val.MD_REMARK;
                            var CLM_MD_QTY = data.Getdata[0].val.CLM_MD_QTY;
                            var CLM_MD_Ref = data.Getdata[0].val.CLM_MD_Ref;

                            if (_tec2Proststus != "0") {
                                $("#_anlysstatustec1").val(data.Getdata[0].val.TEC_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotec1").val(data.Getdata[0].val.ANLYS_AFTERPROCESS); //หลังเสร็จสิ้นกระบวนการเคลม
                                var anlysafterprotec1 = $("#_anlysafterprotec1").val();
                                if (anlysafterprotec1 == "1") {
                                    $("#displ").css("display", "block")
                                    $("#_scrapdatetec1").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                } else {
                                    crapdatetec1 = null;
                                    $("#displ").css("display", "none")
                                }
                                $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                $("#_tecrevqty2").val(data.Getdata[0].val.CLM_TECH2_QTY);   //จำนวนรับเคลม Supplier
                                $("#_tecrevqtybad").val(data.Getdata[0].val.CLM_TECH2_WASTE_QTY);   //จำนวนรับเคลม Supplier
                                $("#_tecrevqtywd").val(data.Getdata[0].val.CLM_TECH2_GOOD_QTY);   //จำนวนสินค้าใช้งานได้


                                var tyclomtech = data.Getdata[0].val.Process_Tech;
                               
                                if (tyclomtech == "1") {
                                    $("#atech").prop('checked', true);
                                    $("#btech").prop('checked', false);
                                    $("#ctech").prop('checked', false);
                                    $("#dtech").prop('checked', false);
                                    $("#etech").prop('checked', false);
                                    $("#ftech").prop('checked', false);

                                } else if (tyclomtech == "2") {
                                    $("#atech").prop('checked', false);
                                    $("#btech").prop('checked', true);
                                    $("#ctech").prop('checked', false);
                                    $("#dtech").prop('checked', false);
                                    $("#etech").prop('checked', false);
                                    $("#ftech").prop('checked', false);
                                } else if (tyclomtech == "3") {
                                    $("#atech").prop('checked', false);
                                    $("#btech").prop('checked', false);
                                    $("#ctech").prop('checked', true);
                                    $("#dtech").prop('checked', false);
                                    $("#etech").prop('checked', false);
                                    $("#ftech").prop('checked', false);
                                } else if (tyclomtech == "4") {
                                    $("#atech").prop('checked', false);
                                    $("#btech").prop('checked', false);
                                    $("#ctech").prop('checked', false);
                                    $("#dtech").prop('checked', true);
                                    $("#etech").prop('checked', false);
                                    $("#ftech").prop('checked', false);
                                } else if (tyclomtech == "5") {
                                    $("#atech").prop('checked', false);
                                    $("#btech").prop('checked', false);
                                    $("#ctech").prop('checked', false);
                                    $("#dtech").prop('checked', false);
                                    $("#etech").prop('checked', true);
                                    $("#ftech").prop('checked', false);
                                } else if (tyclomtech == "6") {
                                    $("#atech").prop('checked', false);
                                    $("#btech").prop('checked', false);
                                    $("#ctech").prop('checked', false);
                                    $("#dtech").prop('checked', false);
                                    $("#etech").prop('checked', false);
                                    $("#ftech").prop('checked', true);
                                    
                                }
                                $("#atech").prop("disabled", "disabled");
                                $("#btech").prop("disabled", "disabled");
                                $("#ctech").prop("disabled", "disabled");
                                $("#dtech").prop("disabled", "disabled");
                                $("#etech").prop("disabled", "disabled");
                                $("#ftech").prop("disabled", "disabled");
                              
                            } else if (_tec2Proststus == "0") {
                                $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                                $("#_appdatetec").val("");  //วันที่เทคนิคพิจารณา
                                $("#_apprvststus").val(""); // สถานะ
                                $("#remaketec2").val("");   //หมายเหตุ
                                $("#_tecrevqty2").val("");   //จำนวนรับเคลม:
                                $("#_tecrevqtybad").val("");   //จำนวนรับเคลม Supplier
                                $("#_tecrevqtywd").val("");   //จำนวนสินค้าใช้งานได้
                            }
                            if (_PMProststus != "0") {
                               // alert(data.Getdata[0].val.PM_REMARK)
                                $("#_PM").val(data.Getdata[0].val.PM_NAME);  // Product Manager
                                $("#_pmdate").val(data.Getdata[0].val.PM_APPRV_DATE); //วันที่PM พิจารณา
                                $("#_pmtstus").val(data.Getdata[0].val.PM_APPRV_STATUS); //สถานะอนุมัติ
                                $("#remakepm").val(data.Getdata[0].val.PM_REMARK);
                                $("#_pmnewpn").val(data.Getdata[0].val.PM_Replacemen);
                                $("#_pmqty").val(data.Getdata[0].val.CLM_PM_QTY);
                                $("#_rvqtytec").val(data.Getdata[0].val.CLM_PM_QTY);
                                $("#_anlysstatustecpm").val(data.Getdata[0].val.PM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotecpm").val(data.Getdata[0].val.PM_PROCESS_STATUS_ANLYS); //หลังเสร็จสิ้นกระบวนการเคลม
                                $("#_pmafterapp").val(data.Getdata[0].val.PM_AFTER_APPRV); //ต้องให้คลังดำเนินการ


                                if (optionpm1 == "Y") {
                                    $("#optionpm1").prop('checked', true);
                                    $("#optionpmtext1").val(optionpmtext1);
                                    $("#optionpm1").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm1").prop('checked', false);
                                    $("#optionpmtext1").val("");
                                    $("#optionpm1").attr("disabled", "disabled");
                                }
                                if (optionpm2 == "Y") {
                                    $("#optionpm2").prop('checked', true);
                                    $("#optionpmtext2").val(optionpmtext2);
                                    $("#optionpm2").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm2").prop('checked', false);
                                    $("#optionpmtext2").val("");
                                    $("#optionpm2").attr("disabled", "disabled");
                                }
                                if (optionpm3 == "Y") {
                                    $("#optionpm3").prop('checked', true);
                                    $("#optionpmtext3").val(optionpmtext3);
                                    $("#optionpm3").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm3").prop('checked', false);
                                    $("#optionpmtext3").val("");
                                    $("#optionpm3").attr("disabled", "disabled");
                                }
                                if (optionpm4 == "Y") {
                                    $("#optionpm4").prop('checked', true);
                                    $("#optionpmtext4").val(optionpmtext4);
                                    $("#optionpm4").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm4").prop('checked', false);
                                    $("#optionpmtext4").val("");
                                    $("#optionpm4").attr("disabled", "disabled");
                                }
                                if (optionpm5 == "Y") {
                                    $("#optionpm5").prop('checked', true);
                                    $("#optionpmtext5").val(optionpmtext5);
                                    $("#optionpm5").attr("disabled", "disabled");
                                } else {
                                    $("#optionpm5").prop('checked', false);
                                    $("#optionpmtext5").val("");
                                    $("#optionpm5").attr("disabled", "disabled");
                                }

                            } else if (_PMProststus == "0") {
                                $("#_PM").val("");  // Product Manager
                                $("#_pmdate").val(""); //วันที่PM พิจารณา
                                $("#_pmtstus").val(""); //สถานะอนุมัติ
                                $("#remakepm").val("");
                                $("#_pmnewpn").val("");
                                $("#_pmqty").val("");
                                $("#_rvqtytec").val("");
                                $("#_anlysstatustecpm").val(""); //สถานะการวิเคราะห์ WR,WE,WF
                                $("#_anlysafterprotecpm").val(""); //หลังเสร็จสิ้นกระบวนการเคลม


                                $("#optionpm1").prop('checked', false);
                                $("#optionpmtext1").val("");
                                $("#optionpm1").attr("disabled", "disabled");

                                $("#optionpm2").prop('checked', false);
                                $("#optionpmtext2").val("");
                                $("#optionpm2").attr("disabled", "disabled");

                                $("#optionpm3").prop('checked', false);
                                $("#optionpmtext3").val("");
                                $("#optionpm3").attr("disabled", "disabled");

                                $("#optionpm4").prop('checked', false);
                                $("#optionpmtext4").val("");
                                $("#optionpm4").attr("disabled", "disabled");

                                $("#optionpm5").prop('checked', false);
                                $("#optionpmtext5").val("");
                                $("#optionpm5").attr("disabled", "disabled");
                            }
                            if (_AdminProststus != "0") {
                               
                                $("#_proceedtotec").val(data.Getdata[0].val.CLM_RCVSTATUS);  ///สถานะการรับสินค้า
                                $("#_rcvbyte").val(data.Getdata[0].val.CLM_RCVBY);      //ผู้รับสินค้าเคลม
                                $("#_rcvdatetec").val(data.Getdata[0].val.CLM_RCVDATE);//วันที่รับสินค้าเคลม:
                                $("#_rvqtytecadmin").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                                $("#_clmdatetec").val(data.Getdata[0].val.CLM_DATE);//Claim date:
                                $("#_duedatetec").val(data.Getdata[0].val.CLM_DUEDATE); //Due date
                                $("#_admintec").val(data.Getdata[0].val.CLM_ADMIN);//Admin:
                                $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม
                            } else if (_AdminProststus == "0") {
                                $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
                                $("#_rcvbyte").val("");  //ผู้รับสินค้าเคลม
                                $("#_rcvdatetec").val("");//วันที่รับสินค้าเคลม:
                                $("#_rvqtytecadmin").val(""); //จำนวนที่รับเคลม:
                                $("#_clmdatetec").val("");//Claim date:
                                $("#_duedatetec").val(""); //Due date
                                $("#_admintec").val("");//Admin:
                                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                            }
                            var _AdminwhProststus = data.Getdata[0].val.ADMINWH_STATUS;
                            //alert(_AdminwhProststus)

                            if (BU_APPRV_STATUS != "0") { //Bu approve
                                $.ajax({
                                    url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                                    data: {
                                        Name: 38
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {

                                        var select = $("#_statusbu");
                                        select.children().remove();

                                        $(data).each(function (index, item) {
                                            if (item.CODE != "3") {
                                                select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                            }
                                        });

                                        $("#_statusbu").val(BU_APPRV_STATUS);


                                    }
                                });
                                $("#_dmqty").val(CLM_BU_QTY);

                                $("#remakebu").val(BU_REMARK);
                                $("#_budate").val(BU_APPRV_DATE);
                                //if (CLM_BU_Ref != "0") {
                                //    $("#worrejbu").text("PM พิจารณาอีกครั้ง");
                                //}
                            } else {
                                $("#_dmqty").val("");

                                $("#remakebu").val("");
                                $("#_budate").val("");
                                $("#_statusbu").val("");
                               $("#worrejbu").text("");
                               
                            }
                            if (MD_APPRV_STATUS != "0") { //Bu approve
                                $.ajax({
                                    url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                                    data: {
                                        Name: 38
                                    },
                                    type: "POST",
                                    dataType: "JSON",
                                    success: function (data) {

                                       
                                        var selectmd = $("#_statusmd");
                                        selectmd.children().remove();

                                        $(data).each(function (index, item) {
                                            if (item.CODE != "3") {
                                                selectmd.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                                            }
                                        });

                                        $("#_statusmd").val(MD_APPRV_STATUS);
                                    }
                                });
                                $("#_dmqtymd").val(CLM_BU_QTY);

                                $("#remakemd").val(BU_REMARK);
                                $("#_mddate").val(BU_APPRV_DATE);
                                //if (CLM_MD_Ref != "0") {
                                //    $("#worrejmd").text("PM พิจารณาอีกครั้ง");
                                //}
                            } else {
                                $("#_dmqtymd").val("");

                                $("#remakemd").val("");
                                $("#_mddate").val("");
                                $("#_statusmd").val("");
                                $("#worrejmd").text("");

                            }
                            var today = new Date();
                            if (_AdminwhProststus != "0") {
                              // alert(_PMProststus)
                                if (_PMProststus != "0") {
                                   // alert(_PMProststus)
                                    $("#_btnupdatewhadmin").css("display", "none");
                                    $("#closeworkwh").val(data.Getdata[0].val.ADMINWH_BY);
                                    $("#closeworkdatewh").val(data.Getdata[0].val.ADMINWH_UPDATE);
                                    $("#closeworkremakewh").val(data.Getdata[0].val.ADMINWH_REMARK);
                                    //apss//
                                }else if(_PMProststus == "0") {
                                    if(optionpmtext4 != "0") {
                                        if (BU_APPRV_STATUS == "1") {//BU Head พิจารณา อนุมัติ
                                            $("#_btnupdatewhadmin").css("display", "block");
                                          
                                        }else if (BU_APPRV_STATUS == "2") {//BU Head พิจารณา ไม่อนุมัติ

                                            $("#_btnupdatewhadmin").css("display", "none");
                                            
                                        }else if (BU_APPRV_STATUS == "0") {//รอBU Head พิจารณา 

                                            $("#_btnupdatewhadmin").css("display", "none");

                                        }
                                    }
                                    $("#closeworkwh").val(Userlogin);

                                    $("#closeworkdatewh").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา

                                    $("#closeworkremakewh").val("");
                                }
                               
                               
                               // $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม
                            //เข้าอันนี้
                            } else if (_AdminwhProststus == "0") {
                                alert("optionpmtext4 = " + optionpmtext4);
                                alert("BU_APPRV_STATUS = " + BU_APPRV_STATUS);
                                if (optionpmtext4 != "0") {
                                    if (BU_APPRV_STATUS == "1") {//BU Head พิจารณา อนุมัติ
                                        $("#_btnupdatewhadmin").css("display", "block");

                                    }else if (BU_APPRV_STATUS == "2") {//BU Head พิจารณา ไม่อนุมัติ

                                        $("#_btnupdatewhadmin").css("display", "none");

                                    } else if (BU_APPRV_STATUS == "0") {//รอBU Head พิจารณา 

                                        $("#_btnupdatewhadmin").css("display", "none");

                                    }
                                }
                                $("#closeworkwh").val(Userlogin);

                                $("#closeworkdatewh").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา

                                $("#closeworkremakewh").val("");

                                $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
                                
                            }
                        }

                    });
                }
                
                if (_usertype != "4" && _usertype != "5" && _usertype != "10" && _usertype != "3" && _usertype != "6") {
                    if (_usertype != "3") {
                        if (statuclm != "8") {
                            $("#modalconfirmProcess").modal();
                        } else {
                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text("รายการ No." + clm_no_sub + " ยกเลิกรายการเคลม");
                            $("#myModalWarning").modal();
                        }
                    }
                }
                if (_usertype == "1") {
                    if (afterprocess == "1" && statuclm == "5") {

                        $("#displ").css("display", "none");
                        $.ajax({
                            url: '@Url.Action("Getafterdateprocess", "Checkstatus_Sc")',
                            data: {

                                req_no: req_no,
                                clm_no_sub: clm_no_sub

                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data);
                                $("#_scrapdatetec1").val(data.afterprocess);
                            }
                        });
                    } else {
                        $("#displ").css("display", "none");
                    }
                } else {
                    $("#displ").css("display", "none");
                }
                var _valtec = $('#_tecwork').val();

                if (_valtec != "") {
                    if (_valtec != null) {
                        $.ajax({
                            url: '@Url.Action("GetTechLocation", "GetdataCenter")',
                            data: {
                                Name: _valtec
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_shelfloctec");
                                select.children().remove();

                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.Location).text(item.Location));
                                });



                            }
                        });
                    }
                }

                ///His Invoice////
                @*$.ajax({
                    url: '@Url.Action("GetdataInvoicestatud", "GetdataCenter")',
                    data: {
                        _cusno: cuscod,
                        _itemno: itemno,
                        _invoiceno: invoiceno,
                        _com: company,
                        _statdate: "",
                        _enddate: "",
                        _foc: foc
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // $("#Nospankey").text(nokey);
                        //  $("#subNospan").text(clmnoup);
                        $("#_itemnotex").text(data.Getdata[0].val.STKCOD);
                        $("#_description").text(data.Getdata[0].val.STKDES);
                        $("#_uom").text(data.Getdata[0].val.Uom);
                        $("#_invoiceno").text(data.Getdata[0].val.DOCNUM);
                        $("#_psdate").text(data.Getdata[0].val.PSTDAT);
                        $("#_invoiceqty").text(addCommas(data.Getdata[0].val.Qty));
                        $("#_invoicelineamt").text(addCommas(parseFloat(data.Getdata[0].val.Amt).toFixed(2)));
                        $("#_invoicelinedis").text(addCommas(parseFloat(data.Getdata[0].val.DiscountPer).toFixed(2)));
                        $("#_invoicelinedisamt").text(addCommas(parseFloat(data.Getdata[0].val.DiscountAmt).toFixed(2)));
                        $("#_stkgup").text(data.Getdata[0].val.STKGRP);
                        $("#_claimsec").text(data.Getdata[0].val.SEC);
                        $("#_foc").text(foc);
                    }
                });*@

                $.ajax({
                    url: '@Url.Action("GetdataClamline", "GetdataCenter")',
                    data: {
                        CLM_No: req_no,
                        CLM_SUB: clm_no_sub,
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if (data.Getdata.length > 0) {
                            ////Get input display ///////

                            $("#_claimqty").text(data.Getdata[0].val.CLM_REQQTY);//Qty//
                            $("#_workda").text(data.Getdata[0].val.CLM_USEDAY);//ระยะใช้งาน//
                            $("#causeclaim").text(data.Getdata[0].val.CLM_CAUSE);//เหตุผลเคลม//
                            $("#_proceedto").text(proceedtoupdes);//ดำเนินการ//
                            $("#_statusclaim").text(statusclaimupdes); //Status///
                            //$("#_claimnosub").text(clmnoup);
                            // $("#_proceedtotec").val(statusclaimup);  ///สถานะการรับสินค้า
                            // $("#_perfromtec1").val(proceedtoup);  ///ดำเนินการ:

                            ///ข้อมูลเคลมสำหรับรุ่นรถ///
                            $("#_vemac").val(data.Getdata[0].val.CLM_Machine);
                            $("#_moty").val(data.Getdata[0].val.CLM_Model);
                            $("#_modyear").val(data.Getdata[0].val.CLM_ModelYear);
                            $("#_encod").val(data.Getdata[0].val.CLM_EngineCode);
                            $("#_chno").val(data.Getdata[0].val.CLM_ChassisNo);
                            $("#_pump").val(data.Getdata[0].val.CLM_InjecPump);
                            $("#_typpro").val(data.Getdata[0].val.CLM_TypeProduct);
                            $("#_warcarno").val(data.Getdata[0].val.CLM_WarrantyNo);
                            $("#_milage").val(data.Getdata[0].val.CLM_Milage);
                            var dateof;
                            var dateofsp;
                            dateof = data.Getdata[0].val.CLM_USEDAY;
                            dateofsp = dateof.split("/");
                            console.log(dateofsp[0])
                            $("#_workdacar").val(dateofsp[0]);
                            $("#_workmonth").val(dateofsp[1]);
                            $("#_workday").val(dateofsp[2]);
                            $("#_worktime").val(dateofsp[3]);
                            $("#_datofdam").val(data.Getdata[0].val.CLM_DateDamage);
                            $("#_batcod").val(data.Getdata[0].val.CLM_BatchCode);

                            ///lock Display///
                            $("#_vemac").attr("disabled", "disabled");
                            $("#_moty").attr("disabled", "disabled");
                            $("#_modyear").attr("disabled", "disabled");
                            $("#_encod").attr("disabled", "disabled");
                            $("#_chno").attr("disabled", "disabled");
                            $("#_pump").attr("disabled", "disabled");
                            $("#_typpro").attr("disabled", "disabled");
                            $("#_warcarno").attr("disabled", "disabled");
                            $("#_milage").attr("disabled", "disabled");
                            $("#_workdacar").attr("disabled", "disabled");
                            $("#_workmonth").attr("disabled", "disabled");
                            $("#_workday").attr("disabled", "disabled");
                            $("#_worktime").attr("disabled", "disabled");
                            $("#_datofdam").attr("disabled", "disabled");
                            $("#_batcod").attr("disabled", "disabled");

                            // ตรวจสอบรับสินค้าเคลม//
                            $("#_proceedtotec").val(data.Getdata[0].val.CLM_RCVSTATUS);  ///สถานะการรับสินค้า
                            $("#_rcvbyte").val(data.Getdata[0].val.CLM_RCVBY);      //ผู้รับสินค้าเคลม
                            $("#_rcvdatetec").val(data.Getdata[0].val.CLM_RCVDATE);//วันที่รับสินค้าเคลม:
                            $("#_rvqtytec").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                            $("#_clmdatetec").val(data.Getdata[0].val.CLM_DATE);//Claim date:
                            $("#_duedatetec").val(data.Getdata[0].val.CLM_DUEDATE); //Due date
                            $("#_admintec").val(data.Getdata[0].val.CLM_ADMIN);//Admin:
                            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ

                            $("#_shelfloctec").val(data.Getdata[0].val.CLM_SHELF_LOCATION);//Shelf Location
                            $("#_tecwork").val(data.Getdata[0].val.Technician);//ช่างที่รับผิดชอบ:
                            $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม
                            // lock Display ตรวจสอบรับสินค้าเคลม//
                            $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                            $("#_rcvbyte").attr("disabled", "disabled");      //ผู้รับสินค้าเคลม
                            $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                            $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                            $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                            $("#_duedatetec").attr("disabled", "disabled"); //Due date
                            $("#_admintec").attr("disabled", "disabled");//Admin:
                            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                            $("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                            $("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                            $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                            ///Technic 1 : วิเคราะห์สินค้าเคลม///
                            $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);//ตรวจสอบโดย
                            $("#_anlysdatetec1").val(data.Getdata[0].val.TECH1_ANLYS_DATE);    //วันที่วิเคราะห์ปัญหา
                            $("#_perfromtec1").val(data.Getdata[0].val.CLM_PERFORM); //ดำเนินการ
                            $("#_anlysstatustec1").val(data.Getdata[0].val.TECH1_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                            var _val = data.Getdata[0].val.ANLYS_AFTERPROCESS;
                            $("#_anlysafterprotec1").val(_val); //หลังเสร็จสิ้นกระบวนการเคลม
                            var anlysafterprotec1 = $("#_anlysafterprotec1").val();
                            if (anlysafterprotec1 == "1") {
                                $("#_anlysafterprotec1").val(_val);
                                $("#displdisplay").css("display", "block")
                                $("#_scrapdatetec1display").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                            } else {
                                crapdatetec1 = null;
                                $("#displdisplay").css("display", "none")
                            }
                            $("#remaketec1").val(data.Getdata[0].val.TECH1_ANLYS_RESULT);  //ผลการตรวจสอบ
                            ///lock Display Technic 1 : วิเคราะห์สินค้าเคลม///
                            $("#_nametec1").attr("disabled", "disabled");//ตรวจสอบโดย
                            $("#_anlysdatetec1").attr("disabled", "disabled");   //วันที่วิเคราะห์ปัญหา
                            $("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                            $("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                            $("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                            $("#_scrapdatetec1display").attr("disabled", "disabled");//วันที่ทำลาย:
                            $("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ

                            //Technic 2 : ผลการพิจารณา//
                            $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                            $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                            $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                            $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ

                            // lock Display Technic 2 : ผลการพิจารณา//
                            $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                            $("#_appdatetec").attr("disabled", "disabled"); //วันที่เทคนิคพิจารณา
                            $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                            $("#remaketec2").attr("disabled", "disabled");  //หมายเหตุ

                            //Product Manager Approval //

                            $("#_PM").val(data.Getdata[0].val.PROD);  // Product Manager
                            $("#_pmdate").val(data.Getdata[0].val.PM_APPRV_DATE); //วันที่PM พิจารณา
                            $("#_pmtstus").val(data.Getdata[0].val.PM_APPRV_STATUS); //สถานะอนุมัติ
                            $("#remakepm").val(data.Getdata[0].val.PM_REMARK);
                            $("#_pmnewpn").val(data.Getdata[0].val.PM_Replacemen);

                            // lock Display Product Manager Approval //
                            $("#_PM").attr("disabled", "disabled");   // Product Manager
                            $("#_pmdate").attr("disabled", "disabled");  //วันที่PM พิจารณา
                            $("#_pmtstus").attr("disabled", "disabled");  //สถานะอนุมัติ
                            $("#remakepm").attr("disabled", "disabled");
                            $("#_pmnewpn").attr("disabled", "disabled");
                        }
                    }
                });

                $.ajax({
                    url: '@Url.Action("GetfileVideo", "GetdataCenter")',
                    data: {
                        inCLM_ID: req_no,
                        CLM_NO: clm_no_sub,
                        Im_No: "01"

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result.videolist)
                        if (result.videolist.length > 0) {
                            $('#appvideo').html("");
                            for (var i = 0; i < resultObj.length; i++) {
                                SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';
                                SubmithtmlPage += '</video>';
                                $('#appvideo').append(SubmithtmlPage);
                                // HTMLbuilder = HTMLbuilder + imgHtml;
                            }


                        } else {

                        }
                    },
                });
                $.ajax({
                    url: '@Url.Action("GetfileVideoWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: req_no,
                        CLM_NO: clm_no_sub,
                        Im_No: "01"
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result.videolist)
                        if (result.videolist.length > 0) {
                            $('#appvideosales').html("");
                            for (var i = 0; i < result.videolist.length; i++) {
                                SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';
                                SubmithtmlPage += '</video>';
                                $('#appvideosales').append(SubmithtmlPage);
                                // HTMLbuilder = HTMLbuilder + imgHtml;
                            }


                        } else {

                        }
                    },
                });
                $.ajax({
                    url: '@Url.Action("GetfileVideoWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: req_no,
                        CLM_NO: clm_no_sub,
                        Im_No: "TEC01"
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result.videolist)
                        if (result.videolist.length > 0) {
                            $('#appvideotech').html("");
                            for (var i = 0; i < result.videolist.length; i++) {
                                SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';

                                SubmithtmlPage += '</video>';
                                $('#appvideotech').append(SubmithtmlPage);
                                // HTMLbuilder = HTMLbuilder + imgHtml;
                            }


                        } else {

                        }


                    },
                });
                //Getimage//
                $.ajax({
                    url: '@Url.Action("GetPathImageWH", "GetdataCenter")',
                    data: {
                        inCLM_ID: req_no,
                        CLM_NO: clm_no_sub
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result);
                        if (result.Getdata.length > 0) {
                            //$("#myModalimage").modal();
                            $('#boximage').html("");
                            if (result.Getdata) {
                                resultObj = eval(result.Getdata);
                                var SubmithtmlPage = "";
                                for (var i = 0; i < resultObj.length; i++) {
                                    var str = resultObj[i].val.IMAGE_NO;
                                    var res = str.substring(0, 3);
                                    if (res != "TEC") {
                                        SubmithtmlPage = '<div class="col-sm-3">';
                                        SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                        SubmithtmlPage += '</div>';
                                        $('#boximage').append(SubmithtmlPage);
                                        // HTMLbuilder = HTMLbuilder + imgHtml;
                                    }
                                }
                            } else {

                                $("#myModalimage").modal();
                            }
                        } else {
                            $('#boximage').html("");
                            SubmithtmlPage = '<div class="col-sm-3" style="color: red;">';
                            SubmithtmlPage += 'ไม่มีภาพประกอบการเคลมสินค้า';
                            SubmithtmlPage += '</div>';
                            $('#boximage').append(SubmithtmlPage);
                        }
                    }
                });
                $("#boximagetechnic").html("");
                $.ajax({
                    url: '@Url.Action("GetPathImage", "GetdataCenter")',
                    data: {
                        inCLM_ID: req_no,
                        CLM_NO: clm_no_sub
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result);
                        if (result.Getdata.length > 0) {
                            //$("#myModalimage").modal();
                            $('#boximagetechnic').html("");
                            if (result.Getdata) {
                                resultObj = eval(result.Getdata);
                                var SubmithtmlPage = "";
                                for (var i = 0; i < resultObj.length; i++) {
                                    var str = resultObj[i].val.IMAGE_NO;
                                    var res = str.substring(0, 3);
                                    if (res == "TEC") {
                                        SubmithtmlPage = '<div class="col-sm-3">';
                                        SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                        SubmithtmlPage += '</div>';
                                        $('#boximagetechnic').append(SubmithtmlPage);
                                    }
                                    // HTMLbuilder = HTMLbuilder + imgHtml;
                                }
                            } else {

                                //  $("#myModalimage").modal();
                            }
                        }
                    }
                });
            });
            $(document).on('click', '#myImg', function () {
                var modal = document.getElementById('myModalzoom');
                var img = document.getElementById('myImg');
                var modalImg = document.getElementById("img01");
                var captionText = document.getElementById("caption");
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = this.alt;
            });
            $(document).on('click', '.close', function () {
                var modal = document.getElementById('myModalzoom');
                modal.style.display = "none";
            });
            $(document).on('click', '#closeimg', function () {
                var modal = document.getElementById('myModalzoom');
                modal.style.display = "none";
            });
            $(document).on('click', '#myModalzoom div', function () {
                var modal = document.getElementById('myModalzoom');
                modal.style.display = "none";
            });
            $("#_updateafterprodate").on("click", function () {
                var data = new Array();
                var _user = $("#_uderlogin").val();
                var req_no = $("#textclaimno").text();
                var clm_no_sub = $("#textclaimno_sub").text();
                var scrapdatetec1 = $("#_scrapdatetec1").val();
                if (scrapdatetec1 == "") {
                    $("#textAlertSucces").empty();
                    $("#textAlertSucces").text("กรุณาระบุวันที่ทำลาย");
                    $("#myModalSucces").modal();
                    return false;
                }
                $('.chksave').each(function () {
                    if ($(this).is(':checked')) {// check the checked property with .is

                        var req_no = $(this).attr('claimno').trim();
                        var clm_no_sub = $(this).attr('claimsupno').trim();

                        var ItemList = {
                            req_no: req_no,
                            clm_no_sub: clm_no_sub,
                            scrapdatetec1: scrapdatetec1,
                            user: _user
                        }
                        data.push(ItemList);
                    }
                });
                if (data.length == 0) {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("ไม่มีข้อมูลที่ท่านต้องการบันทึก");
                    $("#myModalWarning").modal(); return false;
                }

                var DataSend = JSON.stringify(data)
                $.ajax({
                    url: '@Url.Action("Updateafterdateprocess", "Checkstatus_Sc")',
                    data: {
                        User: _user,
                        DataSend: DataSend

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        if (data.message == "true") {

                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("บันทึกวันที่ทำลายสินค้าสำเร็จ");
                            $("#myModalSucces").modal();
                            $("#linkmodelsavenodate").click();
                        } else {
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text(data.message);
                            $("#myModalSucces").modal();
                        }
                    }
                }); myModalconfrimprint
            });
            $("table").on("click", "tr #_btnPrintclim", function () {
                var nokey = $(this).attr('req_no');
                var nosubkey = $(this).attr('clm_no_sub');
                var UserId = $("#_uderlogin").val();
                var udertype = $("#_udertype").val();
               
                $("#refromreqest").attr("req_no", nokey);
                $("#refromreqest").attr("clm_no_sub", nosubkey);
                $("#myModalconfrimprint").modal();
                //var _chk = $(this).attr('statusclaimup');
                //if (_chk != "4") {
                //    $("#refrompredeli").css("display", "none");
                //} else {
                //    $("#refrompredeli").css("display", "block");

                //    $("#refrompredeli").attr("req_no", nokey);
                //    $("#refrompredeli").attr("clm_no_sub", nosubkey);
                //}
                if (udertype == "1" || udertype == "2") {
                    //if (_chk != "1") {
                      //  $("#btnprintlabal").css("display", "none");
                   // } else {
                        $("#btnprintlabal").css("display", "block");
                        $("#btnprintlabal").attr("req_no", nokey);
                        $("#btnprintlabal").attr("clm_no_sub", nosubkey);

                        $("#refrompredeli").attr("req_no", nokey);
                        $("#refrompredeli").attr("clm_no_sub", nosubkey);
                   // }
                } else {
                    $("#refrompredeli").css("display", "block");
                    $("#refromreqest").css("display", "none");
                    $("#refrompredeli").attr("req_no", nokey);
                    $("#refrompredeli").attr("clm_no_sub", nosubkey);
                    $("#btnprintlabal").css("display", "none");
                }
            });
            $("#btnprintlabal").click(function () {
                var nokey = $(this).attr('req_no');
                var nosubkey = $(this).attr('clm_no_sub');

                if (nokey != "" && nosubkey != "") {
                    if (nokey != "" && nosubkey != "") {
                        var wi = window.open("../Report/frmViewLabelWH.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey));
                        wi.focus();
                    }
                } else {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือกรายการสำหรับปริ้น Lable");
                    $("#myModalWarning").modal();
                    return false;
                }

                $("#myModalconfrimprint").modal("hide");
                //$("table tr #xxx").click();

            });
            $("#refrompredeli").on("click", function () {
                var claimno = $(this).attr('req_no');
                if (claimno != "") {
                    var wi = window.open("../Report/frmRequestClaimWH.aspx?ClmNUM=" + btoa(claimno));
                    wi.focus();

                }
                //var wi = window.open("../Report/frmReceiveproduct.aspx?ClmNUM=" + btoa(claimno));
                //wi.focus();
                $("#myModalconfrimprint").modal("hide");
            });
            $("#_btnprintrepall").on("click", function () {
                var _user = $("#_uderlogin").val();
                var data = new Array();
                $('#fixed-table-container-1 tr').each(function () {
                    var Id = $(this).find("td").eq(0).html();
                    var SubId = $(this).find("td").eq(2).html();
                    var ItemList = {
                        req_no: Id,
                        clm_no_sub: SubId,
                        user: _user
                    };
                    if (Id != undefined) {
                        // strin += Id + ",";
                        data.push(ItemList);
                    }

                });
                var DataSend = JSON.stringify(data);
                console.log(data);
                //  console.log(data);
                if (data.length == 0) {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณากด Search เลือกข้อมูลที่ต้องการพิมพ์");
                    $("#myModalWarning").modal();
                    return false;
                } else {

                    for (var i = 0; i < data.length; i++) {
                        var nokey = "";
                        var nosubkey = "";
                        var udertype = "";

                        nokey = data[i].req_no;
                        nosubkey = data[i].clm_no_sub;
                        console.log("nokey" + nokey);
                        console.log("nosubkey" + nosubkey);
                        udertype = 'TECH';
                        if (nokey != "" && nosubkey != "") {
                            var wi = window.open("../Report/frmClaimWH.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey) + "/" + btoa(udertype));
                            wi.focus();
                            //$("#myModalconfrimprint").modal("hide");
                        }

                        $.ajax({
                            url: '@Url.Action("CountPrint", "Checkstatus_WH")',
                            data: { User: _user, clm_no_sub: nosubkey },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                //alert(data)
                                if (data = "true") {



                                }
                            }
                        });

                    }
                }
            });
            //APS//
            $("#refromreqest").on("click", function () {
                var nokey = $(this).attr('req_no');
                var nosubkey = $(this).attr('clm_no_sub');
                var UserId = $("#_uderlogin").val();
                var _udertype;
                var _uderTd;
                $.ajax({
                    url: '@Url.Action("GetdataDepartment", "GetdataCenter")',
                    data: { User: UserId },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // $("#_udertype").val(data.Usetpye);
                        _udertype = data.Department;
                        //  alert(data.Department)
                        _uderTd = data.Usetpye;
                        if (_uderTd == "1") {
                            $.ajax({
                                url: '@Url.Action("CountPrint", "Checkstatus_WH")',
                                data: { User: UserId, clm_no_sub: nosubkey },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {

                                }
                            });

                        }
                        if (_udertype == "Technical") {
                            udertype = 'TECH';


                        } else if (_udertype == "Product") {
                            udertype = 'PM';
                        } else if (_udertype == "SalesCo") {
                            udertype = 'SALES';
                        } else if (_udertype == "Sales") {
                            udertype = 'SALES';
                        }
                        else if (_udertype == "Customer Service") {
                            udertype = 'CS';
                        } else if (_udertype == "Log") {
                            udertype = 'LOG';
                        }


                        if (nokey != "" && nosubkey != "") {
                            var wi = window.open("../Report/frmClaimWH.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey) + "/" + btoa(udertype));
                            wi.focus();
                            $("#myModalconfrimprint").modal("hide");
                        } else {
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("กรุณาเลือกรายการสำหรับปริ้น");
                            $("#myModalWarning").modal();
                            return false;
                        }
                        $("#myModalconfrimprint").modal("hide");
                        $("#PrintModal").modal('hide');
                        var claimnokey = nokey;
                        GetClimtemp(claimnokey);
                        // $("#_btnsearchclaimno").click();
                        // $("table tr #xxx").click();
                    }
                });
            });
            @*$("table").on("click", "tr #_btnPrintclim", function () {
                var nokey = $(this).attr('req_no');
                var nosubkey = $(this).attr('clm_no_sub');
                var UserId = $("#_uderlogin").val();
                var _udertype;
                var _uderTd;
                $.ajax({
                    url: '@Url.Action("GetdataDepartment", "GetdataCenter")',
                    data: { User: UserId },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        // $("#_udertype").val(data.Usetpye);
                        _udertype = data.Department;
                        //  alert(data.Department)
                        _uderTd = data.Usetpye;
                        if (_uderTd == "1") {
                            $.ajax({
                                url: '@Url.Action("CountPrint", "Checkstatus_Sc")',
                                data: { User: UserId ,clm_no_sub:nosubkey },
                                type: "POST",
                                dataType: "JSON",
                                success: function (data) {

                                }
                            });

                        }
                if (_udertype == "Technical") {
                    udertype = 'TECH';


                } else if (_udertype == "Product") {
                    udertype = 'PM';
                } else if (_udertype == "SalesCo") {
                    udertype = 'SALES';
                } else if (_udertype == "Sales") {
                    udertype = 'SALES';
                }
                else if (_udertype == "Customer Service") {
                    udertype = 'CS';
                } else if (_udertype == "Log") {
                    udertype = 'LOG';
                }


                if (nokey != "" && nosubkey != "") {
                    var wi = window.open("../Report/frmClaim.aspx?ClmNUM=" + btoa(nokey) + "/" + btoa(nosubkey) + "/" + btoa(udertype));
                    wi.focus();
                } else {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("กรุณาเลือกรายการสำหรับปริ้น");
                    $("#myModalWarning").modal();
                    return false;
                }

                $("#PrintModal").modal('hide');
                var claimnokey = nokey;
                GetClimtemp(claimnokey);
                // $("#_btnsearchclaimno").click();
                // $("table tr #xxx").click();
                    }
                });

            });*@
            $("#refresh").on("click", function (e) {

                location.reload(true);

            });
            $("table").on("click", "tr #_btndelclaim", function () {

                var _user = $("#_uderlogin").val();

                var req_no = $(this).attr('req_no');
                var clm_no_sub = $(this).attr('clm_no_sub');

                $("#confirm-delete").modal();
                var row_d = $(this).attr('cartid');

                $('#del').attr("req_no", req_no);
                $('#del').attr("clm_no_sub", clm_no_sub);
                $('#del').attr("user", _user);
            });
            $("#del").on("click", function () {
                var _user = $("#_uderlogin").val();
                var req_no = $(this).attr('req_no');
                var clm_no_sub = $(this).attr('clm_no_sub');
                $.ajax({
                    url: '@Url.Action("Cancelclaim", "Checkstatus_wh")',
                    data: {
                        User: _user,
                        req_no: req_no,
                        clm_no_sub: clm_no_sub
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        if (data.message == "true") {

                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("ยกเลิกรายการเคลมสำเร็จ");
                            $("#myModalSucces").modal();
                            GetClimline("", "TAC", "1", "", "", "", "0", "0", "ALL")
                            //$("#_btnsearch").click();
                        } else {
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text(data.message);
                            $("#myModalSucces").modal();
                        }
                    }
                });
            });
            $("table").on("click", "tr #_btnsupplier", function () {
                //_udertype
                var _user = $("#_uderlogin").val();
                $.ajax({
                    url: '@Url.Action("GetdataUsetype", "GetdataCenter")',
                    data: { User: _user },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);

                        if (data.Usetpye == "1") {
                            // $("#_statusClaimsupplier").removeAttr("disabled");
                            // $("#_supplierno").removeAttr("disabled");
                            // $("#_btnsupplier").removeAttr("disabled");
                            //  $("#_btnsupplier").css("display", "block");
                        }
                        else if (data.Usetpye == "2") {

                            // $("#_statusClaimsupplier").removeAttr("disabled");
                            // $("#_supplierno").removeAttr("disabled");
                            //$("#_btnsupplier").removeAttr("disabled");
                            // $("#_btnsupplier").css("display", "block");
                        }

                        else {

                            // $("#_btnsupplier").attr("disabled", "disabled");
                            //  $("#_statusClaimsupplier").attr("disabled", "disabled");
                            //$("#_supplierno").attr("disabled", "disabled");
                            //  $("#_btnsupplier").css("display", "none");
                        }
                    }
                });
                var req_no = $(this).attr('req_no');
                var clm_no_sub = $(this).attr('clm_no_sub');
                var supstatus = $(this).attr('supstatus');
                var supno = $(this).attr('supno');
                var supdate = $(this).attr('supdate');
                $('#_dowloadpdf').attr("req_no", req_no);
                $('#_dowloadpdf').attr("clm_no_sub", clm_no_sub);
                if (supdate != "") {
                    $("#_statusClaimsupplier").val(supstatus);
                } else {
                    $("#_statusClaimsupplier").val("0");
                }
                if (supno != "") {
                    $("#_supplierno").val(supno);
                } else {
                    $("#_supplierno").val("");
                }

                $("#supno").text(req_no);
                $("#supno_sub").text(clm_no_sub);
                $("#textAlertWarning").empty();
                $("#textAlertWarning").text("เลขที่เคลม: " + req_no + "  line No.: " + clm_no_sub);
                $("#myModalsupplier").modal();

            });

            $("#_btnsupplier").click(function () {
                var req_no = $("#supno").text();
                var clm_no_sub = $("#supno_sub").text();
                var usrlogin = $("#_uderlogin").val();
                var statusClaimsupplier = $("#_statusClaimsupplier").val();
                if (statusClaimsupplier == "0") {
                    $("#textAlertWarningmes").empty();
                    $("#textAlertWarningmes").text("กรุณาเลือกสถานะเคลมจากsupplier");
                    $("#myModalWarning").modal();
                    return false;
                }
                var supplierno = $("#_supplierno").val();
                $.ajax({
                    url: '@Url.Action("SaveClaimsupplier", "Checkstatus_Sc")',
                    data: {
                        inCLM_ID: req_no,
                        inCLM_SUB: clm_no_sub,
                        inCLM_FRMSUP_NO: supplierno,
                        inCLM_FRMSUP_STATUS: statusClaimsupplier,
                        inusrlogin: usrlogin
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if (data.message == "true") {

                            //$("#textAlertSucces").empty();
                            //$("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                            // $("#myModalSucces").modal();
                            $("#btnUpload1").click();
                            //$("#myModalsupplier").
                        } else {

                            $("#textAlertWarningmes").empty();
                            $("#textAlertWarningmes").text(data.message);
                            $("#myModalWarning").modal();
                        }
                    }
                });


                $('#btnUpload1').click(function () {
                    // Checking whether FormData is available in browser
                    if (window.FormData !== undefined) {
                        var a1 = $("#supno").text();
                        var a2 = $("#supno_sub").text();
                        var supplierno = $("#_supplierno").val();
                        var fileUpload = $("#FileUpload1").get(0);
                        var files = fileUpload.files;
                        console.log(files);
                        if (files.length == 0) {
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                            $("#myModalSucces").modal();
                            $("#myModalsupplier").modal('hide');
                            return false;
                        }
                        var inCim_NoSub = $("#supno_sub").text();
                        // Create FormData object
                        var fileData = new FormData();
                        // Looping over all files and add it to FormData object
                        for (var i = 0; i < files.length; i++) {

                            fileData.append(files[i].name, files[i], a1 + "-" + a2 + "-" + supplierno);
                        }
                        // Adding one more key to FormData object
                        // fileData.append('username', 'gdb1100');

                        $.ajax({
                            url: '@Url.Action("UploadPdf", "Checkstatus_Sc")',
                            type: "POST",
                            contentType: false, // Not to set any content header
                            processData: false, // Not to process data
                            data: fileData,
                            success: function (result) {
                                //alert(result);
                                if (result.message == "true") {
                                    var Img = result.imgname;
                                    $.ajax({
                                        url: '@Url.Action("SavePathPdf", "Checkstatus_Sc")',
                                        data: {
                                            im_name: Img,
                                            Cim_No: a1,
                                            Im_No: "01",
                                            inCim_NoSub: inCim_NoSub
                                        },
                                        type: "POST",
                                        dataType: "JSON",
                                        success: function (data) {
                                            console.log(data);
                                            // alert(data.path)
                                            if (data.message == 'true') {
                                                $('#ststus1').text(data.message);
                                                $("#textAlertSucces").empty();
                                                $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ");
                                                $("#myModalSucces").modal();
                                            } else {

                                                $("#textAlertWarningmes").empty();
                                                $("#textAlertWarningmes").text(data.message);
                                                $("#myModalWarning").modal();
                                            }
                                        }
                                    });

                                }
                            },
                            error: function (err) {
                                alert(err.statusText);
                            }
                        });
                    } else {
                        alert("FormData is not supported.");
                    }
                });

            });

            $('#_dowloadpdf').click(function () {
                var req_no = $(this).attr('req_no');
                var clm_no_sub = $(this).attr('clm_no_sub');
                //GetPdf//

                $.ajax({
                    url: '@Url.Action("GetPathPdf", "GetdataCenter")',
                    data: {
                        inCLM_ID: req_no,
                        CLM_NO: clm_no_sub
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (result) {
                        console.log(result);
                        if (result.Getdata.length > 0) {
                            //$("#myModalimage").modal();

                            if (result.Getdata) {
                                resultObj = eval(result.Getdata);
                                var SubmithtmlPage = "";
                                for (var i = 0; i < resultObj.length; i++) {

                                    window.open(resultObj[i].val.PATH);
                                }
                            } else {

                                //$("#myModalimage").modal();
                            }
                        } else {
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("ไม่มี File Download");
                            $("#myModalSucces").modal();
                        }
                    }
                });
            });
        });





    </script>

</body>
</html>

