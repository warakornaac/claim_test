@{
    ViewBag.Title = "Approve";
    Layout = "~/Views/Shared/_Layoutindex.cshtml";
    var user = ViewBag.UserId;
    var usertype = ViewBag.UserType;
    var company = ViewBag.Company;

}
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Process Claim Document</title>
    <link href="~/Content/css/sb-admin-A.css" rel="stylesheet" />

    <link href="~/Scripts/JSautocomplete/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/JSautocomplete/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/JSautocomplete/jquery-ui.js"></script>
    <script src="~/Content/fixed-table-master/fixed-table.js"></script>

    <link href="~/Content/fixed-table-master/fixed-table.css" rel="stylesheet" />
    <script src="~/Scripts/SortTable-master/sort-table.js"></script>

    <style>
        #myImg {
            border-radius: 5px;
            cursor: pointer;
            transition: 0.3s;
        }

            #myImg:hover {
                opacity: 0.7;
            }

        /* The Modal (background) */
        .modalx {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            padding-top: 100px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
        }

        /* Modal Content (Image) */
        .modal-contentx {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 1200px;
        }

        /* Caption of Modal Image (Image Text) - Same Width as the Image */
        #caption {
            margin: auto;
            display: block;
            width: 80%;
            max-width: 700px;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
        }

        /* Add Animation - Zoom in the Modal */
        .modal-content, #caption {
            animation-name: zoom;
            animation-duration: 0.6s;
        }
        /* The Close Button */
        .close {
            position: absolute;
            top: 56px;
            right: 20px;
            color: #f1f1f1;
            font-size: 57px;
            font-weight: bold;
            /* transition: 0.3s; */
            left: 1656px;
        }

            .close:hover,
            .close:focus {
                color: #bbb;
                text-decoration: none;
                cursor: pointer;
            }

        .preserveLineBreaks {
            white-space: pre-line; /*or pre-wrap*/
        }

        input[type="file"] {
            display: block;
        }

        input[type="text"] {
            /*background: border-box border-box;*/
            color: blue;
        }

        input[type="date"] {
            /*background: border-box border-box;*/
            color: blue;
        }

        input[type="checkbox"] {
            width: 35px;
            zoom: 2;
            padding: 2px;
            -webkit-appearance: checkbox;
        }

        .imageThumb {
            max-height: 75px;
            border: 2px solid;
            padding: 1px;
            cursor: pointer;
        }

        .pip1 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove1 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove1:hover {
                background: white;
                color: black;
            }

        .pip2 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove2 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove2:hover {
                background: white;
                color: black;
            }

        .pip3 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove3 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove3:hover {
                background: white;
                color: black;
            }

        .pip4 {
            display: inline-block;
            margin: 10px 10px 0 0;
        }

        .remove4 {
            display: block;
            background: #444;
            border: 1px solid black;
            color: white;
            text-align: center;
            cursor: pointer;
        }

            .remove4:hover {
                background: white;
                color: black;
            }

        .gi-4x {
            font-size: 2em;
        }

        .table thead > tr > th {
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog modal-lg" style=" max-width: 1200px;">
            <div class="modal-content">
                <div class="modal-header">

                    <h4 class="modal-title">Invoice History</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" @*style="overflow-x:scroll" *@>
                    <table id="_tbinvoicehiscx">
                        <thead>
                            <tr>
                                <th style=" min-width: 115px; height: 60px; border: 1px solid #222;">Invoice No</th>
                                @*
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                <th style=" min-width: 85px; height: 60px; border: 1px solid #222;">Invoice Date</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Item No.</th>
                                <th style=" min-width: 200px; height: 60px; border: 1px solid #222;">Description</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">UOM</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Stock<br />Group</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Qty</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Unit Price</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />Discount %</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Line <br />discount Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Amount</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sale Man</th>
                                <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Customer</th>

                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="myModalimage" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Image</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body" style="overflow-x:scroll">
                    <table id="_tbimage">
                        <thead>
                            <tr>
                                <th style="min-width: 645px;height: 60px;border: 1px solid #222;text-align: center;">Image</th>
                                @*
                                    <th style=" min-width: 80px; height: 60px; border: 1px solid #222;">Sel</th>*@
                                <th style="min-width: 134px;height: 60px;border: 1px solid #222;text-align: center;">Delete</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Trigger the modal with a button -->
    <!-- ModalWarning -->
    <div id="myModalWarning" class="modal fade in" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">

        <div class="modal-dialog" role="document">

            <div class="alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong>
                <div class="modal-body">
                    <div id="textAlertWarning">Some text in the modal.</div>
                </div>

            </div>
        </div>
    </div>
    <!-- Modalsuccess -->
    <div class="modal fade" id="myModalSucces" role="dialog">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="modal" aria-label=" close"><span aria-hidden="true">&times;</span></button>
                <strong>Success</strong>
                <div class="modal-body">
                    <div id="textAlertSucces">Save success</div>
                </div>

            </div>
        </div>
    </div>
    <div class="card mb-12">
        <div class="card-header">
            <i class="fa fa-th-list "></i> Approve Claim Customer (SM) <li id="clickmeheader" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
        </div>
        <div class="card-body" id="myDIVheader">
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>SlmCod:</span>
                        <select class="bar" id="slmcod"></select>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-user"></i> Product Manager:</span>
                        <span>
                            <select class="bar" id="_PM"></select>
                        </span>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="group" style=" margin-bottom: 22px;">
                        <span> <i class="fa fa-user"></i> Company:</span>
                        <select class="bar" id="_company">
                            <option value="0" disabled>Choose option</option>
                            <option value="TAC">TAC</option>
                            <option value="AAC">AAC</option>
                            <option value="OMP">OMP</option>
                            <option value="TAM">TAM</option>
                            <option value="ALL" selected>ALL</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Tech Request start date:</span>
                        <span><input type="date" data-date-format="dd/mm/yy" id="_statdate"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Tech Request end date:</span>
                        <span><input type="date" data-date-format="dd/mm/yy" id="_enddate"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Stk Group.:</span>
                        <span><select id="_stkgrp"></select></span>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <div class="form-group">
                            <span> <i class="fa fa-pencil"></i>Customer Request start date:</span>
                            <span><input type="date" data-date-format="dd/mm/yy" id="_statdatecus"></span>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Customer Request end date:</span>
                        <span><input type="date" data-date-format="dd/mm/yy" id="_enddatecus"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">

                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Status.:</span>
                        <span>
                            <select id="_status" style="font-size: 16px;padding: 8px 0px 0px 2px;display: block;border: none;border-bottom: 1px solid #1b1919;width: 217px;"></select>
                        </span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <span> <i class="fa fa-pencil"></i>Item No.:</span>
                        <span><input type="text" required id="_itemnosearch"></span>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <button type="button" class="btn btn-success" id="_btnsearch">Search</button>
                    </div>
                </div>
            </div>


            @*<div class="row">
                    <div class="col-md-5">
                        <div class="input-group">
                            <span>
                                <i class="fa fa-pencil"></i>Search Claim No : &nbsp;
                            </span>
                            <input class="form-control" type="text" id="searchclaimno">
                            <span class="input-group-btn">
                                <button class="btn btn-primary" type="button" id="_btnsearchclaimno">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>*@

            <div class="row">
                <div class="col-md-4">
                    <i class="fa fa-pencil"></i>Search Claim No :
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Claim No" aria-label="Claim No" aria-describedby="basic-addon2" id="searchclaimno">
                        <div class="input-group-append">
                            <button id="_btnsearchclaimno" class="btn btn-primary" type="button" style="margin-left: -2px;">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div id="fixed-table-container-2" class="fixed-table-container" style="z-index:1;">
                <table class="table table-bordered table-hover js-sort-table">
                    <thead>
                        <tr>
                            <th style=" width: 134px; height: 100%;">  line no</th>
                            <th>Ref No.</th>
                            <th>Item No.</th>
                            <th>UOM</th>
                            <th>Stock<br />Group</th>
                            <th>Request<br /> Qty.</th>
                            <th>Receive<br /> Qty.</th>
                            <th>Accept<br /> Qty.</th>
                            <th>Reject<br /> Qty.</th>
                            <th>Customer.</th>
                            <th>Sales Man.</th>
                            <th>Invoice No <br />/Invoice Date</th>
                            <th class="is-date">Cus Request<br /> Date</th>
                            <th class="js-sort-date">วันที่ Admin <br />รับสินค้า//Admin receive date</th>
                            <th class="js-sort-date">Tech <br />Request Date</th>
                            <th style="text-align:center">สาเหตุการเคลม/Problem</th>
                            <th>ดำเนินการ/CN/Replacement</th>
                            <th>การวิเคราะห์</th>
                            <th>
                                ระยะ<br />
                                การใช้งาน<br />
                                ปี/เดือน/วัน/ชม./Period of use<br />
                            </th>
                            @*
                                <th>Edit</th>*@
                            <th style="text-align:center">หมายเหตุ<br />รับสินค้า/Remark receive part</th>
                            <th>ตรวจสอบ<br />รับสินค้า//Check pick claim part</th>
                            <th>Tech<br />1</th>
                            <th>Tech<br />2</th>
                            <th>PM</th>
                            <th class="comTam" style="display: none;">Saleman</th>
                            <th class="comTam" style="display: none;">Management</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>

            </div>

            <div class="card mb-12" id="divShowSearch" style="display: none;">
                <div class="card-header">
                    <i class="fa fa-table"></i>รายละเอียดสินค้าเคลม/Claim Details <li id="clickme" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV">
                    <div><span id="Nospankey" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                    <div><span id="subNospan" style="color: blue;text-decoration: underline;font-weight: bold"></span> </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Customer Code:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_cusno"></span>
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Customer name:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_cusname"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Request by:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="requestby"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> SlmCod.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="slmcod"></span>
                            </div>
                        </div>

                        <div class="col-md-5">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> SlmName:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="sslmnam"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Request Date:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="requestdate"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Item No.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_itemno"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Description:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_description"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Uom:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_uom"></span>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Invoice No.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoiceno"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Invoice Date:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_psdate"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Invoice Qty:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoiceqty"></span>
                            </div>
                        </div>
                        <div class="col-xs-6">
                            <div class="form-group">

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Unit Price.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_unitPrice"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Line amount.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoicelineamt"></span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Line Discount %:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoicelinedis"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Line discount Amount:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_invoicelinedisamt"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                            </div>
                        </div>  
                        <div class="col-md-4">
                            <div class="form-group">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Type.:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_foc"></span>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Stock Group:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_stkgup"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-clock-o"></i> ระยะการใช้งานY/M/D/hh/Period of use:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_workda"></span>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Request Qty:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimqty"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Accept Qty:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimqty_pass"></span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Rejecy Qty:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_claimqty_reject"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">

                        <div class="col-sm-12">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สาเหตุการ Claim/Problem:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="causeclaim"></span>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> ดำเนินการ/CN/Replacement:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_proceedto"></span>

                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะรับของเคลม/Pick modes:</span>
                                <span style="color: blue;text-decoration: underline;font-weight: bold" id="_statusclaim"></span>

                            </div>
                        </div>
                    </div>

                    <div class="col-xs-6">
                        <div class="form-group">

                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <span class="fa fa-image">Video By Sales:</span>
                                    <div class="py-4" id="appvideosales">


                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <span class="fa fa-image">Video By Technic:</span>
                                    <div class="py-4" id="appvideotech">


                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span class="fa fa-image">Image By Sales:</span>

                                </div>
                            </div>
                        </div>
                        <div class="row" id="boximage">

                        </div>
                    </div>
                    <div class="col-md-12">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="form-group">
                                    <span class="fa fa-image">Image By Technic:</span>

                                </div>
                            </div>
                        </div>
                        <div class="row" id="boximagetechnic">

                        </div>
                    </div>
                </div>
                <div class="card-header">
                    <i class="fa fa-table"></i>ข้อมูลเคลมสำหรับรุ่นรถ/Claim details <li id="clickme5" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV5" style="display:none">
                    <div id="fixed-table-container-8" class="fixed-table-container" style="overflow-x: auto;">
                        <table id="_tbvehcar">
                            <tbody>
                                <tr>
                                    <td style="background: white;">1.สำหรับรถ Vehicle/Machine:<input type="text" id="_vemac" /></td>
                                    <td>2.รุ่น Model/Type:<input type="text" id="_moty" /></td>
                                    <td>3.ปีผลิต Model Year:<input type="text" id="_modyear" /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">4.รหัสเครื่องยนต์ Engine Code:<input type="text" id="_encod" /></td>
                                    <td>5.หมายเลขตัวถังรถ Chassis No.:<input type="text" id="_chno" /></td>
                                    <td>6.รหัสปั้มเชื้อเพลิง Pump:<input type="text" id="_pump" /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">7.ประเภทสินค้า Type of Product:<input type="text" id="_typpro" /></td>
                                    <td>8.ใบรับประกันเลขที่เคลม Warranty Card No.:<input type="text" id="_warcarno" /></td>
                                    <td>9.ระยะทางการใช้งาน Milage(Km./Mile):<input type="text" id="_milage" /></td>
                                </tr>
                                <tr>
                                    <td style="background: white;">10.วันที่ชำรุด Date of Damage:<input type="date" id="_datofdam" /></td>
                                    <td>
                                        11.ชั่วโมงการทำงาน Hour of Operation:<br />
                                        <div style="float: left;">
                                            ปี:<select id="_workdacar" style="width: 70px;">
                                                <option>0</option>
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                                <option>6</option>
                                                <option>7</option>
                                                <option>8</option>
                                                <option>9</option>
                                                <option>10</option>
                                                <option>11</option>
                                                <option>12</option>

                                            </select>
                                        </div>
                                        <div style="float: left;">
                                            เดือน:<select id="_workmonth" style="width: 70px;">
                                                <option>0</option>
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                                <option>6</option>
                                                <option>7</option>
                                                <option>8</option>
                                                <option>9</option>
                                                <option>10</option>
                                                <option>11</option>
                                                <option>12</option>
                                            </select>
                                        </div>
                                        <div style="float: left;">
                                            วัน:<select id="_workday" style="width: 70px;">
                                                <option>0</option>
                                                <option>1</option>
                                                <option>2</option>
                                                <option>3</option>
                                                <option>4</option>
                                                <option>5</option>
                                                <option>6</option>
                                                <option>7</option>
                                                <option>8</option>
                                                <option>9</option>
                                                <option>10</option>
                                                <option>11</option>
                                                <option>12</option>
                                                <option>13</option>
                                                <option>14</option>
                                                <option>15</option>
                                                <option>16</option>
                                                <option>17</option>
                                                <option>18</option>
                                                <option>19</option>
                                                <option>20</option>
                                                <option>21</option>
                                                <option>22</option>
                                                <option>23</option>
                                                <option>24</option>
                                                <option>25</option>
                                                <option>26</option>
                                                <option>27</option>
                                                <option>28</option>
                                                <option>29</option>
                                                <option>30</option>
                                                <option>31</option>
                                            </select>
                                        </div>
                                        <div style="float: left;">
                                            ชม.:<input type="time" id="_worktime" style="width: 70px;height: 31px;" />
                                        </div>
                                    </td>
                                    <td>12.รหัสการผลิต Batch Code:<input type="text" id="_batcod" /></td>
                                </tr>
                                <tr style="display:none">
                                    <td style="background: white;">13.วันที่ติดตั้ง: <input type="date" id="_installdate" disabled="disabled" /></td>
                                    <td>14.ชื่อผู้ติดต่อรับสินค้าเคลม <input type="text" id="_claimcontact" disabled="disabled" /></td>
                                    <td>15.เบอร์ติดต่อ <input type="text" id="_contact" disabled="disabled" /></td>
                                </tr>
                                <tr></tr>
                            </tbody>
                        </table>
                    </div>
                </div>


                @*ตรวจสอบรับสินค้าเคลม*@
                <div class="card-header">
                    <i class="fa fa-table"></i>ตรวจสอบรับสินค้าเคลม/Check pick claim part <li id="clickme4" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV4" style="display:none">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการรับสินค้า/Status pick claim part:</span>
                                <span>
                                    <select class="bar" id="_proceedtotec"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ผู้รับสินค้าเคลม/Receive claim by:</span>
                                <span>
                                    <input type="text" id="_rcvbyte" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่รับสินค้าเคลม/Receive claim date:</span>
                                <span>

                                    <input type="date" id="_rcvdatetec" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> จำนวนที่รับเคลม/Receive claim qty.:</span>
                                <span>

                                    <input type="text" id="_rvqtytec" />
                                </span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Claim date:</span>
                                <span>
                                    <input type="text" id="_clmdatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Due date:</span>
                                <span>
                                    <input type="text" id="_duedatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                @*<span> <i class="fa fa-pencil"></i> UOM:</span>
                                    <span>
                                        <input type="text" id="_rcuom" />
                                    </span>*@
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <span><textarea class="form-control" rows="6" cols="100" id="causeclaimtec" placeholder="หมายเหตุการรับเคลม/Received remark"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> Admin:</span>
                                <span>
                                    <input type="text" id="_admintec" style="background: border-box border-box; color: blue;" disabled="disabled">
                                </span>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group">

                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">

                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                @*<span> <i class="fa fa-calendar"></i> วันที่ตรวจสอบ:</span>
                                    <span>
                                        <input type="date" data-date-format="dd/mm/yy" id="_datechecktec" />
                                    </span>*@
                            </div>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                @*<button class="btn-info" id="_btnsavecheck">บัททึกการตรวจสอบ</button>*@
                            </div>
                        </div>
                    </div>
                </div>
                @*Technic 1*@
                <div class="card-header">
                    <i class="fa fa-table"></i>Technic 1 : วิเคราะห์สินค้าเคลม/TECH1 Investigation <li id="clickme3" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV3" style="display:none">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ช่างที่รับผิดชอบ/TECH1 Name:</span>
                                <span>
                                    <input class="bar" id="_tecwork">
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>Shelf Location:</span>
                                <span>
                                    <input type="text" id="_shelfloctec" />
                                </span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> บันทึกโดย/Record by:</span>
                                <span>
                                    <input type="text" id="_nametec1" disabled="disabled" style="background: border-box border-box; color: blue;" />
                                </span>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่วิเคราะห์ปัญหา/Investigation date:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_anlysdatetec1" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-user"></i> ดำเนินการ/CN/Replacement:</span>
                                <span>
                                    <select class="bar" id="_perfromtec1"></select>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์ WR,WE,WF/Warranty claim type:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustec1"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม/Action after finished claim:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotec1"></select>
                                </span>
                            </div>
                        </div>
                        <div id="displ" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่ทำลาย/Destroy date:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <span><textarea class="form-control" rows="6" cols="100" id="remaketec1" placeholder="ผลการตรวจสอบ/Investigation details"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <button class="btn-info" id="_btnsavecheck" style="display:none">บันทึกผลการตรวจสอบ & วิเคาระห์/Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
                @*Technic 2*@
                <div class="card-header">
                    <i class="fa fa-table"></i>Technic 2 : ผลการพิจารณา/TECH2 Investigation <li id="clickme2" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="card-body" id="myDIV2" style="display:none">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class='fa fa-user'></i> รับรองการตรวจสอบโดย/TECH2 Name:</span>

                                <span>
                                    <input type="text" id="_name2tec" disabled="disabled" style="background: border-box border-box; color: blue;" />

                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่เทคนิคพิจารณา/Investigation date:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_appdatetec" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะ/Warranty claim type:</span>
                                <span>
                                    <select class="bar" id="_apprvststus"></select>
                                </span>
                            </div>
                        </div>
                    </div>
                    <span><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />
                    <div class="row">

                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="atech">Specific<br>
                                    <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="ctech">Good Will<br>

                                </form>

                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="btech">Manufacturing Defect<br>
                                    <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="dtech">Wrong Using<br>

                                </form>

                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="etech">Handing Damage<br>
                                    <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="ftech">Other<br>

                                </form>

                            </div>
                        </div>
                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์/Warranty claim type:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustectech"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม/Action after finished claim:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotectech"></select>
                                </span>
                            </div>
                        </div>
                        <div id="displtech" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย/Destroy date:</span>
                                <span>
                                    @*<input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />*@
                                    <input type="text" id="_scrapdatetectech" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-bars"></i> Receive Qty.:</span>
                                <span>
                                    <input type="text" id="tec2_clm_qty" disabled />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-check-square-o"></i> Accept Qty.</span>
                                <span>
                                    <input type="number" id="tec2_clm_qty_pass" disabled />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-window-close-o"></i> Reject Qty.:</span>
                                <span>
                                    <input type="number" id="tec2_clm_qty_reject" value="0" disabled />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <span><textarea class="form-control" rows="6" cols="100" id="remaketec2" placeholder="หมายเหตุ/TECH2 comment"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">

                                <button class="btn-info" id="_btnsaveconsider" style="display:none">บัททึกผลการพิจารณา/Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
                @*ประวัติ Poduct Manager Appr*@
                <div class="card-header">
                    <i class="fa fa-table"></i>Product Manager Approval <li id="clickme1" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="col-md-12" id="myDIV1" style="display:none">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> สถานะการวิเคราะห์ WR,WE,WF/Warranty claim type by PM:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustecpm"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> หลังเสร็จสิ้นกระบวนการเคลม/Action after finished claim:</span>
                                <span>
                                    <select class="bar" id="_anlysafterprotecpm"></select>
                                </span>
                            </div>
                        </div>
                        <div id="displpm" style="display:none">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่จะทำลาย/Destroy date:</span>
                                <span>
                                    @*<input type="date" data-date-format="dd/mm/yy" id="_scrapdatetec1" />*@
                                    <input type="text" id="_scrapdatetecpm" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                    </div>

                    <span class="alert-warning"><i class="fa fa-pencil"></i>Warranty Claim Type</span><br />
                    <div class="row" style="display:none">

                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="1" style="zoom: 2.5;margin-left: -10px;" id="a">Specific<br>
                                    <input type="checkbox" name="vehicle" value="3" style="zoom: 2.5;margin-left: -10px;" id="c">Good Will<br>

                                </form>

                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="2" style="zoom: 2.5;margin-left: -10px;" id="b">Manufacturing Defect<br>
                                    <input type="checkbox" name="vehicle" value="4" style="zoom: 2.5;margin-left: -10px;" id="d">Wrong Using<br>

                                </form>

                            </div>
                        </div>

                        <div class="col-md-2">
                            <div class="form-group">
                                <form>
                                    <input type="checkbox" name="vehicle" value="5" style="zoom: 2.5;margin-left: -10px;" id="e">Handing Damage<br>
                                    <input type="checkbox" name="vehicle" value="6" style="zoom: 2.5;margin-left: -10px;" checked id="f">Other<br>

                                </form>

                            </div>
                        </div>
                        <div style="border-bottom: 1px solid rgba(0,0,0,.125); "></div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> วันที่PM พิจารณา/PM judgement date:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="_pmdate" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-sort-down"></i>Status</span>
                                <span>
                                    <select class="bar" id="_pmtstus"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i>เปลี่ยนสินค้าเบอร์ใหม่ทดแทน P/N/Replace by new PN(if have):</span>
                                <span>
                                    <input type="text" id="_pmnewpn" />
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <span><textarea class="form-control" rows="6" cols="100" id="remakepm" placeholder="หมายเหตุ/PM comment"></textarea></span>
                            </div>
                        </div>
                    </div>
                    @*<div class="row">
                            <div class="col-md-6">
                                <div class="form-group">

                                    <button class="btn-info" id="_btnsaveapprove">บันทึกผล</button>
                                </div>
                            </div>
                        </div>*@
                </div>
                @*saleman อนุมัติ*@
                <div class="card-header bg-head-work">
                    <i class="fa fa-table"></i>Salesman Approval <li id="clickme0" class="fa fa-fw fa-angle-down" style="font-size:larger;font-weight:bold"></li>
                </div>
                <div class="col-md-12" id="myDIV0" style="display:block;">
                    <div class="row pt-2 pb-1">
                        <div class="col-md-12 text-left">
                            <span class="alert-success"><i class="fa fa-user"></i> Claim Type by PM</span><br />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Warranty claim type:</span>
                                <span>
                                    <select class="bar" id="_anlysstatustecpm_pm"></select>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-sort-down"></i>Status</span>
                                <span>
                                    <select class="bar" id="_pmtstus_pm"></select>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12" style="padding: 0px;">
                            <hr>
                        </div>
                    </div>
                    <div class="row pb-1">
                        <div class="col-md-12 text-left">
                            <span class="alert-warning"><i class="fa fa-user"></i> Claim Type by Salesman</span><br />
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-pencil"></i> Warranty claim type:</span>
                                <span>
                                    <select class="bar" id="_anlysstatus_sm"></select>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class='fa fa-user'></i> Saleman name:</span>
                                <span>
                                    <input type="text" id="saleman_approve_name" disabled="disabled" style="background: border-box border-box; color: blue;" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-calendar"></i> Saleman approve date:</span>
                                <span>
                                    <input type="date" data-date-format="dd/mm/yy" id="saleman_approve_date" />
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <span> <i class="fa fa-sort-down"></i>Saleman warranty claim status: </span>
                                <span>
                                    <select class="bar" id="saleman_approve_status" onchange="chkClaimWe(this.value);">
                                        <option value="0">Choose option</option>
                                        <option value="1">Claim approve</option>
                                        <option value="2">Claim not approve</option>
                                    </select>
                                </span>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <span> <i class="fa fa-edit"></i>Saleman Remark:</span>
                                <span><textarea class="form-control" rows="6" cols="100" id="saleman_remark" placeholder="Saleman remark"></textarea></span>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12 text-left">
                            <div class="form-group">
                                <input type="hidden" name="_anlysstatustecpm_org" id="_anlysstatustecpm_org" />
                                <button class="btn btn-info" id="btn_save_saleman">Submit</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="myModalzoom" class="modalx" style="z-index: 11;">

            <!-- The Close Button -->
            @*<span class="close">&times;</span>*@

            <!-- Modal Content (The Image) -->
            <img class="modal-contentx" id="img01">
            <div class="modal-contentx" id="img01" style="background-color: #191919;"><button class="btn btn-secondary" type="button" data-dismiss="modal" id="closeimg" style="margin-left: 91%;">Close</button></div>
            <!-- Modal Caption (Image Text) -->
            <div id="caption"></div>

        </div>


        <input type="text" hidden id="_hqty" />
        <input type="text" hidden id="_cmnosub" />
        <input type="hidden" id="_uderlogin" value="@user" />
        <input type="hidden" id="_udertype" value="usertype" />
        <input type="hidden" id="_t1" />
        <input type="hidden" id="_t2" />
        <input type="hidden" id="_t3" />
        <input type="hidden" id="_clmsendpm" />
        <!-- Modal -->
        <!-- Modal -->
        <div class="modal fade" id="myModalWarning" role="dialog">
            <div class="modal-dialog">

                <!-- Modal content-->
                <div class="modal-content " id="ColorboxError">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title" style="color:black;">Message Error</h4>
                    </div>
                    <div class="modal-body">
                        <div id="textAlertWarning">Some text in the modal.</div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>

            </div>
        </div>
        <!-- EndModal -->


        <script type="text/javascript">
            function chkClaimWe(salemanApproveAtatusID){
                var claimTypeCur = $('#_anlysstatus_sm').val();
                //alert(claimTypeCur);
                //PM ไม่อนุมัติ ต้องปรับเป็น WE=PM_ANLYS_STATUS
                var pmApproveStatus = $("#_pmtstus").val(); //1=อนุมัตื, 2=ไม่อนุมัติ
                var claimType = $("#_anlysstatustecpm").val(); //1=WR, 2=WE, 3=WF, 4=Rej
                if(pmApproveStatus == '2'){//2=ไม่อนุมัติ, 2= ไม่ใช่ WE
                    if(salemanApproveAtatusID == '1'){ //saleman อนุมัติ
                        Swal.fire({
                            icon: 'question',
                            title: 'Change claim type WE',
                            html: '',
                            showCancelButton: true,
                            confirmButtonColor: '#00a65a',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'confrim',
                            cancelButtonText: 'cancel',
                            allowOutsideClick: false,
                            focusConfirm: false,
                        }).then((result) => {
                            if (result.value) {
                                $('#_anlysstatus_sm').val('2').change(); //2=WE
                    } else {
                        $('#saleman_approve_status').val('0').change();
                    }
                   });

                } else {
                //สถานะเดิม
                    var anlysstatustecpm = $('#_anlysstatustecpm').val();
                $('#_anlysstatus_sm').val(anlysstatustecpm).change();
                }
               }
            }

            $("#_itemnosearch").autocomplete({
                selectFirst: true,
                autoFocus: true,
                timeout: 100000,
                source: function (request, response) {
                    var param = {
                        Name: $('#_itemnosearch').val(),
                        XvalCompany: $('#_company').val()
                    };

                    $.ajax({
                        url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                        data: JSON.stringify(param),
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function (data) { return data; },
                        success: function (data) {
                            response($.map(data.slice(0, 20), function (item) {
                                return {
                                    value: item
                                }
                            }))
                        },
                        error: function (XMLhttpsRequest, textStatus, errorThrown) {
                            alert(textStatus);
                        }
                    });

                },
                minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
            });
            $("#_pmnewpn").autocomplete({
                selectFirst: true,
                autoFocus: true,
                timeout: 100000,
                source: function (request, response) {
                    var param = {
                        Name: $('#_pmnewpn').val(),
                        XvalCompany: $('#_company').val()
                    };
                    $.ajax({
                        url: '@Url.Action("GetdateStockCode", "GetdataCenter")',
                        data: JSON.stringify(param),
                        dataType: "json",
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        dataFilter: function (data) { return data; },
                        success: function (data) {
                            response($.map(data.slice(0, 20), function (item) {
                                return {
                                    value: item
                                }
                            }))
                        },
                        error: function (XMLhttpsRequest, textStatus, errorThrown) {
                            alert(textStatus);
                        }
                    });
                },

                minLength: 2//minLength as 2, it means when ever user enter 2 character in TextBox the AutoComplete method will fire and get its source data.
            });



            $(document).ready(function () {
                $('#_anlysstatustecpm_pm').attr('disabled', true);
                $('#_anlysstatus_sm').attr('disabled', true);
                $('#_pmtstus_pm').attr('disabled', true);

                //ถ้าเป็น TAM -> company = TAM
                var company = '@company';
                var userId = '@user';
                if (company != "") {
                    if (company == "TAM") {
                        $("#_company").val("TAM");
                        $('#_company').attr('disabled', true);
                        $('#comTam').css('display', 'block');

                    }
                }
                //color menu
                $('#approveSaleman').css("background-color", "rgb(9, 183, 9)");

                var udertype = $("#_udertype").val();
                var Userlogin = $("#_uderlogin").val();
                if (udertype == "3") {
                    $.ajax({
                        url: '@Url.Action("GetdataCountProcess", "GetdataCenter")',
                        data: {
                            Usertype: udertype,
                            // Userlogin: Userlogin
                            Userlogin: Userlogin
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data)
                            $("#tile").text(data.Getdata[0].val.Status)
                            $("#countadmin").html("TAC: " + data.Getdata[0].val.CountAdmin + " &nbsp;&#9830;&nbsp; AAC: " + data.Getdata[1].val.CountAdmin);
                            //$("#counttec1").text("TAC: " + data.Getdata[2].val.CountAdmin + " <----> AAC: " + data.Getdata[3].val.CountAdmin);
                            $("#counttec1").css("display", "none");
                        }
                    });
                }
                //get slmcod
                $.ajax({
                    url: '@Url.Action("Getdateslm","GetdataCenter")',
                    data: {
                        UserId: Userlogin
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        var select = $("#slmcod");
                        select.children().remove();
                        //select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {
                            select.append($("<option>").val(item.SLMCOD).text(item.SLMCOD + "/" + item.SLMNAM));
                        });
                    }
                });
                @*$.ajax({
                    url: '@Url.Action("Getdatastkgrp", "GetdataCenter")',
                    data: {
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        //console.log(data)

                        var select = $("#_stkgrp");
                        select.children().remove();
                        select.append($("<option>").val("ALL").text("ALL"));
                        $(data).each(function (index, item) {

                            select.append($("<option>").val(item.STKGRP).text(item.STKGRP + "/" + item.GRPNAM));
                        });
                    }
                });*@
                $('#SrcProcessApprove').css("background-color", "rgb(9, 183, 9)");
                $('#SrcInvoiceHistory_Sc').css("background-color", "");
                function addDays(theDate, days) {
                    return new Date(theDate.getTime() + days * 24 * 60 * 60 * 1000);
                }
                var newDate = addDays(new Date(), 15);
                $("#_duedatetec").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //Due date
                $("#_duedatetec").attr("disabled", "disabled");
                $("#_clmdatetec").attr("disabled", "disabled");
                $("#_clmdatetec").css({ "background": "border-box", "color": "blue" });
                $("#_duedatetec").css({ "background": "border-box", "color": "blue" });

                var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));
                n = new Date();
                y = n.getFullYear();
                m = n.getMonth() + 1;
                d = n.getDate();
                if (d < 10) {
                    d = "0" + d;
                }
                if (m < 10) {
                    m = "0" + m;
                }
                $("#_clmdatetec").val(d + "/" + m + "/" + y);

                ///fa fa-calendar///
                var today = new Date();

                $('#_rcvdatetec').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));

                $('#_anlysdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                $('#_scrapdatetec1').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                $('#_appdatetec').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                $('#_pmdate').val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                //get status
                $.ajax({
                    url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                    data: {
                        Name: 6
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        var select = $("#_status");
                        select.children().remove();
                        // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                        $(data).each(function (index, item) {
                            select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                        });
                        //รอ Saleman อนุมัติ
                        $("#_status").val("9")
                        //disable สถานะที่ไม่เกี่ยวข้อง
                    //    var arrStatus = ['9', '10', '11'];
                    //    document.querySelectorAll("#_status option").forEach(opt => {
                    //        if (arrStatus.includes(opt.value)) {
                    //            opt.disabled = false;
                    //        } else {
                    //                    opt.disabled = true;
                    //        }
                    //});
            }
            });
            function getdate() {
                var tt = document.getElementById('_clmdatetec').value;

                var date = new Date(tt);
                var newdate = new Date(date);

                newdate.setDate(newdate.getDate() + 15);

                var dd = newdate.getDate();
                var mm = newdate.getMonth() + 1;
                var y = newdate.getFullYear();

                var someFormattedDate = d + '/' + m + '/' + y;
                document.getElementById('_duedatetec').value = someFormattedDate;
            }

            CheckUsrClmStaff()
            function CheckUsrClmStaff() {
                var userlog = $("#_uderlogin").val();
                $.ajax({
                    url: '@Url.Action("CheckUsrClmStaff", "GetdataCenter")',
                    data: {
                        Name: userlog
                    },
                    type: "POST",
                    dataType: "JSON",
                    beforeSend : function(){
                        //LoadingShow();
                    },
                    success: function (data) {
                        $("#_udertype").val(data.UsrClmStaff);
                        var type = $("#_udertype").val();
                        $("#_status").val("9");

                        var UserId = $("#_uderlogin").val();
                        $.ajax({
                            url: '@Url.Action("GetProductdata", "GetdataCenter")',
                            data: {
                                UserId: UserId
                                // UserId: "thuzzphonn"
                            },
                            type: "POST",
                            dataType: "JSON",
                            success: function (data) {
                                console.log(data)
                                var select = $("#_PM");
                                select.children().remove();
                                select.append($("<option>").val("ALL").text("ALL"));
                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                                });

                                var valpm = $("#_PM").val();
                                var valststus = $("#_status").val();
                                var valDoc = $("#searchclaimno").val();
                                var valcom = $("#_company").val();
                                var valstkgrp = $("#_stkgrp").val();
                                var valstatdate = $("#_statdate").val();
                                var valenddate = $("#_enddate").val();
                                var valstatdatecus = $("#_statdate").val();
                                var valenddatecus = $("#_enddate").val();
                                var itemno = $("#_itemnosearch").val();
                                var slmcod = $("#slmcod option:selected").val();
                                //get stkgrp
                                getStkByPm(valpm);
                                if (itemno != "") {
                                    itemno = splitval(itemno);
                                } else {
                                    itemno = "";
                                }
                                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdate, valenddate, slmcod)
                            }
                        });

                        // }
                        if (data.UsrClmStaff != "3") {
                            $("#_admintec").val(userlog);
                            $("#_nametec1").val(userlog);
                            $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                            $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                            $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                            $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                            $("#_btnsaveconsider").attr("disabled", "disabled");

                            //$("#_PM").attr("disabled", "disabled");  // Product Manager
                            $("#_pmdate").attr("disabled", "disabled"); //วันที่PM พิจารณา
                            $("#_pmtstus").attr("disabled", "disabled"); //สถานะอนุมัติ
                            $("#remakepm").attr("disabled", "disabled");
                            $("#_pmnewpn").attr("disabled", "disabled");

                            $("#_btnsaveapprove").attr("disabled", "disabled");
                            $("#_btnsavecheck").removeAttr('disabled');



                            //alert(data.UsrClmStaff)
                            ///ตรวจสอบรับสินค้าเคลม////
                            $("#_btnsavecheck").attr("disabled", "disabled");
                            $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                            $("#_rcvbyte").attr("disabled", "disabled");    //ผู้รับสินค้าเคลม
                            $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                            $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                            $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                            $("#_duedatetec").attr("disabled", "disabled"); //Due date
                            $("#_admintec").attr("disabled", "disabled");//Admin:
                            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                            $("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                            $("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                            $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                            ///Technic 1 : วิเคราะห์สินค้าเคลม///

                            $("#_nametec1").attr("disabled", "disabled");//ตรวจสอบโดย
                            $("#_anlysdatetec1").attr("disabled", "disabled");    //วันที่วิเคราะห์ปัญหา
                            $("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                            $("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                            $("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                            $("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ
                            $("#_scrapdatetec1").attr("disabled", "disabled");//วันที่ทำลาย
                            $("#_btnsavecheck").attr("disabled", "disabled");
                            ///Technic 2 : ผลการพิจารณา///
                            $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                            $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                            $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                            $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                            $("#_btnsaveconsider").attr("disabled", "disabled");
                        }
                        else if (data.UsrClmStaff == "3") {
                            $("#_PM").removeAttr('disabled');  // Product Manager
                            $("#_pmdate").removeAttr('disabled'); //วันที่PM พิจารณา
                            $("#_pmtstus").removeAttr('disabled'); //สถานะอนุมัติ
                            $("#remakepm").removeAttr('disabled');
                            $("#_pmnewpn").removeAttr('disabled');

                            $("#_btnsaveapprove").removeAttr('disabled');
                            $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                            $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                            $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                            $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                            $("#_btnsaveconsider").attr("disabled", "disabled");
                            $("#_btnsavecheck").removeAttr('disabled');



                            //alert(data.UsrClmStaff)
                            ///ตรวจสอบรับสินค้าเคลม////
                            $("#_btnsavecheck").attr("disabled", "disabled");
                            $("#_proceedtotec").attr("disabled", "disabled");  ///สถานะการรับสินค้า
                            $("#_rcvbyte").attr("disabled", "disabled");    //ผู้รับสินค้าเคลม
                            $("#_rcvdatetec").attr("disabled", "disabled");//วันที่รับสินค้าเคลม:
                            $("#_rvqtytec").attr("disabled", "disabled"); //จำนวนที่รับเคลม:
                            // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                            $("#_clmdatetec").attr("disabled", "disabled");//Claim date:
                            $("#_duedatetec").attr("disabled", "disabled"); //Due date
                            $("#_admintec").attr("disabled", "disabled");//Admin:
                            //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                            $("#_shelfloctec").attr("disabled", "disabled");//Shelf Location
                            $("#_tecwork").attr("disabled", "disabled");//ช่างที่รับผิดชอบ:
                            $("#causeclaimtec").attr("disabled", "disabled");//หมายเหตุการรับเคลม


                            ///Technic 1 : วิเคราะห์สินค้าเคลม///

                            $("#_nametec1").attr("disabled", "disabled");//ตรวจสอบโดย
                            $("#_anlysdatetec1").attr("disabled", "disabled");    //วันที่วิเคราะห์ปัญหา
                            $("#_perfromtec1").attr("disabled", "disabled"); //ดำเนินการ
                            $("#_anlysstatustec1").attr("disabled", "disabled"); //สถานะการวิเคราะห์ WR,WE,WF
                            $("#_anlysafterprotec1").attr("disabled", "disabled"); //หลังเสร็จสิ้นกระบวนการเคลม
                            $("#remaketec1").attr("disabled", "disabled"); //ผลการตรวจสอบ
                            $("#_scrapdatetec1").attr("disabled", "disabled");//วันที่ทำลาย
                            $("#_btnsavecheck").attr("disabled", "disabled");
                            ///Technic 2 : ผลการพิจารณา///
                            $("#_name2tec").attr("disabled", "disabled"); //รับรองการตรวจสอบโดย
                            $("#_appdatetec").attr("disabled", "disabled");  //วันที่เทคนิคพิจารณา
                            $("#_apprvststus").attr("disabled", "disabled"); // สถานะ
                            $("#remaketec2").attr("disabled", "disabled");   //หมายเหตุ
                            $("#_btnsaveconsider").attr("disabled", "disabled");

                        }
                    }, complete : function(){
                        // LoadingHide();
                    }
                });

            }

            $("#clickmeheader").on("click", function (e) {

                myFunctionheader();
            });
            function myFunctionheader() {
                var x = document.getElementById("myDIVheader");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme").on("click", function (e) {

                myFunction();
            });
            function myFunction() {
                var x = document.getElementById("myDIV");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme0").on("click", function (e) {

                myFunction0();
            });
            $("#clickme1").on("click", function (e) {

                myFunction1();
            });
            function myFunction0() {
                var x = document.getElementById("myDIV0");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            function myFunction1() {
                var x = document.getElementById("myDIV1");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme2").on("click", function (e) {

                myFunction2();
            });
            function myFunction2() {
                var x = document.getElementById("myDIV2");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $('#_itemnosearch').on("click", function (e) {
                var com = $('#_company').val();
                if (com == 'ALL') {
                    alert("กรุณาเลือก Company ก่อนค้นหา item");
                    $('#_itemnosearch').val("");
                    return false;
                }

            });
            $('#_itemnosearch').on("keyup", function (e) {
                var com = $('#_company').val();
                if (com == 'ALL') {
                    alert("กรุณาเลือก Company ก่อนค้นหา item");
                    $('#_itemnosearch').val("");
                    return false;
                }

            });
            $("#clickme3").on("click", function (e) {

                myFunction3();
            });
            function myFunction3() {
                var x = document.getElementById("myDIV3");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            $("#clickme4").on("click", function (e) {

                myFunction4();
            });
            $("#clickme5").on("click", function (e) {

                myFunction5();
            });
            function myFunction5() {
                var x = document.getElementById("myDIV5");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            function myFunction4() {
                var x = document.getElementById("myDIV4");
                if (x.style.display === "none") {
                    x.style.display = "block";
                } else {
                    x.style.display = "none";
                }
            }
            function splitval(_val) {
                var _splito = "";
                _splito = _val.split('|');

                return _splito[0];
            }
            function addCommas(nStr) {
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 1
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_perfromtec1");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 2
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    var select = $("#_proceedtotec");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });


            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 3
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_anlysstatustec1");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });


                    var select = $("#_anlysstatustecpm");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });

                    var select = $("#_anlysstatustecpm_pm");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //Saleman view
                    var select = $("#_anlysstatus_sm");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    var select = $("#_anlysstatustectech");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });


            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 4
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {
                    console.log(data)
                    var select = $("#_anlysafterprotec1");

                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });

                    var select = $("#_anlysafterprotecpm");

                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });

                    var select = $("#_anlysafterprotectech");

                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                }
            });

            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 5
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_pmtstus");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });

                    var select = $("#_pmtstus_pm");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {
                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            $.ajax({
                url: '@Url.Action("GetdateStatusClm", "GetdataCenter")',
                data: {
                    Name: 9
                },
                type: "POST",
                dataType: "JSON",
                success: function (data) {

                    var select = $("#_apprvststus");
                    select.children().remove();
                    // select.append($("<option>").val("0").text("เลือกCUSCOD"));
                    $(data).each(function (index, item) {

                        select.append($("<option custyp=" + item.CODE + ">").val(item.CODE).text(item.DESCRIPTION_TH));
                    });
                    //  var CUSCODt = $("#CUSCOD option:selected").text();
                }
            });
            function splitval(_val) {
                var _splito = "";
                _splito = _val.split('|');

                return _splito[0];
            }
            $("#_btnsearch").on("click", function () {
                var valpm = $("#_PM").val();
                var valststus = $("#_status").val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                //  GetClimtemp(claimnokey)
                var valstkgrp = $("#_stkgrp").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();

                var valstatdatecus = $("#_statdatecus").val();
                var valenddatecus = $("#_enddatecus").val();
                var itemno = $("#_itemnosearch").val();
                var slmcod = $("#slmcod option:selected").val();
                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
            });
            $("#_btnsearchclaimno").on("click", function () {
                //var claimnokey = $(this).val();

                var valpm = $("#_PM").val();
                var valststus = $("#_status").val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                //  GetClimtemp(claimnokey)
                var valstkgrp = $("#_stkgrp").val();
                var slmcod = $("#slmcod option:selected").val();
                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, '', '', '', '', '', slmcod)
            });

            $("#searchclaimno").on("keyup", function (e) {
                //var claimnokey = $(this).val();
                var valpm = $("#_PM").val();
                var valststus = $("#_status").val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                var valstkgrp = $("#_stkgrp").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();
                var valstatdatecus = $("#_statdatecus").val();
                var valenddatecus = $("#_enddatecus").val();
                var itemno = $("#_itemnosearch").val();
                var slmcod = $("#slmcod option:selected").val();

                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }

                if (e.keyCode == 13) {
                    Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
                }
            });
            //slm change
             $("#slmcod").on("change", function (e) {
                var valpm = $("#_PM").val();
                var valststus = $("#_status").val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                var valstkgrp = $("#_stkgrp").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();
                var valstatdatecus = $("#_statdate").val();
                var valenddatecus = $("#_enddate").val();
                 var itemno = $("#_itemnosearch").val();
                 var slmcod = $("#slmcod option:selected").val();

                //get stkgrp
                getStkByPm(valpm);

                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                 Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
            });

            $("#_PM").on("change", function (e) {

                $("#Nospankey").text("");
                $("#subNospan").text("");
                $("#_cusno").text("");
                $("#_cusname").text("");
                $("#sslmnam").text("");
                $("#_itemno").text("");
                $("#_description").text("");
                $("#_uom").text("");
                $("#_invoiceno").text("");
                $("#_psdate").text("");
                $("#_invoiceqty").text("");
                $("#_unitPrice").text("");
                $("#_invoicelineamt").text("");
                $("#_invoicelinedis").text("");
                $("#_invoicelinedisamt").text("");
                $("#_stkgup").text("");
                $("#requestby").text("");
                $("#requestdate").text("");
                $("#boximage").html("");
                ////Get input display ///////
                $("#_claimqty").text("");//Qty//
                $("#_workda").text("");//ระยะใช้งาน//
                $("#causeclaim").text("");//เหตุผลเคลม//
                $("#_proceedto").text("");//ดำเนินการ//
                $("#_statusclaim").text(""); //Status///
                $("#_claimnosub").text("");
                //Admin//
                $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
                $("#_rcvbyte").val("");      //ผู้รับสินค้าเคลม
                $("#_rcvdatetec").val("");//วันที่รับสินค้าเคลม:
                $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
                // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                $("#_clmdatetec").val("");//Claim date:
                $("#_duedatetec").val(""); //Due date
                $("#_admintec").val("");//Admin:
                //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                //Tech1//
                $("#_nametec1").val("");//ตรวจสอบโดย
                $("#_anlysdatetec1").val("");     //วันที่วิเคราะห์ปัญหา
                $("#_perfromtec1").val(""); //ดำเนินการ
                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                $("#_scrapdatetec1").val("");
                $("#_shelfloctec").val("");//Shelf Location
                $("#_tecwork").val("");//ช่างที่รับผิดชอบ:
                $("#remaketec1").val("");
                //Tech2//
                $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
                $("#_apprvststus").val("0"); // สถานะ
                $("#remaketec2").val("");   //หมายเหตุ
                $("#_pmdate").val("");  //วันที่PM พิจารณา
                $("#_pmtstus").val("0"); //สถานะอนุมัติ
                $("#remakepm").val("");
                $("#_pmnewpn").val("");


                var valpm = $(this).val();
                var valststus = $("#_status").val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                var valstkgrp = $("#_stkgrp").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();
                var valstatdatecus = $("#_statdate").val();
                var valenddatecus = $("#_enddate").val();
                var itemno = $("#_itemnosearch").val();
                var slmcod = $("#slmcod option:selected").val();
                //get stkgrp
                getStkByPm(valpm);

                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
            });
            $("#_company").on("change", function (e) {
                var valpm = $("#_PM").val();
                var valstkgrp = $("#_stkgrp").val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                var valststus = $("#_status").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();
                var valstatdatecus = $("#_statdate").val();
                var valenddatecus = $("#_enddate").val();
                var itemno = $("#_itemnosearch").val();
                var slmcod = $("#slmcod option:selected").val();
                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
            });
            $("#_stkgrp").on("change", function (e) {
                var valpm = $("#_PM").val();
                var valstkgrp = $(this).val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                var valststus = $("#_status").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();
                var valstatdatecus = $("#_statdate").val();
                var valenddatecus = $("#_enddate").val();
                var itemno = $("#_itemnosearch").val();
                var slmcod = $("#slmcod option:selected").val();

                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
            });
            $("#_status").on("change", function (e) {
                var valpm = $("#_PM").val();
                var valststus = $(this).val();
                var valDoc = $("#searchclaimno").val();
                var valcom = $("#_company").val();
                var valstkgrp = $("#_stkgrp").val();
                var valstatdate = $("#_statdate").val();
                var valenddate = $("#_enddate").val();
                var valstatdatecus = $("#_statdate").val();
                var valenddatecus = $("#_enddate").val();
                var itemno = $("#_itemnosearch").val();
                var slmcod = $("#slmcod option:selected").val();

                if (itemno != "") {
                    itemno = splitval(itemno);
                } else {
                    itemno = "";
                }
                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod)
            });
            //ค้นหาข้อมูล Saleman
            function Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdatecus, valenddatecus, slmcod) {
                clearval()
                if (valststus == null) {
                    valststus = "9";
                }
                if(valstkgrp == "" || valstkgrp == null){
                    valstkgrp = "ALL";
                }
                console.log("slmcod before = " + slmcod);
                setTimeout(function () {
                    if (slmcod == '' || slmcod == null || slmcod === undefined) {
                        slmcod = $("#slmcod option:selected").val();
                    }
                    console.log("slmcod = " + slmcod);
                    $.ajax({
                        url: '@Url.Action("GetClimdataSm", "GetdataCenter")',
                        data: {
                            inUser: slmcod,
                            inPM: valpm,
                            inDOC: valDoc,
                            inCOM: valcom,
                            inSTATS: valststus,
                            instkgrp: valstkgrp,
                            instatdate: valstatdate,
                            inenddate: valenddate,
                            instatdatecus: valstatdatecus,
                            inenddatecus: valenddatecus,
                            initem: itemno
                        },
                        type: "POST",
                        dataType: "JSON",
                        beforeSend : function(){
                            LoadingShow();
                        },
                        success: function (data) {
                            // console.log(data);
                            $('#fixed-table-container-2  tbody:last-child').html("");
                            if (data.Getdata.length > 0) {

                                var SubmithtmlPage = '';
                                var ADMIN_ANLYS_STATUS = '';
                                var TECH1_PROCESS_STATUS = '';
                                var TECH2_PROCESS_STATUS = '';
                                var TECH2_ANLYS_STATUS = '';
                                var PM_PROCESS_STATUS = '';
                                var CLM_STATUS = '';
                                var _BtnApp = '';
                                for (var i = 0; i < data.Getdata.length; i++) {
                                    ADMIN_ANLYS_STATUS = data.Getdata[i].val.ADMIN_ANLYS_STATUS;
                                    TECH1_PROCESS_STATUS = data.Getdata[i].val.TECH1_PROCESS_STATUS;
                                    TECH2_PROCESS_STATUS = data.Getdata[i].val.TECH2_PROCESS_STATUS;
                                    TECH2_ANLYS_STATUS = data.Getdata[i].val.TECH2_ANLYS_STATUS;
                                    PM_PROCESS_STATUS = data.Getdata[i].val.PM_PROCESS_STATUS;
                                    CLM_STATUS = data.Getdata[i].val.CLM_STATUS;
                                    _BtnApp = data.Getdata[i].val.F_BtnApp;
                                    SM_PROCESS_STATUS = data.Getdata[i].val.SM_PROCESS_STATUS;
                                    GM_PROCESS_STATUS = data.Getdata[i].val.GM_PROCESS_STATUS;
                                    //alert(_BtnApp)
                                    SubmithtmlPage = '<tr   fax="1"   cmno="' + data.Getdata[i].val.CLM_ID + '"  foc="' + data.Getdata[i].val.CLM_FOC + '"  tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '" perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '">';
                                    if (_BtnApp == "2") {
                                        SubmithtmlPage += '<td style="color: blue;text-decoration: underline;font-weight: bold;cursor:pointer;" id="xxx" fax="1" cmno="' + data.Getdata[i].val.CLM_ID + '" foc="' + data.Getdata[i].val.CLM_FOC + '" tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" rcvdate= "' + data.Getdata[i].val.CLM_RCVDATE + '"rcvby= "' + data.Getdata[i].val.CLM_RCVBY + '">' + data.Getdata[i].val.CLM_NO_SUB + '</td>';
                                    } else {
                                        SubmithtmlPage += '<td style="color: blue;text-decoration: underline;font-weight: bold;cursor:pointer;" id="xxx" fax="1" cmno="' + data.Getdata[i].val.CLM_ID + '" foc="' + data.Getdata[i].val.CLM_FOC + '" tec1status="' + TECH1_PROCESS_STATUS + '" tec2status="' + TECH2_PROCESS_STATUS + '" pmstatus="' + PM_PROCESS_STATUS + '"  perfromdes="' + data.Getdata[i].val.PERFORMDESCRIPTION + '" recstades="' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '"  cuscod="' + data.Getdata[i].val.CUSCOD + '" cusnam="' + data.Getdata[i].val.CUSNAM + '" slmcod="' + data.Getdata[i].val.SLMCOD + '"slmnam="' + data.Getdata[i].val.SLMNAM + '" comup="' + data.Getdata[i].val.CLM_COMPANY + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '"  proceedtoup = "' + data.Getdata[i].val.CLM_PERFORM + '"  statusclaimup = "' + data.Getdata[i].val.CLM_RCVSTATUS + '" itemup="' + data.Getdata[i].val.STKCOD + '"stkdes="' + data.Getdata[i].val.STKDES + '" uomup="' + data.Getdata[i].val.CLM_UOM + '" claimqtyup="' + data.Getdata[i].val.CLM_REQQTY + '" worktimeup="' + data.Getdata[i].val.CLM_USEDAY + '"invoicenoeup="' + data.Getdata[i].val.CLM_INVNO + '" invoicedete = "' + data.Getdata[i].val.CLM_INVDATE + '" causeclaimup = "' + data.Getdata[i].val.CLM_CAUSE + '" rcvdate= "' + data.Getdata[i].val.CLM_RCVDATE + '"rcvby= "' + data.Getdata[i].val.CLM_RCVBY + '">' + data.Getdata[i].val.CLM_NO_SUB + '   <span class="fa fa-edit gi-3x"></span></td>';
                                    }
                                    // SubmithtmlPage += '<td><button type="reset" id="delclmtemp" style="min-width: 50px;"  clmID="' + data.Getdata[0].val.CLM_ID + '" clmnoup="' + data.Getdata[i].val.CLM_NO_SUB + '">X</button></td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_Ref + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKCOD + "<br>" + data.Getdata[i].val.STKDES + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_UOM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.STKGRP + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_REQQTY + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_QTY_ORG + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_QTY_PASS + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_QTY_REJECT + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CUSCOD + "/<br>" + data.Getdata[i].val.CUSNAM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.SLMCOD + "/<br>" + data.Getdata[i].val.SLMNAM + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_INVNO + "<br>" + data.Getdata[i].val.CLM_INVDATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.Requestdatecus + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_DATE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.Requestdate + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_CAUSE + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.PERFORMDESCRIPTION + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.TECH1ANLYSSTATUDESCRIPTION + '</td>';
                                    SubmithtmlPage += '<td>' + data.Getdata[i].val.CLM_USEDAY + '</td>';
                                    // SubmithtmlPage += '<td>xxxxx</td>';
                                    //SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';
                                    //alert(TECH2_ANLYS_STATUS)

                                    if (CLM_STATUS != "7") {
                                        SubmithtmlPage += '<td>' + data.Getdata[i].val.RCVSTATUSDESCRIPTION + '</td>';
                                        if (ADMIN_ANLYS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจรับสินค้า"></span></td>';
                                        } else if (ADMIN_ANLYS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจรับสินค้าเรียบร้อย"></span></td>';
                                        }
                                        if (TECH1_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการตรวจสอบ"></span></td>';
                                        } else if (TECH1_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="ตรวจสอบเรียบร้อย"></span></td>';
                                        }
                                        if (TECH2_ANLYS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รอการพิจารณา"></span></td>';
                                        } else if (TECH2_ANLYS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="พิจารณาเรียบร้อย"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่ผ่านการพิจารณา"></span></td>';
                                        }
                                        else if (TECH2_ANLYS_STATUS == "3") {
                                            SubmithtmlPage += '<td><span class="fa fa-hourglass-half gi-4x" style="color: blue;" title="รอประสานงานกับsupplier"></span></td>';
                                        }
                                        if (PM_PROCESS_STATUS == "0") {
                                            SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติ"></span></td>';
                                        } else if (PM_PROCESS_STATUS == "1") {
                                            SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย"></span></td>';

                                        } else if (PM_PROCESS_STATUS == "2") {
                                            SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                        }
                                        else if (PM_PROCESS_STATUS == "3") {
                                            SubmithtmlPage += '<td><span class="fa fa-refresh gi-4x" style="color: red;"title="ตรวจสอบใหม่"></span></td>';
                                        }
                                        //TAM
                                        if (company == 'TAM') {
                                            //SM
                                            if (SM_PROCESS_STATUS == "") {
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติ"></span></td>';
                                            } else {
                                                if (SM_PROCESS_STATUS == "1") {
                                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย"></span></td>'
                                                } else if (SM_PROCESS_STATUS == "2") {
                                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                                }
                                            }
                                            //GM
                                            if (GM_PROCESS_STATUS == "") {
                                                SubmithtmlPage += '<td><span class="fa fa-lock gi-4x" style="color: blue;" title="รออนุมัติ"></span></td>';
                                            } else {
                                                if (GM_PROCESS_STATUS == "1") {
                                                    SubmithtmlPage += '<td><span class="fa fa-check-circle gi-4x" style="color: #09b709;"title="อนุมัติเรียบร้อย"></span></td>'
                                                } else if (GM_PROCESS_STATUS == "2") {
                                                    SubmithtmlPage += '<td><span class="fa fa-times-circle gi-4x" style="color: red;"title="ไม่อนุมัติ"></span></td>';
                                                }
                                            }
                                        }
                                    }
                                    else {

                                        SubmithtmlPage += '<td style="color:red;">ยกเลิกการเคลม</td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                        SubmithtmlPage += '<td><span class="fa fa-minus gi-4x" style="color: red;"></span></td>';
                                    }
                                    SubmithtmlPage += '</tr>';
                                    //$('table #_tbclmline  tbody:last-child').append(SubmithtmlPage);
                                    // $('#_tbclmline  tbody:last-child').append(SubmithtmlPage

                                    SubmithtmlPage += '</tr>';
                                    $('#fixed-table-container-2  tbody:last-child').append(SubmithtmlPage);

                                }
                            } else {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("No List approval");
                                $("#myModalWarning").modal();
                                //  location.reload();
                            }
                            var fixedTable2 = fixTable(document.getElementById('fixed-table-container-2'));

                        }, complete: function(){
                            LoadingHide();
                        },
                    });
                }, 3000);
            }

            $('#_anlysafterprotecpm').change(function () {
                var _val = $(this).val();
                if (_val == "1") {
                    $('#displpm').css("display", "block");
                    var newDate = addDays(new Date(), 90);
                    $("#_scrapdatetecpm").val(('0' + newDate.getDate()).slice(-2) + '/' + ('0' + (newDate.getMonth() + 1)).slice(-2) + '/' + newDate.getFullYear()); //วันที่ทำลาย
                    $("#_scrapdatetecpm").attr("disabled", "disabled");
                } else {
                    $('#displ').css("display", "none");
                    $("#_scrapdatetecpm").val("");
                    $("#_scrapdatetecpm").attr("disabled", "disabled");
                }
            });

            $('#_anlysafterprotec1').change(function () {
                var _val = $(this).val();
                if (_val == "1") {
                    $('#displ').css("display", "block");
                } else {
                    $('#displ').css("display", "none");
                }
            });

            $('#_anlysafterprotecpm').change(function () {
                var _val = $(this).val();
                if (_val == "1") {
                    $('#displpm').css("display", "block");
                } else {
                    $('#displpm').css("display", "none");
                }
            });
            //click ที่เลขเคลม
            $("table").on("click", "tr #xxx", function () {
                clearval()
                LoadingShow();
                //แสดงข้อมูลที่กดค้นหา
                $("#divShowSearch").css("display", "block");

                var cusno = $("#_cusno").text();
                var nokey = $(this).attr('cmno');
                //$("#_company").attr('disabled', 'disabled');
                //$("#slmcod").attr('disabled', 'disabled');
                $("#requestby").attr('disabled', 'disabled');
                $("#requestdate").attr('disabled', 'disabled');
                $("#_cusno").attr('disabled', 'disabled');
                var comup = $(this).attr('comup');
                var clmnoup = $(this).attr('clmnoup');
                var clmno = $(this).attr('clmno');
                var itemup = $(this).attr('itemup');
                var rcvby = $(this).attr('rcvby');
                var rcvdate = $(this).attr('rcvdate');
                var invoicenoeup = $(this).attr('invoicenoeup');
                var proceedtoup = $(this).attr('proceedtoup');
                var statusclaimup = $(this).attr('statusclaimup');
                var worktimeup = $(this).attr('worktimeup');
                var claimqtyup = $(this).attr('claimqtyup');
                var causeclaimup = $(this).attr('causeclaimup'); //เหตุผลเคลม//
                var proceedtoupdes = $(this).attr('perfromdes');
                var statusclaimupdes = $(this).attr('recstades');
                var fax = $(this).attr('fax');
                var foc = $(this).attr('foc');
                var tec1status = $(this).attr('tec1status');
                var tec2status = $(this).attr('tec2status');
                var pmstatus = $(this).attr('pmstatus');
                $("#Nospankey").text(nokey);
                $("#subNospan").text(clmnoup);
                $("#_t1").val(tec1status);
                $("#_t2").val(tec2status);
                $("#_t3").val(pmstatus);

                var CUSCOD = $(this).attr('cuscod');
                var CUSNAM = $(this).attr('cusnam');
                var SLMCOD = $(this).attr('slmcod');
                var SLMNAM = $(this).attr('slmnam');
                //var CLM_RCVBY = $(this).attr('itemup');
                //var CLM_RCVDATE = $(this).attr('itemup');
                $("#_cusno").text(CUSCOD);
                $("#_cusname").text(CUSNAM);
                //$("#slmcod").text(SLMCOD);
                $("#sslmnam").text(SLMNAM);
                //$("#requestby").text(data.Getdata[0].val.CLM_RCVBY);
                // $("#requestdate").text(data.Getdata[0].val.CLM_RCVDATE);
                if (fax == "1") {
                    $.ajax({
                        url: '@Url.Action("GetdataInvoicestatud", "GetdataCenter")',
                        data: {
                            _cusno: CUSCOD,
                            _itemno: itemup,
                            _invoiceno: invoicenoeup,
                            _com: comup,

                            _enddate: "",
                            _foc: foc
                        }, _statdate: "",
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log(data);
                            // $("#Nospankey").text(nokey);
                            //  $("#subNospan").text(clmnoup);
                            $("#_itemno").text(data.Getdata[0].val.STKCOD);
                            $("#_description").text(data.Getdata[0].val.STKDES);
                            $("#_uom").text(data.Getdata[0].val.Uom);
                            $("#_invoiceno").text(data.Getdata[0].val.DOCNUM);
                            $("#_psdate").text(data.Getdata[0].val.PSTDAT);
                            $("#_invoiceqty").text(addCommas(data.Getdata[0].val.Qty));
                            $("#_unitPrice").text(addCommas(data.Getdata[0].val.Price));
                            $("#_invoicelineamt").text(addCommas(parseFloat(data.Getdata[0].val.Amt).toFixed(2)));
                            $("#_invoicelinedis").text(addCommas(parseFloat(data.Getdata[0].val.DiscountPer).toFixed(2)));
                            $("#_invoicelinedisamt").text(addCommas(parseFloat(data.Getdata[0].val.DiscountAmt).toFixed(2)));
                            $("#_stkgup").text(data.Getdata[0].val.STKGRP);
                            $("#_foc").text(foc);
                            $("#requestby").text(rcvby);
                            $("#requestdate").text(rcvdate);

                            ////Get input display ///////
                            $("#_claimqty").text(claimqtyup);//Qty//
                            $("#_workda").text(worktimeup);//ระยะใช้งาน//
                            $("#causeclaim").text(causeclaimup);//เหตุผลเคลม//
                            $("#_proceedto").text(proceedtoupdes);//ดำเนินการ//
                            $("#_statusclaim").text(statusclaimupdes); //Status///
                            $("#_claimnosub").text(clmnoup);

                        }
                    });

                    var nokey = $(this).attr('cmno');
                    var nosubkey = $("#subNospan").text();
                    $.ajax({
                        url: '@Url.Action("GetdataClamline", "GetdataCenter")',
                        data: {
                            CLM_No: nokey,
                            CLM_SUB: nosubkey,
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (data) {
                            console.log('DATA = ' + data);
                            if (data.Getdata.length > 0) {
                                //จำนวนเคลมทั้งหมด
                                $("#tec2_clm_qty").val(data.Getdata[0].val.CLM_QTY_ORG);
                                $("#tec2_clm_qty_pass").val(data.Getdata[0].val.CLM_QTY_PASS);
                                $("#tec2_clm_qty_reject").val(data.Getdata[0].val.CLM_QTY_REJECT);
                                //if (data.Getdata[0].val.CLM_QTY_ORG > 0) {
                                //    $("#_claimqty").text(data.Getdata[0].val.CLM_QTY_ORG);//Qty//
                                //} else {
                                    $("#_claimqty").text(data.Getdata[0].val.CLM_REQQTY);//Qty//
                                //}
                                $("#_claimqty_pass").text(data.Getdata[0].val.CLM_QTY_PASS);//Qty pass//
                                $("#_claimqty_reject").text(data.Getdata[0].val.CLM_QTY_REJECT);//Qty reject//
                                ///ตรวจสอบรับสินค้าเคลม////
                                var today = new Date();
                                var _cktype = $("#_udertype").val();
                                var _ckuser = $("#_uderlogin").val();
                                ///ข้อมูลเคลมสำหรับรุ่นรถ///
                                $("#_vemac").val(data.Getdata[0].val.CLM_Machine);
                                $("#_moty").val(data.Getdata[0].val.CLM_Model);
                                $("#_modyear").val(data.Getdata[0].val.CLM_ModelYear);
                                $("#_encod").val(data.Getdata[0].val.CLM_EngineCode);
                                $("#_chno").val(data.Getdata[0].val.CLM_ChassisNo);
                                $("#_pump").val(data.Getdata[0].val.CLM_InjecPump);
                                $("#_typpro").val(data.Getdata[0].val.CLM_TypeProduct);
                                $("#_warcarno").val(data.Getdata[0].val.CLM_WarrantyNo);
                                $("#_milage").val(data.Getdata[0].val.CLM_Milage);
                                var dateof;
                                var dateofsp;
                                dateof = data.Getdata[0].val.CLM_USEDAY;
                                dateofsp = dateof.split("/");
                                console.log(dateofsp[0])
                                $("#_workdacar").val(dateofsp[0]);
                                $("#_workmonth").val(dateofsp[1]);
                                $("#_workday").val(dateofsp[2]);
                                $("#_worktime").val(dateofsp[3]);
                                $("#_datofdam").val(data.Getdata[0].val.CLM_DateDamage);
                                $("#_batcod").val(data.Getdata[0].val.CLM_BatchCode);

                                ///lock Display///
                                $("#_vemac").attr("disabled", "disabled");
                                $("#_moty").attr("disabled", "disabled");
                                $("#_modyear").attr("disabled", "disabled");
                                $("#_encod").attr("disabled", "disabled");
                                $("#_chno").attr("disabled", "disabled");
                                $("#_pump").attr("disabled", "disabled");
                                $("#_typpro").attr("disabled", "disabled");
                                $("#_warcarno").attr("disabled", "disabled");
                                $("#_milage").attr("disabled", "disabled");
                                $("#_workdacar").attr("disabled", "disabled");
                                $("#_workmonth").attr("disabled", "disabled");
                                $("#_workday").attr("disabled", "disabled");
                                $("#_worktime").attr("disabled", "disabled");
                                $("#_datofdam").attr("disabled", "disabled");
                                $("#_batcod").attr("disabled", "disabled");

                                var tyclom = data.Getdata[0].val.Clmtype;
                                console.log('tyclom = ' + tyclom);

                                if (tyclom == "1") {
                                    $("#a").attr('checked', true);
                                    $("#b").attr('checked', false);
                                    $("#c").attr('checked', false);
                                    $("#d").attr('checked', false);
                                    $("#e").attr('checked', false);
                                    $("#f").attr('checked', false);
                                    $("#a").removeAttr('disabled');
                                } else if (tyclom == "2") {
                                    $("#a").attr('checked', false);
                                    $("#b").attr('checked', true);
                                    $("#c").attr('checked', false);
                                    $("#d").attr('checked', false);
                                    $("#e").attr('checked', false);
                                    $("#f").attr('checked', false);
                                    $("#b").removeAttr('disabled');
                                } else if (tyclom == "3") {

                                    $("#a").attr('checked', false);
                                    $("#b").attr('checked', false);
                                    $("#c").attr('checked', true);
                                    $("#d").attr('checked', false);
                                    $("#e").attr('checked', false);
                                    $("#f").attr('checked', false);
                                    $("#c").removeAttr('disabled');
                                } else if (tyclom == "4") {

                                    $("#a").attr('checked', false);
                                    $("#b").attr('checked', false);
                                    $("#c").attr('checked', false);
                                    $("#d").attr('checked', true);
                                    $("#e").attr('checked', false);
                                    $("#f").attr('checked', false);
                                    $("#d").removeAttr('disabled');
                                } else if (tyclom == "5") {
                                    $("#a").attr('checked', false);
                                    $("#b").attr('checked', false);
                                    $("#c").attr('checked', false);
                                    $("#d").attr('checked', false);
                                    $("#e").attr('checked', true);
                                    $("#f").attr('checked', false);
                                    $("#e").removeAttr('disabled');
                                } else if (tyclom == "6") {
                                    $("#a").attr('checked', false);
                                    $("#b").attr('checked', false);
                                    $("#c").attr('checked', false);
                                    $("#d").attr('checked', false);
                                    $("#e").attr('checked', false);
                                    $("#f").attr('checked', true);
                                    $("#f").removeAttr('disabled');
                                } else if (tyclom == "") {
                                    $("#a").attr('checked', false);
                                    $("#b").attr('checked', false);
                                    $("#c").attr('checked', false);
                                    $("#d").attr('checked', false);
                                    $("#e").attr('checked', false);
                                    $("#f").attr('checked', true);
                                    $("#f").removeAttr('disabled');
                                }

                                $("#_anlysstatustectech").attr("disabled", "disabled");
                                $("#_anlysafterprotectech").attr("disabled", "disabled");
                                $("#_anlysafterprotectech").attr("disabled", "disabled");
                                $("#atech").attr("disabled", "disabled");
                                $("#btech").attr("disabled", "disabled");
                                $("#ctech").attr("disabled", "disabled");
                                $("#dtech").attr("disabled", "disabled");
                                $("#etech").attr("disabled", "disabled");
                                $("#ftech").attr("disabled", "disabled");

                                /**=======Techadmin========**/
                                var _ADMINProststus = data.Getdata[0].val.ADMIN_ANLYS_STATUS
                                if (_ADMINProststus != "0") { //techadmin ตรวจสอบแล้ว
                                    //alert("ผ่านการตรวจสอบรับสินค้าเคลมเรียบร้อย");
                                    $("#_proceedtotec").val(data.Getdata[0].val.CLM_RCVSTATUS);  ///สถานะการรับสินค้า
                                    $("#_rcvbyte").val(data.Getdata[0].val.CLM_RCVBY);      //ผู้รับสินค้าเคลม
                                    $("#_rcvdatetec").val(data.Getdata[0].val.CLM_RCVDATE);//วันที่รับสินค้าเคลม:
                                    $("#_rvqtytec").val(data.Getdata[0].val.CLM_QTY); //จำนวนที่รับเคลม:
                                    // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                                    $("#_clmdatetec").val(data.Getdata[0].val.CLM_DATE);//Claim date:
                                    $("#_duedatetec").val(data.Getdata[0].val.CLM_DUEDATE); //Due date
                                    $("#_admintec").val(data.Getdata[0].val.CLM_ADMIN);//Admin:
                                    //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                                    // $("#_shelfloctec").val(data.Getdata[0].val.CLM_SHELF_LOCATION);//Shelf Location
                                    //$("#_tecwork").val(data.Getdata[0].val.TechnicianName);//ช่างที่รับผิดชอบ:
                                    $("#causeclaimtec").val(data.Getdata[0].val.CLM_REMARK);//หมายเหตุการรับเคลม
                                } else { //techadmin ยังไม่ตรวจ
                                    //Admin//
                                    $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
                                    $("#_rcvbyte").val("");      //ผู้รับสินค้าเคลม
                                    $("#_rcvdatetec").val("");//วันที่รับสินค้าเคลม:
                                    $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
                                    // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                                    $("#_clmdatetec").val("");//Claim date:
                                    $("#_duedatetec").val(""); //Due date
                                    $("#_admintec").val("");//Admin:
                                    //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                                    $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                                }
                                /**=======Techadmin1========**/
                                var _tec1Proststus = data.Getdata[0].val.TECH1_PROCESS_STATUS;
                                if (_tec1Proststus != "0") {
                                    //console.log(anlysafterprotec1)
                                    ///Technic 1 : วิเคราะห์สินค้าเคลม///
                                    $("#_nametec1").val(data.Getdata[0].val.TECH1_NAME);//ตรวจสอบโดย
                                    $("#_anlysdatetec1").val(data.Getdata[0].val.TECH1_ANLYS_DATE);    //วันที่วิเคราะห์ปัญหา
                                    $("#_perfromtec1").val(data.Getdata[0].val.CLM_PERFORM); //ดำเนินการ
                                    $("#_anlysstatustec1").val(data.Getdata[0].val.TECH1_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    $("#_anlysafterprotec1").val(data.Getdata[0].val.ANLYS_AFTERPROCESS); //หลังเสร็จสิ้นกระบวนการเคลม
                                    var anlysafterprotec1 = data.Getdata[0].val.ANLYS_AFTERPROCESS;
                                    if (anlysafterprotec1 == "1") {
                                        $("#displ").css("display", "block")
                                        $("#_scrapdatetec1").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                    } else {
                                        crapdatetec1 = null;
                                        $("#displ").css("display", "none")
                                    }

                                    $("#_shelfloctec").val(data.Getdata[0].val.CLM_SHELF_LOCATION);//Shelf Location
                                    $("#_tecwork").val(data.Getdata[0].val.TechnicianName);//ช่างที่รับผิดชอบ:
                                    $("#remaketec1").val(data.Getdata[0].val.TECH1_ANLYS_RESULT);  //ผลการตรวจสอบ
                                } else if (_tec1Proststus == "0") {
                                    ///ยังไม่ได้ตรวจสอบรับสินค้าเคลม && วิเคราะห์สินค้าเคลม////
                                    // alert("ยังไม่ได้ตรวจสอบรับสินค้าเคลม && วิเคราะห์สินค้าเคลม1");
                                    //Tech1//
                                    $("#_nametec1").val("");//ตรวจสอบโดย
                                    $("#_anlysdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));     //วันที่วิเคราะห์ปัญหา
                                    $("#_perfromtec1").val(proceedtoup); //ดำเนินการ
                                    $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                                    $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                                    $("#_scrapdatetec1").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));
                                    $("#_shelfloctec").val("");//Shelf Location
                                    $("#_tecwork").val("");//ช่างที่รับผิดชอบ:
                                    $("#remaketec1").val("");
                                }
                                /*=======Techadmin2========**/
                                var _tec2Process = data.Getdata[0].val.TECH2_PROCESS_STATUS;
                                var _tec2Proststus = data.Getdata[0].val.TECH2_ANLYS_STATUS
                                if (_tec2Process != "0") {
                                    $("#_anlysstatustectech").val(data.Getdata[0].val.TEC_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    $("#_anlysafterprotectech").val(data.Getdata[0].val.TEC_PROCESS_STATUS); //หลังเสร็จสิ้นกระบวนการเคลม
                                    var anlysafterprotecpm = $("#_anlysafterprotectech").val();
                                    if (anlysafterprotecpm == "1") {
                                        $("#displtech").css("display", "block")
                                        $("#_scrapdatetectech").val(data.Getdata[0].val.TEC_ANLYS_AFTERPROCESS);     //วันที่ทำลาย:
                                    } else {
                                        crapdatetec1 = null;
                                        $("#displtech").css("display", "none")
                                    }
                                    // var tyclom = data.Getdata[0].val.Process_Tech;

                                    var tyclom = data.Getdata[0].val.Process_Tech;
                                    $("#_clmsendpm").val(tyclom);
                                    if (tyclom == "1") {
                                        $("#atech").attr('checked', true);
                                        $("#btech").attr('checked', false);
                                        $("#ctech").attr('checked', false);
                                        $("#dtech").attr('checked', false);
                                        $("#etech").attr('checked', false);
                                        $("#ftech").attr('checked', false);

                                    } else if (tyclom == "2") {
                                        $("#atech").attr('checked', false);
                                        $("#btech").attr('checked', true);
                                        $("#ctech").attr('checked', false);
                                        $("#dtech").attr('checked', false);
                                        $("#etech").attr('checked', false);
                                        $("#ftech").attr('checked', false);
                                    } else if (tyclom == "3") {
                                        $("#atech").attr('checked', false);
                                        $("#btech").attr('checked', false);
                                        $("#ctech").attr('checked', true);
                                        $("#dtech").attr('checked', false);
                                        $("#etech").attr('checked', false);
                                        $("#ftech").attr('checked', false);
                                    } else if (tyclom == "4") {
                                        $("#atech").attr('checked', false);
                                        $("#btech").attr('checked', false);
                                        $("#ctech").attr('checked', false);
                                        $("#dtech").attr('checked', true);
                                        $("#etech").attr('checked', false);
                                        $("#ftech").attr('checked', false);
                                    } else if (tyclom == "5") {
                                        $("#atech").attr('checked', false);
                                        $("#btech").attr('checked', false);
                                        $("#ctech").attr('checked', false);
                                        $("#dtech").attr('checked', false);
                                        $("#etech").attr('checked', true);
                                        $("#ftech").attr('checked', false);
                                    } else if (tyclom == "6") {
                                        $("#atech").attr('checked', false);
                                        $("#btech").attr('checked', false);
                                        $("#ctech").attr('checked', false);
                                        $("#dtech").attr('checked', false);
                                        $("#etech").attr('checked', false);
                                        $("#ftech").attr('checked', true);
                                        $("#ftech").attr("disabled", "disabled");
                                    }
                                    //Tech 2
                                    if (_tec2Proststus == "1") {
                                        ///Technic 2 : ผลการพิจารณา///
                                        //  alert("Technic 2 : ผ่าน");
                                        $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                        $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                        $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                        $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                        $("#_btnsaveconsider").attr("disabled", "disabled");

                                    } else if (_tec2Proststus == "2") {//ปฎิเสธ
                                        //alert("Technic 2 : ปฎิเสธ");
                                        $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                        $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                        $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                        $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                        $("#_btnsaveconsider").attr("disabled", "disabled");

                                        $("#_btnsaveconsider").attr("disabled", "disabled");

                                    } else if (_tec2Proststus == "3") {//รอ
                                        // alert("Technic 2 : รอsup");
                                        $("#_name2tec").val(data.Getdata[0].val.TECH2_NAME); //รับรองการตรวจสอบโดย
                                        $("#_appdatetec").val(data.Getdata[0].val.TECH2_ANLYS_DATE);  //วันที่เทคนิคพิจารณา
                                        $("#_apprvststus").val(data.Getdata[0].val.TECH2_ANLYS_STATUS); // สถานะ
                                        $("#remaketec2").val(data.Getdata[0].val.TECH2_REMARK);   //หมายเหตุ
                                        // $("#_btnsaveapprove").attr("disabled", "disabled");
                                        // $("#_btnsaveapprove").css("display","none")
                                    }
                                } else if (_tec2Process == "0") {
                                    // alert("ยังไม่ผ่านTech2");
                                    //Tech2//
                                    $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                                    $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
                                    $("#_apprvststus").val("0"); // สถานะ
                                    $("#remaketec2").val("");   //หมายเหตุ
                                    $("#_pmdate").attr("disabled", "disabled");
                                    $("#_pmtstus").attr("disabled", "disabled");
                                    $("#remakepm").attr("disabled", "disabled");
                                    $("#_pmnewpn").attr("disabled", "disabled");
                                    $("#_btnsaveapprove").css("display", "none");


                                    $("#_anlysstatustectech").attr("disabled", "disabled");
                                    $("#_anlysafterprotectech").attr("disabled", "disabled");
                                    $("#_scrapdatetectech").attr("disabled", "disabled");
                                    $("#atech").attr("disabled", "disabled");
                                    $("#btech").attr("disabled", "disabled");
                                    $("#ctech").attr("disabled", "disabled");
                                    $("#dtech").attr("disabled", "disabled");
                                    $("#etech").attr("disabled", "disabled");
                                    $("#ftech").attr("disabled", "disabled");
                                    $("#atech").attr('checked', false);
                                    $("#btech").attr('checked', false);
                                    $("#ctech").attr('checked', false);
                                    $("#dtech").attr('checked', false);
                                    $("#etech").attr('checked', false);
                                    $("#ftech").attr('checked', false);

                                }
                                /*=======PM========**/
                                var _PMProststus = data.Getdata[0].val.PM_PROCESS_STATUS;
                                var _PMProappdate = data.Getdata[0].val.PM_APPRV_DATE;
                                var f_BtnApp = data.Getdata[0].val.F_BtnApp;
                                if (_PMProststus != "0") {
                                    ///Product Manager Approval///
                                    var newDate = addDays(new Date(), 15);
                                    //alert(_PMProappdate);
                                    if (_PMProappdate == "") {
                                        $("#_pmdate").val(today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2));  //วันที่PM พิจารณา
                                    } else {
                                        $("#_pmdate").val(data.Getdata[0].val.PM_APPRV_DATE); //วันที่PM พิจารณา
                                    }
                                    $("#_pmtstus").val(data.Getdata[0].val.PM_APPRV_STATUS); //สถานะอนุมัติ Approve, Not Approve, Re
                                    $("#_pmtstus_pm").val(data.Getdata[0].val.PM_APPRV_STATUS); //สถานะอนุมัติ Approve, Not Approve, Re
                                    $("#remakepm").val(data.Getdata[0].val.PM_REMARK);
                                    $("#_pmnewpn").val(data.Getdata[0].val.PM_Replacemen);

                                    ///ยกมาเป็นส่วนของ PM////
                                    $("#_anlysafterprotecpm").val(data.Getdata[0].val.PM_PROCESS_STATUS); //หลังเสร็จสิ้นกระบวนการเคลม
                                    var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
                                    if (anlysafterprotecpm == "1") {
                                        $("#displpm").css("display", "block")
                                        $("#_scrapdatetecpm").val(data.Getdata[0].val.SCRAP_DATE);     //วันที่ทำลาย:
                                    } else {
                                        crapdatetec1 = null;
                                        $("#displpm").css("display", "none")
                                    }
                                    var tyclom = data.Getdata[0].val.Clmtype;
                                    //ที่เพิ่มของ Saleman
                                    $("#_anlysstatustecpm").val(data.Getdata[0].val.PM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    $("#_anlysstatustecpm_pm").val(data.Getdata[0].val.PM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    //alert(data.Getdata[0].val.SM_ANLYS_STATUS);
                                    if(data.Getdata[0].val.SM_ANLYS_STATUS == "0" || data.Getdata[0].val.SM_ANLYS_STATUS == "" || data.Getdata[0].val.SM_ANLYS_STATUS == null){
                                        $("#_anlysstatus_sm").val(data.Getdata[0].val.PM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    } else {
                                        $("#_anlysstatus_sm").val(data.Getdata[0].val.SM_ANLYS_STATUS); //สถานะการวิเคราะห์ WR,WE,WF
                                    }
                                    //ปิดปุ่ม submit saleman
                                    console.log('GM = ' + data.Getdata[0].val.GM_APPRV_DATE);
                                    if(data.Getdata[0].val.GM_APPRV_DATE != ""){
                                        $("#btn_save_saleman").css("display", "none");
                                    } else {
                                        $("#btn_save_saleman").css("display", "block");
                                    }

                                    if (tyclom == "1") {
                                        $("#a").prop('checked', true);
                                        $("#b").prop('checked', false);
                                        $("#c").prop('checked', false);
                                        $("#d").prop('checked', false);
                                        $("#e").prop('checked', false);
                                        $("#f").prop('checked', false);
                                        $("#a").removeAttr('disabled');
                                    } else if (tyclom == "2") {
                                        $("#a").prop('checked', false);
                                        $("#b").prop('checked', true);
                                        $("#c").prop('checked', false);
                                        $("#d").prop('checked', false);
                                        $("#e").prop('checked', false);
                                        $("#f").prop('checked', false);
                                        $("#b").removeAttr('disabled');
                                    } else if (tyclom == "3") {
                                        $("#a").prop('checked', false);
                                        $("#b").prop('checked', false);
                                        $("#c").prop('checked', true);
                                        $("#d").prop('checked', false);
                                        $("#e").prop('checked', false);
                                        $("#f").prop('checked', false);
                                        $("#c").removeAttr('disabled');
                                    } else if (tyclom == "4") {
                                        $("#a").prop('checked', false);
                                        $("#b").prop('checked', false);
                                        $("#c").prop('checked', false);
                                        $("#d").prop('checked', true);
                                        $("#e").prop('checked', false);
                                        $("#f").prop('checked', false);
                                        $("#d").removeAttr('disabled');
                                    } else if (tyclom == "5") {
                                        $("#a").prop('checked', false);
                                        $("#b").prop('checked', false);
                                        $("#c").prop('checked', false);
                                        $("#d").prop('checked', false);
                                        $("#e").prop('checked', true);
                                        $("#f").prop('checked', false);
                                        $("#e").removeAttr('disabled');
                                    } else if (tyclom == "6") {
                                        $("#a").prop('checked', false);
                                        $("#b").prop('checked', false);
                                        $("#c").prop('checked', false);
                                        $("#d").prop('checked', false);
                                        $("#e").prop('checked', false);
                                        $("#f").prop('checked', true);
                                        $("#f").removeAttr('disabled');
                                    } else if (tyclom == "") {
                                        $("#a").prop('checked', false);
                                        $("#b").prop('checked', false);
                                        $("#c").prop('checked', false);
                                        $("#d").prop('checked', false);
                                        $("#e").prop('checked', false);
                                        $("#f").prop('checked', true);
                                        $("#f").removeAttr('disabled');
                                    }
                                    if (f_BtnApp == "2") {
                                        $("#_btnsaveapprove").attr("disabled", "disabled");
                                        $("#_btnsaveapprove").css("display", "none");
                                        $("#_pmdate").attr("disabled", "disabled");
                                        $("#_pmtstus").attr("disabled", "disabled");
                                        $("#remakepm").attr("disabled", "disabled");
                                        $("#_pmnewpn").attr("disabled", "disabled");

                                        $("#_anlysstatustecpm").attr("disabled", "disabled");
                                        $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                        $("#displpm").attr("disabled", "disabled");
                                    } else if (f_BtnApp == "1") {
                                        $("#_btnsaveapprove").removeAttr("disabled", "disabled");
                                        $("#_btnsaveapprove").css("display", "block");
                                        $("#_pmdate").removeAttr("disabled", "disabled");
                                        $("#_pmtstus").removeAttr("disabled", "disabled");
                                        $("#remakepm").removeAttr("disabled", "disabled");
                                        $("#_pmnewpn").removeAttr("disabled", "disabled");

                                        $("#_anlysstatustecpm").removeAttr("disabled", "disabled");
                                        $("#_anlysafterprotecpm").removeAttr("disabled", "disabled");
                                        $("#displpm").removeAttr("disabled", "disabled");
                                    }
                                    //disable field PM
                                    $("#_anlysstatustecpm").attr("disabled", "disabled");
                                    $("#_anlysafterprotecpm").attr("disabled", "disabled");
                                    $("#_scrapdatetecpm").attr("disabled", "disabled");
                                    $("#_pmdate").attr("disabled", "disabled");
                                    $("#_pmtstus").attr("disabled", "disabled");
                                    $("#_pmnewpn").attr("disabled", "disabled");
                                    $("#remakepm").attr("disabled", "disabled");
                                }
                                /*=======Saleman TAM========**/
                                var _SMProstatus = data.Getdata[0].val.SM_PROCESS_STATUS;
                                if (_SMProstatus != "0" && _SMProstatus !== undefined && _SMProstatus != "") { //อนุมัติแล้ว
                                    $("#saleman_approve_name").val(data.Getdata[0].val.SM_NAME);        //sale ผู้อนุมัติ
                                    $("#saleman_approve_date").val(data.Getdata[0].val.SM_APPRV_DATE);  //วันที่อนุมัติ
                                    $("#saleman_approve_status").val(data.Getdata[0].val.SM_PROCESS_STATUS);    //สถานะ
                                    $("#saleman_remark").val(data.Getdata[0].val.SM_REMARK);            //หมายเหตุ
                                } else { //ยังไม่อนุมัติแล้ว

                                    $("#saleman_approve_name").val(userId);
                                    $("#saleman_approve_date").val(getDateCurrent());  //วันที่อนุมัติ
                                }

                            } else {
                                $("#textAlertWarning").empty();
                                $("#textAlertWarning").text("No List claim...");
                                $("#myModalWarning").modal();
                            }
                        }, complete: function(){
                            LoadingHide();
                        }
                    });


                    $('#appvideosales').html("");
                    $.ajax({
                        url: '@Url.Action("GetfileVideo", "GetdataCenter")',
                        data: {
                            inCLM_ID: nokey,
                            CLM_NO: nosubkey,
                            Im_No: "01"
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (result) {
                            console.log(result.videolist)
                            if (result.videolist.length > 0) {
                                $('#appvideosales').html("");
                                for (var i = 0; i < result.videolist.length; i++) {
                                    SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                    SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';
                                    SubmithtmlPage += '</video>';
                                    $('#appvideosales').append(SubmithtmlPage);
                                    // HTMLbuilder = HTMLbuilder + imgHtml;
                                }
                            } else {

                            }
                        },
                    });
                    $('#appvideotech').html("");
                    $.ajax({
                        url: '@Url.Action("GetfileVideo", "GetdataCenter")',
                        data: {
                            inCLM_ID: nokey,
                            CLM_NO: nosubkey,
                            Im_No: "TEC01"
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (result) {
                            console.log(result.videolist)
                            if (result.videolist.length > 0) {
                                $('#appvideotech').html("");
                                for (var i = 0; i < result.videolist.length; i++) {
                                    SubmithtmlPage = '<video controls="controls" style="width: 600px; max-width: 100%;">';
                                    SubmithtmlPage += '<source src="' + result.videolist[0].FilePath + '.mp4" + " type="video/mp4" videomode="720p"/>';

                                    SubmithtmlPage += '</video>';
                                    $('#appvideotech').append(SubmithtmlPage);
                                    // HTMLbuilder = HTMLbuilder + imgHtml;
                                }


                            } else {

                            }


                        },
                    });
                    //Getimage//
                    $("#boximage").html("");
                    $.ajax({
                        url: '@Url.Action("GetPathImage", "GetdataCenter")',
                        data: {
                            inCLM_ID: nokey,
                            CLM_NO: nosubkey
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (result) {
                            console.log(result);
                            if (result.Getdata.length > 0) {
                                //$("#myModalimage").modal();
                                $('#boximage').html("");
                                if (result.Getdata) {
                                    resultObj = eval(result.Getdata);
                                    var SubmithtmlPage = "";
                                    for (var i = 0; i < resultObj.length; i++) {
                                        var str = resultObj[i].val.IMAGE_NO;
                                        var res = str.substring(0, 3);
                                        if (res != "TEC") {
                                            SubmithtmlPage = '<div class="col-sm-3">';
                                            SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                            SubmithtmlPage += '</div>';
                                            $('#boximage').append(SubmithtmlPage);
                                            // HTMLbuilder = HTMLbuilder + imgHtml;
                                        }
                                    }
                                } else {

                                    $("#myModalimage").modal();
                                }
                            }
                        }
                    });
                    $("#boximagetechnic").html("");
                    $.ajax({
                        url: '@Url.Action("GetPathImage", "GetdataCenter")',
                        data: {
                            inCLM_ID: nokey,
                            CLM_NO: nosubkey
                        },
                        type: "POST",
                        dataType: "JSON",
                        success: function (result) {
                            console.log(result);
                            if (result.Getdata.length > 0) {
                                //$("#myModalimage").modal();
                                $('#boximagetechnic').html("");
                                if (result.Getdata) {
                                    resultObj = eval(result.Getdata);
                                    var SubmithtmlPage = "";
                                    for (var i = 0; i < resultObj.length; i++) {
                                        var str = resultObj[i].val.IMAGE_NO;
                                        var res = str.substring(0, 3);
                                        if (res == "TEC") {
                                            SubmithtmlPage = '<div class="col-sm-3">';
                                            SubmithtmlPage += '<img src="' + resultObj[i].val.PATH + '"  class="img-responsive img-thumbnail" id="myImg">';
                                            SubmithtmlPage += '</div>';
                                            $('#boximagetechnic').append(SubmithtmlPage);
                                        }
                                        // HTMLbuilder = HTMLbuilder + imgHtml;
                                    }
                                } else {

                                    //  $("#myModalimage").modal();
                                }
                            }
                        }
                    });
                }
                //adingHide();
            });
            $(document).on('click', '#myImg', function () {
                var modal = document.getElementById('myModalzoom');
                var img = document.getElementById('myImg');
                var modalImg = document.getElementById("img01");
                var captionText = document.getElementById("caption");
                modal.style.display = "block";
                modalImg.src = this.src;
                captionText.innerHTML = this.alt;
            });
            $(document).on('click', '.close', function () {
                var modal = document.getElementById('myModalzoom');
                modal.style.display = "none";
            });
            $(document).on('click', '#closeimg', function () {
                var modal = document.getElementById('myModalzoom');
                modal.style.display = "none";
            });
            $(document).on('click', '#myModalzoom div', function () {
                var modal = document.getElementById('myModalzoom');
                modal.style.display = "none";
            });
            $("#_btnsavecheck").click(function () {
                ///Detail Invoice///
                var invoicelineamt = $("#_invoicelineamt").text();
                var invoicelinedis = $("#_invoicelinedis").text();
                var invoicelinedisamt = $("#_invoicelinedisamt").text();
                var stkgup = $("#_stkgup").text();

                var proceedtotec = $("#_proceedtotec").val();  ///สถานะการรับสินค้า
                var rcvbyte = $("#_rcvbyte").val();      //ผู้รับสินค้าเคลม
                var rcvdatetec = $("#_rcvdatetec").val();//วันที่รับสินค้าเคลม:
                var rvqtytec = $("#_rvqtytec").val(); //จำนวนที่รับเคลม:
                var rcvbyte = $("#_rcvbyte").val(); //
                var clmdatetec = $("#_clmdatetec").val();//Claim date:
                var duedatetec = $("#_duedatetec").val(); //Due date
                var admintec = $("#_admintec").val();//Admin:
                //  var datechecktec = $("#_datechecktec").val(); //วันที่ตรวจสอบ
                var shelfloctec = $("#_shelfloctec").val();//Shelf Location
                var tecwork = $("#_tecwork").val();//ช่างที่รับผิดชอบ:
                var causeclaimtec = $("#causeclaimtec").val();//หมายเหตุการรับเคลม
                var nokey = $("#Nospankey").text();
                var nosubkey = $("#subNospan").text();
                var rcuomn = $("#_uom").text();//UOM


                /////////////วิเคราะห์ปัญหา///////////////

                var nametec1 = $("#_nametec1").val();//ตรวจสอบโดย
                var anlysdatetec1 = $("#_anlysdatetec1").val();    //วันที่วิเคราะห์ปัญหา
                var perfromtec1 = $("#_perfromtec1").val(); //ดำเนินการ
                var anlysstatustec1 = $("#_anlysstatustec1").val(); //สถานะการวิเคราะห์ WR,WE,WF
                var anlysafterprotec1 = $("#_anlysafterprotec1").val(); //หลังเสร็จสิ้นกระบวนการเคลม
                var crapdatetec1;

                if (anlysafterprotec1 == "1") {
                    crapdatetec1 = $("#_scrapdatetec1 ").val();     //วันที่ทำลาย:
                } else {
                    crapdatetec1 = null;
                }
                var remaketec1 = $("#remaketec1").val();  //ผลการตรวจสอบ
                var ckt = $("#_t1").val();

                $.ajax({
                    url: '@Url.Action("SaveProcessClaimDetail", "Process_Sc")',
                    data: {
                        aj_REQ_NO: nokey,
                        aj_CLM_NO_SUB: nosubkey,
                        aj_CLM_LineAMT: invoicelineamt,
                        aj_CLM_LineDiscountAMT: invoicelinedisamt,
                        aj_CLM_LineDiscPercent: invoicelinedis,
                        aj_CLM_RCVSTATUS: proceedtotec,
                        aj_CLM_RCVBY: rcvbyte,
                        aj_CLM_QTY: rvqtytec,

                        aj_CLM_ADMIN: admintec,
                        aj_CLM_SHELF_LOCATION: shelfloctec,
                        aj_CLM_REMARK: causeclaimtec,
                        aj_CLM_RCVDATE: rcvdatetec,
                        aj_CLM_UOM: rcuomn,
                        aj_CLM_DUEDATE: duedatetec,
                        aj_CLM_DATE: clmdatetec,
                        aj_Technician: tecwork,
                        aj_stkgrp: stkgup,

                        aj_TECH1_NAME: nametec1,
                        aj_TECH1_ANLYS_DATE: anlysdatetec1,
                        aj_CLM_PERFORM: perfromtec1,
                        aj_TECH1_ANLYS_STATUS: anlysstatustec1,
                        aj_ANLYS_AFTERPROCESS: anlysafterprotec1,
                        aj_SCRAP_DATE: crapdatetec1,
                        aj_TECH1_ANLYS_RESULT: remaketec1

                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                    }
                });
            });

            $("#_btnsaveconsider").click(function () {
                var nokey = $("#Nospankey").text();
                var nosubkey = $("#subNospan").text();

                var name2tec = $("#_name2tec").val(); //รับรองการตรวจสอบโดย
                var appdatetec = $("#_appdatetec").val();  //วันที่เทคนิคพิจารณา
                var apprvststus = $("#_apprvststus").val(); // สถานะ
                var remaketec2 = $("#remaketec2").val();   //หมายเหตุ
                var ckt1 = $("#_t1").val();
                if (nokey == "" && nosubkey == "") {

                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("No record of result");
                    $("#myModalWarning").modal(); return false;
                }
                if (ckt1 == "0") {

                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("Waiting to inspect the claim product && Analyze the product claim.....");
                    $("#myModalWarning").modal(); return false;
                }
                if (apprvststus == "0") {
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("Please select the result of consideration");
                    $("#myModalWarning").modal(); return false;

                }
                $.ajax({
                    url: '@Url.Action("SaveProcessClaimDetailTec2", "Process_Sc")',
                    data: {
                        aj_REQ_NO: nokey,
                        aj_CLM_NO_SUB: nosubkey,
                        aj_TECH2_NAME: name2tec,
                        aj_TECH2_APPRV_STATUS: apprvststus,
                        aj_TECH2_REMARK: remaketec2,
                        aj_TECH2_APPRV_DATE: appdatetec
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                    }
                });

            });
            $('#_anlysstatustecpm').change(function () {
                var _val = $(this).val();
                //alert(_val)
                if (_val == "2") {
                    $("#a").attr('checked', false);
                    $("#b").attr('checked', false);
                    $("#c").attr('checked', true);
                    $("#d").attr('checked', false);
                    $("#e").attr('checked', false);
                    $("#f").attr('checked', false);
                    $("#c").removeAttr("disabled");
                    $("#f").attr("disabled", "disabled");
                } else {
                    $("#a").prop('checked', false);
                    $("#b").prop('checked', false);
                    $("#c").prop('checked', false);
                    $("#d").prop('checked', false);
                    $("#e").prop('checked', false);
                    $("#f").prop('checked', true);
                    $("#c").prop("disabled", "disabled");
                    $("#f").removeAttr("disabled");
                }
            });
            $('#a').attr("disabled", "disabled");
            $('#b').attr("disabled", "disabled");
            $('#c').attr("disabled", "disabled");
            $('#d').attr("disabled", "disabled");
            $('#e').attr("disabled", "disabled");
            $('#a').click(function () {
                //aps///
                if ($(this).prop("checked") == true) {
                    $('#b').attr("disabled", "disabled");
                    $('#c').attr("disabled", "disabled");
                    $('#d').attr("disabled", "disabled");
                    $('#e').attr("disabled", "disabled");
                    $('#f').attr("disabled", "disabled");
                }
                else if ($(this).prop("checked") == false) {
                    $('#b').removeAttr('disabled');
                    $('#c').removeAttr('disabled');
                    $('#d').removeAttr('disabled');
                    $('#e').removeAttr('disabled');
                    $('#f').removeAttr('disabled');
                }

            });
            $('#b').click(function () {

                if ($(this).prop("checked") == true) {
                    $('#a').attr("disabled", "disabled");
                    $('#c').attr("disabled", "disabled");
                    $('#d').attr("disabled", "disabled");
                    $('#e').attr("disabled", "disabled");
                    $('#f').attr("disabled", "disabled");
                }
                else if ($(this).prop("checked") == false) {
                    $('#a').removeAttr('disabled');
                    $('#c').removeAttr('disabled');
                    $('#d').removeAttr('disabled');
                    $('#e').removeAttr('disabled');
                    $('#f').removeAttr('disabled');
                }
            });
            $('#c').click(function () {


                if ($(this).prop("checked") == true) {
                    $('#a').attr("disabled", "disabled");
                    $('#b').attr("disabled", "disabled");
                    $('#d').attr("disabled", "disabled");
                    $('#e').attr("disabled", "disabled");
                    $('#f').attr("disabled", "disabled");
                }
                else if ($(this).prop("checked") == false) {
                    $('#a').removeAttr('disabled');
                    $('#b').removeAttr('disabled');
                    $('#d').removeAttr('disabled');
                    $('#e').removeAttr('disabled');
                    $('#f').removeAttr('disabled');
                }
            });
            $('#d').click(function () {

                if ($(this).prop("checked") == true) {
                    $('#a').attr("disabled", "disabled");
                    $('#b').attr("disabled", "disabled");
                    $('#c').attr("disabled", "disabled");
                    $('#e').attr("disabled", "disabled");
                    $('#f').attr("disabled", "disabled");

                }
                else if ($(this).prop("checked") == false) {
                    $('#a').removeAttr('disabled');
                    $('#b').removeAttr('disabled');
                    $('#c').removeAttr('disabled');
                    $('#e').removeAttr('disabled');
                    $('#f').removeAttr('disabled');

                }
            });
            $('#e').click(function () {
                //aps//
                if ($(this).prop("checked") == true) {
                    $('#a').attr("disabled", "disabled");
                    $('#b').attr("disabled", "disabled");
                    $('#c').attr("disabled", "disabled");
                    $('#d').attr("disabled", "disabled");
                    $('#f').attr("disabled", "disabled");

                }
                else if ($(this).prop("checked") == false) {
                    $('#a').removeAttr('disabled');
                    $('#b').removeAttr('disabled');
                    $('#c').removeAttr('disabled');
                    $('#d').removeAttr('disabled');
                    $('#f').removeAttr('disabled');

                }
            });
            $('#f').click(function () {
                if ($(this).prop("checked") == true) {
                    $('#a').attr("disabled", "disabled");
                    $('#b').attr("disabled", "disabled");
                    $('#c').attr("disabled", "disabled");
                    $('#d').attr("disabled", "disabled");
                    $('#e').attr("disabled", "disabled");
                }
                else if ($(this).prop("checked") == false) {
                    $('#a').removeAttr('disabled');
                    $('#b').removeAttr('disabled');
                    $('#c').removeAttr('disabled');
                    $('#d').removeAttr('disabled');
                    $('#e').removeAttr('disabled');
                }
            });
            //บันทึกผล
            $("#btn_save_saleman").click(function () {
                var error = 0;
                var msg = '';
                var nokey = $("#Nospankey").text();
                var nosubkey = $("#subNospan").text();
                var saleman_approve_name = $("#saleman_approve_name").val(); //ชื่อผู้อนุมัติ
                var saleman_approve_date = $("#saleman_approve_date").val(); //วันที่ SM อนุมัติ
                var saleman_approve_status = $("#saleman_approve_status").val(); //สถานะ SM
                var saleman_remark = $("#saleman_remark").val(); //หมายเหตุ
                var pm = $("#_PM").val();  // Product Manager
                var pmdate = $("#_pmdate").val(); //วันที่PM พิจารณา
                var pmtstus = $("#_pmtstus").val(); //สถานะอนุมัติ
                var pmreplacpn = $("#_pmnewpn").val();
                var userlogin = $("#_uderlogin").val();
                var anlysstatustecpm = $("#_anlysstatustecpm").val();
                var anlysafterprotecpm = $("#_anlysafterprotecpm").val();
                var scrapdatetecpm = $("#_scrapdatetecpm").val();
                var claimtypecke = $("input[name='vehicle']:checked").val();
                var claimTypeSm = $("#_anlysstatus_sm").val();
                //console.log('saleman_approve_status ' + saleman_approve_status);
                if (saleman_approve_date == "") {
                    ++error;
                    // msg += '<br>' + error + '. Please select approval date.';
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("Please select approval date.");
                    $("#myModalWarning").modal(); return false;
                }
                if (saleman_approve_status == "0") {
                    ++error;
                    // msg += '<br>' + error + '. Please select approval status.';
                    $("#textAlertWarning").empty();
                    $("#textAlertWarning").text("Please select approval status.");
                    $("#myModalWarning").modal(); return false;
                } else {
                    if (saleman_approve_status == "2") {// ไม่อนุมัติ
                        if (saleman_remark == "") {//ไม่มีหมายเหตุ
                            ++error;
                            //msg += '<br>' + error + '. Please specify additional notes.';
                            $("#textAlertWarning").empty();
                            $("#textAlertWarning").text("Please specify additional note.");
                            $("#myModalWarning").modal();
                            $("#myModalSucces").click(function () {
                                var select = $("#_PM");
                                select.children().remove();
                                select.append($("<option>").val("ALL").text("ALL"));
                                $(data).each(function (index, item) {

                                    select.append($("<option>").val(item.PROD).text(item.PROD + "/" + item.PRODNAM));
                                });

                                var valpm = $("#_PM").val();
                                var valststus = $("#_status").val();
                                var valDoc = $("#searchclaimno").val();
                                var valcom = $("#_company").val();
                                var valstkgrp = $("#_stkgrp").val();
                                var valstatdate = $("#_statdate").val();
                                var valenddate = $("#_enddate").val();
                                var valstatdatecus = $("#_statdate").val();
                                var valenddatecus = $("#_enddate").val();
                                var itemno = $("#_itemnosearch").val();
                                //get stkgrp
                                getStkByPm(valpm);

                                if (itemno != "") {
                                    itemno = splitval(itemno);
                                } else {
                                    itemno = "";
                                }
                                Getclmimpm(valpm, valststus, valDoc, valcom, valstkgrp, valstatdate, valenddate, itemno, valstatdate, valenddate)

                            });

                        }
                    }
                }

                $.ajax({
                    url: '@Url.Action("SaveProcessClaimSmTam", "ProcessApproveSmTam")',
                    data: {
                        SP_REQ_NO: nokey,
                        SP_CLM_NO_SUB: nosubkey,
                        SP_SM_NAME: saleman_approve_name,
                        SP_SM_APPRV_STATUS: saleman_approve_status,
                        SP_SM_REMARK: saleman_remark,
                        SP_SM_APPRV_DATE: saleman_approve_date,
                        SP_USERLOGIN: userlogin,
                        SP_CLAIMTYPE: claimtypecke,
                        SP_CLAIMTYPE_SM: claimTypeSm,
                    },
                    type: "POST",
                    dataType: "JSON",
                    success: function (data) {
                        console.log(data);
                        if (data.message == "true") {
                            $("#textAlertSucces").empty();
                            $("#textAlertSucces").text("บันทึกข้อมูลสำเร็จ/Save successfully");
                            $("#myModalSucces").modal();
                            // LoadingShow();
                            // location.href = location.href;

                        }
                    }
                });
            });

            function clearval() {
                $("#Nospankey").text("");
                $("#subNospan").text("");
                $("#_cusno").text("");
                $("#_cusname").text("");
                $("#requestby").text("");
               // $("#slmcod").text("");
                $("#sslmnam").text("");
                $("#requestdate").text("");
                $("#_itemno").text("");
                $("#_description").text("");
                $("#_uom").text("");
                $("#_invoiceno").text("");
                $("#_psdate").text("");
                $("#_invoiceqty").text("");
                $("#_unitPrice").text("");
                $("#_invoicelineamt").text("");
                $("#_invoicelinedis").text("");
                $("#_invoicelinedisamt").text("");
                $("#_foc").text("");
                $("#_stkgup").text("");
                $("#_workda").text("");
                $("#_claimqty").text("");
                $("#causeclaim").text("");
                $("#_proceedto").text("");
                $("#_statusclaim").text("");

                $('#appvideosales').html("");
                $('#appvideotech').html("");
                $("#boximage").html("");
                $("#boximagetechnic").html("");



                $("#_vemac").val("");
                $("#_moty").val("");
                $("#_modyear").val("");
                $("#_encod").val("");
                $("#_chno").val("");
                $("#_pump").val("");
                $("#_typpro").val("");
                $("#_warcarno").val("");
                $("#_milage").val("");
                $("#_datofdam").val("");
                $("#_batcod").val("");

                $("#causeclaim").val("");
                $("#_proceedto").val("0");
                $("#_statusclaim").val("2");
                $("#_workda").val("0"); //ระยะใช้งาน//
                $("#_workmonth").val("0"); //ระยะใช้งาน//
                $("#_workday").val("0");//ระยะใช้งาน//
                $("#_worktime").val("00:00");//ระยะใช้งาน//
                $("#_installdate").val("");
                $("#_claimcontacte").val("");
                $("#_contacte").val("");


                //Admin//
                $("#_proceedtotec").val("");  ///สถานะการรับสินค้า
                $("#_rcvbyte").val("");      //ผู้รับสินค้าเคลม
                $("#_rcvdatetec").val("");//วันที่รับสินค้าเคลม:
                $("#_rvqtytec").val(""); //จำนวนที่รับเคลม:
                // $("#_rcuom").val(data.Getdata[0].val.CLM_UOM); //UOM
                $("#_clmdatetec").val("");//Claim date:
                $("#_duedatetec").val(""); //Due date
                $("#_admintec").val("");//Admin:
                //$("#_datechecktec").val(data.Getdata[0].val.CLM_DATE); //วันที่ตรวจสอบ
                $("#causeclaimtec").val("");//หมายเหตุการรับเคลม
                //Tech1//
                $("#_nametec1").val("");//ตรวจสอบโดย
                $("#_anlysdatetec1").val("");     //วันที่วิเคราะห์ปัญหา
                $("#_perfromtec1").val(""); //ดำเนินการ
                $("#_anlysstatustec1").val("0"); //สถานะการวิเคราะห์ WR,WE,WF
                $("#_anlysafterprotec1").val("0"); //หลังเสร็จสิ้นกระบวนการเคลม
                $("#_scrapdatetec1").val("");
                $("#_shelfloctec").val("");//Shelf Location
                $("#_tecwork").val("");//ช่างที่รับผิดชอบ:
                $("#remaketec1").val("");

                //Tech2//
                $("#_name2tec").val(""); //รับรองการตรวจสอบโดย
                $("#_appdatetec").val(""); //วันที่เทคนิคพิจารณา
                $("#_apprvststus").val("0"); // สถานะ
                $("#remaketec2").val("");   //หมายเหตุ

                $("#_anlysstatustectech").val("");
                $("#_anlysafterprotectech").val("");
                $("#_scrapdatetectech").val("");// วันที่จะทำลาย:

                $("#_pmdate").attr("disabled", "disabled");
                $("#_pmtstus").attr("disabled", "disabled");
                $("#remakepm").attr("disabled", "disabled");
                $("#_pmnewpn").attr("disabled", "disabled");
                $("#_btnsaveapprove").css("display", "none");


                $("#_anlysstatustectech").attr("disabled", "disabled");
                $("#_anlysafterprotectech").attr("disabled", "disabled");
                $("#_scrapdatetectech").attr("disabled", "disabled");
                $("#atech").attr("disabled", "disabled");
                $("#btech").attr("disabled", "disabled");
                $("#ctech").attr("disabled", "disabled");
                $("#dtech").attr("disabled", "disabled");
                $("#etech").attr("disabled", "disabled");
                $("#ftech").attr("disabled", "disabled");
                $("#atech").attr('checked', false);
                $("#btech").attr('checked', false);
                $("#ctech").attr('checked', false);
                $("#dtech").attr('checked', false);
                $("#etech").attr('checked', false);
                $("#ftech").attr('checked', false);

                $("#_anlysstatustecpm").val("0");
                $("#_anlysafterprotecpm").val("0");
                $("#_pmdate").val("");
                $("#_pmtstus").val("0");
                $("#_pmnewpn").val("");
                $("#remakepm").val("");
                $("#a").attr('checked', false);
                $("#b").attr('checked', false);
                $("#c").attr('checked', false);
                $("#d").attr('checked', false);
                $("#e").attr('checked', false);
                $("#f").attr('checked', true);
                $("#f").removeAttr('disabled');
            }
            });

        </script>
</body>
</html>
